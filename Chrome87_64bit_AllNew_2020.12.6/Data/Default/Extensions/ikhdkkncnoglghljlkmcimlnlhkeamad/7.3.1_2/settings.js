/*! For license information please see settings.js.LICENSE.txt */
!function(e){function t(t){for(var r,o,u=t[0],l=t[1],c=t[2],h=0,f=[];h<u.length;h++)o=u[h],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(s&&s(t);f.length;)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,u=1;u<n.length;u++){var l=n[u];0!==a[l]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={7:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var u=window.webpackJsonp=window.webpackJsonp||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var s=l;i.push([236,0,1]),n()}({10:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n(51),i=n(50),o=n(27),u=n(8);function l(e){const[t]=Object(r.useState)(e),[n,l]=Object(r.useState)(null);return Object(r.useEffect)((()=>{const e=Object(o.a)(t,(e=>{l((t=>t?Object(u.b)(t,(t=>{Object(a.a)(t,e)})):t))}),l);return()=>{e()}}),[t]),[n,e=>{l((t=>{if(!t)return t;if("function"!=typeof e){const t=e;e=e=>{Object(a.a)(e,t)}}return Object(u.b)(t,e,(e=>{const n=e.map((e=>e.path[0])),r=Object(i.a)(t,n),a=Object(u.a)(r,e);browser.storage.local.set(a)}))}))}]}Object(u.c)()},100:function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;0!=a--;){var o=i[a];if(!e(t[o],n[o]))return!1}return!0}return t!=t&&n!=n}},124:function(e,t,n){"use strict";t.a=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(12),a=n(44),i="undefined"!=typeof document?new a.a(document.documentElement,r.FOCUS_DISABLED):{isActive:function(){return!0},start:function(){return!0},stop:function(){return!0}},o={alwaysShowFocus:function(){return i.stop()},isActive:function(){return i.isActive()},onlyShowFocusOnTabs:function(){return i.start()}}},133:function(e,t,n){"use strict";(function(e){var r=n(0),a=n.n(r),i=n(36),o=n(16),u=n.n(o),l=1073741823,c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:{};function s(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var h=a.a.createContext||function(e,t){var n,a,o,h="__create-react-context-"+((c[o="__global_unique_id__"]=(c[o]||0)+1)+"__"),f=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=s(t.props.value),t}Object(i.a)(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[h]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,a=e.value;((i=r)===(o=a)?0!==i||1/i==1/o:i!=i&&o!=o)?n=0:(n="function"==typeof t?t(r,a):l,0!==(n|=0)&&this.emitter.set(e.value,n))}var i,o},r.render=function(){return this.props.children},n}(r.Component);f.childContextTypes=((n={})[h]=u.a.object.isRequired,n);var d=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}Object(i.a)(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?l:t},r.componentDidMount=function(){this.context[h]&&this.context[h].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?l:e},r.componentWillUnmount=function(){this.context[h]&&this.context[h].off(this.onUpdate)},r.getValue=function(){return this.context[h]?this.context[h].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return d.contextTypes=((a={})[h]=u.a.object,a),{Provider:f,Consumer:d}};t.a=h}).call(this,n(52))},134:function(e,t,n){var r=n(237);e.exports=d,e.exports.parse=i,e.exports.compile=function(e,t){return u(i(e,t),t)},e.exports.tokensToFunction=u,e.exports.tokensToRegExp=f;var a=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function i(e,t){for(var n,r=[],i=0,o=0,u="",s=t&&t.delimiter||"/";null!=(n=a.exec(e));){var h=n[0],f=n[1],d=n.index;if(u+=e.slice(o,d),o=d+h.length,f)u+=f[1];else{var m=e[o],p=n[2],y=n[3],v=n[4],g=n[5],b=n[6],w=n[7];u&&(r.push(u),u="");var E=null!=p&&null!=m&&m!==p,x="+"===b||"*"===b,k="?"===b||"*"===b,N=n[2]||s,O=v||g;r.push({name:y||i++,prefix:p||"",delimiter:N,optional:k,repeat:x,partial:E,asterisk:!!w,pattern:O?c(O):w?".*":"[^"+l(N)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function u(e,t){for(var n=new Array(e.length),a=0;a<e.length;a++)"object"==typeof e[a]&&(n[a]=new RegExp("^(?:"+e[a].pattern+")$",h(t)));return function(t,a){for(var i="",u=t||{},l=(a||{}).pretty?o:encodeURIComponent,c=0;c<e.length;c++){var s=e[c];if("string"!=typeof s){var h,f=u[s.name];if(null==f){if(s.optional){s.partial&&(i+=s.prefix);continue}throw new TypeError('Expected "'+s.name+'" to be defined')}if(r(f)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var d=0;d<f.length;d++){if(h=l(f[d]),!n[c].test(h))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but received `'+JSON.stringify(h)+"`");i+=(0===d?s.prefix:s.delimiter)+h}}else{if(h=s.asterisk?encodeURI(f).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(f),!n[c].test(h))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but received "'+h+'"');i+=s.prefix+h}}else i+=s}return i}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function s(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function f(e,t,n){r(t)||(n=t||n,t=[]);for(var a=(n=n||{}).strict,i=!1!==n.end,o="",u=0;u<e.length;u++){var c=e[u];if("string"==typeof c)o+=l(c);else{var f=l(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+f+d+")*"),o+=d=c.optional?c.partial?f+"("+d+")?":"(?:"+f+"("+d+"))?":f+"("+d+")"}}var m=l(n.delimiter||"/"),p=o.slice(-m.length)===m;return a||(o=(p?o.slice(0,-m.length):o)+"(?:"+m+"(?=$))?"),o+=i?"$":a&&p?"":"(?="+m+"|$)",s(new RegExp("^"+o,h(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return s(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],a=0;a<e.length;a++)r.push(d(e[a],t,n).source);return s(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return f(i(e,n),t,n)}(e,t,n)}},148:function(e,t,n){"use strict";e.exports=n(238)},159:function(e,t,n){"use strict";var r=n(148),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function l(e){return r.isMemo(e)?o:u[e.$$typeof]||a}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,s=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(m){var a=d(n);a&&a!==m&&e(t,a,r)}var o=s(n);h&&(o=o.concat(h(n)));for(var u=l(t),p=l(n),y=0;y<o.length;++y){var v=o[y];if(!(i[v]||r&&r[v]||p&&p[v]||u&&u[v])){var g=f(n,v);try{c(t,v,g)}catch(e){}}}}return t}},19:function(e,t,n){"use strict";const r={name:"百度翻译",value:"BaiDuWeb",icon:browser.runtime.getURL("baidu.ico")},a={name:"有道翻译",value:"YouDaoWeb",icon:browser.runtime.getURL("youdao.ico")},i={name:"谷歌翻译",value:"GoogleWeb",icon:browser.runtime.getURL("google.ico")};t.a=[i,r,a]},20:function(e,t,n){"use strict";var r=n(41),a=n(40),i=n(18);t.a=function(e){return Object(i.a)(e)?Object(r.a)(e):Object(a.a)(e)}},21:function(e,t,n){"use strict";function r(e){return`${e.host}${e.path}`}function a(e){const t=e.match(/^([^:]+):\/\/([^/]+)?(\/.*)?$/);if(!t)return;let n=t[2]||"";const r=n.indexOf(":");r>=0&&(n=n.slice(0,r));let a=t[3]||"";const i=a.indexOf("#");if(i>=0&&(a=a.slice(0,i)),!n.startsWith(".")){if(!a){if(!n)return;a="/"}return{host:n,path:a}}}function i(e,t){return new RegExp("^"+e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace("*",".*").replace(/^\.\*\\\./,"(.*\\.)?")+"$").test(t)}function o(e,t){return new RegExp("^"+e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".*")+"$").test(t)}function u(e,t){let n;if(n="string"==typeof t?a(t):t,n)return{isHostMatch:{ruleHost:e.host,urlHost:n.host,matches:i(e.host,n.host)},isPathMatch:{rulePath:e.path,urlPath:n.path,matches:o(e.path,n.path)}}}function l(e,t,n){let r,u;r="string"==typeof e?a(e):e;let l=!1,c=!1;if(r){const e=e=>{const t=function(e,t){let n;if(n="string"==typeof t?a(t):t,n)return i(e.host,n.host)&&o(e.path,n.path)}(e,r);return t&&(u=e),t};l=n.some(e),l||(c=t.some(e))}return{urlParts:r,matchedRule:u,whiteListMatched:l,blackListMatched:c}}function c(e,t,n){const r=l(e,t,n);return!r.urlParts||r.whiteListMatched||!r.blackListMatched}n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c}))},22:function(e,t,n){"use strict";var r=n(98);class a extends r.a{constructor(){super("hcfy"),this.version(2).stores({historyRecords:"id,date",favorites:"id,date,text"}),this.historyRecords=this.table("historyRecords"),this.favorites=this.table("favorites")}}t.a=new a},236:function(e,t,n){e.exports=n(245)},237:function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},238:function(e,t,n){"use strict";var r="function"==typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,u=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,s=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,m=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,y=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,w=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119;function x(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case h:case f:case o:case l:case u:case m:return e;default:switch(e=e&&e.$$typeof){case s:case d:case v:case y:case c:return e;default:return t}}case i:return t}}}function k(e){return x(e)===f}t.AsyncMode=h,t.ConcurrentMode=f,t.ContextConsumer=s,t.ContextProvider=c,t.Element=a,t.ForwardRef=d,t.Fragment=o,t.Lazy=v,t.Memo=y,t.Portal=i,t.Profiler=l,t.StrictMode=u,t.Suspense=m,t.isAsyncMode=function(e){return k(e)||x(e)===h},t.isConcurrentMode=k,t.isContextConsumer=function(e){return x(e)===s},t.isContextProvider=function(e){return x(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return x(e)===d},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===v},t.isMemo=function(e){return x(e)===y},t.isPortal=function(e){return x(e)===i},t.isProfiler=function(e){return x(e)===l},t.isStrictMode=function(e){return x(e)===u},t.isSuspense=function(e){return x(e)===m},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===f||e===l||e===u||e===m||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===y||e.$$typeof===c||e.$$typeof===s||e.$$typeof===d||e.$$typeof===b||e.$$typeof===w||e.$$typeof===E||e.$$typeof===g)},t.typeOf=x},239:function(e,t,n){},245:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(13),o=n.n(i),u=n(36);n(16);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e){return"/"===e.charAt(0)}function s(e,t){for(var n=t,r=n+1,a=e.length;r<a;n+=1,r+=1)e[n]=e[r];e.pop()}var h=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],a=t&&t.split("/")||[],i=e&&c(e),o=t&&c(t),u=i||o;if(e&&c(e)?a=r:r.length&&(a.pop(),a=a.concat(r)),!a.length)return"/";if(a.length){var l=a[a.length-1];n="."===l||".."===l||""===l}else n=!1;for(var h=0,f=a.length;f>=0;f--){var d=a[f];"."===d?s(a,f):".."===d?(s(a,f),h++):h&&(s(a,f),h--)}if(!u)for(;h--;h)a.unshift("..");!u||""===a[0]||a[0]&&c(a[0])||a.unshift("");var m=a.join("/");return n&&"/"!==m.substr(-1)&&(m+="/"),m};var f="Invariant failed";var d=function(e,t){if(!e)throw new Error(f)};function m(e){return"/"===e.charAt(0)?e:"/"+e}function p(e){return"/"===e.charAt(0)?e.substr(1):e}function y(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function v(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function g(e){var t=e.pathname,n=e.search,r=e.hash,a=t||"/";return n&&"?"!==n&&(a+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(a+="#"===r.charAt(0)?r:"#"+r),a}function b(e,t,n,r){var a;"string"==typeof e?(a=function(e){var t=e||"/",n="",r="",a=t.indexOf("#");-1!==a&&(r=t.substr(a),t=t.substr(0,a));var i=t.indexOf("?");return-1!==i&&(n=t.substr(i),t=t.substr(0,i)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(a=l({},e)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==t&&void 0===a.state&&(a.state=t));try{a.pathname=decodeURI(a.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(a.key=n),r?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=h(a.pathname,r.pathname)):a.pathname=r.pathname:a.pathname||(a.pathname="/"),a}function w(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,a){if(null!=e){var i="function"==typeof e?e(t,n):e;"string"==typeof i?"function"==typeof r?r(i,a):a(!0):a(!1!==i)}else a(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var E=!("undefined"==typeof window||!window.document||!window.document.createElement);function x(e,t){t(window.confirm(e))}var k="popstate",N="hashchange";function O(){try{return window.history.state||{}}catch(e){return{}}}function _(e){void 0===e&&(e={}),E||d(!1);var t,n=window.history,r=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,a=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,o=i.forceRefresh,u=void 0!==o&&o,c=i.getUserConfirmation,s=void 0===c?x:c,h=i.keyLength,f=void 0===h?6:h,p=e.basename?v(m(e.basename)):"";function _(e){var t=e||{},n=t.key,r=t.state,a=window.location,i=a.pathname+a.search+a.hash;return p&&(i=y(i,p)),b(i,r,n)}function C(){return Math.random().toString(36).substr(2,f)}var P=w();function T(e){l(q,e),q.length=n.length,P.notifyListeners(q.location,q.action)}function j(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||z(_(e.state))}function S(){z(_(O()))}var I=!1;function z(e){if(I)I=!1,T();else{P.confirmTransitionTo(e,"POP",s,(function(t){t?T({action:"POP",location:e}):function(e){var t=q.location,n=D.indexOf(t.key);-1===n&&(n=0);var r=D.indexOf(e.key);-1===r&&(r=0);var a=n-r;a&&(I=!0,M(a))}(e)}))}}var A=_(O()),D=[A.key];function R(e){return p+g(e)}function M(e){n.go(e)}var F=0;function B(e){1===(F+=e)&&1===e?(window.addEventListener(k,j),a&&window.addEventListener(N,S)):0===F&&(window.removeEventListener(k,j),a&&window.removeEventListener(N,S))}var L=!1;var q={length:n.length,action:"POP",location:A,createHref:R,push:function(e,t){var a="PUSH",i=b(e,t,C(),q.location);P.confirmTransitionTo(i,a,s,(function(e){if(e){var t=R(i),o=i.key,l=i.state;if(r)if(n.pushState({key:o,state:l},null,t),u)window.location.href=t;else{var c=D.indexOf(q.location.key),s=D.slice(0,c+1);s.push(i.key),D=s,T({action:a,location:i})}else window.location.href=t}}))},replace:function(e,t){var a="REPLACE",i=b(e,t,C(),q.location);P.confirmTransitionTo(i,a,s,(function(e){if(e){var t=R(i),o=i.key,l=i.state;if(r)if(n.replaceState({key:o,state:l},null,t),u)window.location.replace(t);else{var c=D.indexOf(q.location.key);-1!==c&&(D[c]=i.key),T({action:a,location:i})}else window.location.replace(t)}}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);var t=P.setPrompt(e);return L||(B(1),L=!0),function(){return L&&(L=!1,B(-1)),t()}},listen:function(e){var t=P.appendListener(e);return B(1),function(){B(-1),t()}}};return q}var C="hashchange",P={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+p(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:p,decodePath:m},slash:{encodePath:m,decodePath:m}};function T(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function j(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function S(e){window.location.replace(T(window.location.href)+"#"+e)}function I(e){void 0===e&&(e={}),E||d(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,a=void 0===r?x:r,i=n.hashType,o=void 0===i?"slash":i,u=e.basename?v(m(e.basename)):"",c=P[o],s=c.encodePath,h=c.decodePath;function f(){var e=h(j());return u&&(e=y(e,u)),b(e)}var p=w();function k(e){l(L,e),L.length=t.length,p.notifyListeners(L.location,L.action)}var N=!1,O=null;function _(){var e,t,n=j(),r=s(n);if(n!==r)S(r);else{var i=f(),o=L.location;if(!N&&(t=i,(e=o).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(O===g(i))return;O=null,function(e){if(N)N=!1,k();else{var t="POP";p.confirmTransitionTo(e,t,a,(function(n){n?k({action:t,location:e}):function(e){var t=L.location,n=D.lastIndexOf(g(t));-1===n&&(n=0);var r=D.lastIndexOf(g(e));-1===r&&(r=0);var a=n-r;a&&(N=!0,R(a))}(e)}))}}(i)}}var I=j(),z=s(I);I!==z&&S(z);var A=f(),D=[g(A)];function R(e){t.go(e)}var M=0;function F(e){1===(M+=e)&&1===e?window.addEventListener(C,_):0===M&&window.removeEventListener(C,_)}var B=!1;var L={length:t.length,action:"POP",location:A,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=T(window.location.href)),n+"#"+s(u+g(e))},push:function(e,t){var n="PUSH",r=b(e,void 0,void 0,L.location);p.confirmTransitionTo(r,n,a,(function(e){if(e){var t=g(r),a=s(u+t);if(j()!==a){O=t,function(e){window.location.hash=e}(a);var i=D.lastIndexOf(g(L.location)),o=D.slice(0,i+1);o.push(t),D=o,k({action:n,location:r})}else k()}}))},replace:function(e,t){var n="REPLACE",r=b(e,void 0,void 0,L.location);p.confirmTransitionTo(r,n,a,(function(e){if(e){var t=g(r),a=s(u+t);j()!==a&&(O=t,S(a));var i=D.indexOf(g(L.location));-1!==i&&(D[i]=t),k({action:n,location:r})}}))},go:R,goBack:function(){R(-1)},goForward:function(){R(1)},block:function(e){void 0===e&&(e=!1);var t=p.setPrompt(e);return B||(F(1),B=!0),function(){return B&&(B=!1,F(-1)),t()}},listen:function(e){var t=p.appendListener(e);return F(1),function(){F(-1),t()}}};return L}function z(e,t,n){return Math.min(Math.max(e,t),n)}function A(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,a=void 0===r?["/"]:r,i=t.initialIndex,o=void 0===i?0:i,u=t.keyLength,c=void 0===u?6:u,s=w();function h(e){l(v,e),v.length=v.entries.length,s.notifyListeners(v.location,v.action)}function f(){return Math.random().toString(36).substr(2,c)}var d=z(o,0,a.length-1),m=a.map((function(e){return b(e,void 0,"string"==typeof e?f():e.key||f())})),p=g;function y(e){var t=z(v.index+e,0,v.entries.length-1),r=v.entries[t];s.confirmTransitionTo(r,"POP",n,(function(e){e?h({action:"POP",location:r,index:t}):h()}))}var v={length:m.length,action:"POP",location:m[d],index:d,entries:m,createHref:p,push:function(e,t){var r="PUSH",a=b(e,t,f(),v.location);s.confirmTransitionTo(a,r,n,(function(e){if(e){var t=v.index+1,n=v.entries.slice(0);n.length>t?n.splice(t,n.length-t,a):n.push(a),h({action:r,location:a,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",a=b(e,t,f(),v.location);s.confirmTransitionTo(a,r,n,(function(e){e&&(v.entries[v.index]=a,h({action:r,location:a}))}))},go:y,goBack:function(){y(-1)},goForward:function(){y(1)},canGo:function(e){var t=v.index+e;return t>=0&&t<v.entries.length},block:function(e){return void 0===e&&(e=!1),s.setPrompt(e)},listen:function(e){return s.appendListener(e)}};return v}var D=n(133),R=n(134),M=n.n(R);n(148);function F(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}n(159);var B=function(e){var t=Object(D.a)();return t.displayName=e,t}("Router-History"),L=function(e){var t=Object(D.a)();return t.displayName=e,t}("Router"),q=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}Object(u.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return a.a.createElement(L.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},a.a.createElement(B.Provider,{children:this.props.children||null,value:this.props.history}))},t}(a.a.Component);a.a.Component;a.a.Component;var K={},U=0;function W(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,a=n.exact,i=void 0!==a&&a,o=n.strict,u=void 0!==o&&o,l=n.sensitive,c=void 0!==l&&l;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=K[n]||(K[n]={});if(r[e])return r[e];var a=[],i={regexp:M()(e,a,t),keys:a};return U<1e4&&(r[e]=i,U++),i}(n,{end:i,strict:u,sensitive:c}),a=r.regexp,o=r.keys,l=a.exec(e);if(!l)return null;var s=l[0],h=l.slice(1),f=e===s;return i&&!f?null:{path:n,url:"/"===n&&""===s?"/":s,isExact:f,params:o.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var H=function(e){function t(){return e.apply(this,arguments)||this}return Object(u.a)(t,e),t.prototype.render=function(){var e=this;return a.a.createElement(L.Consumer,null,(function(t){t||d(!1);var n=e.props.location||t.location,r=l({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?W(n.pathname,e.props):t.match}),i=e.props,o=i.children,u=i.component,c=i.render;return Array.isArray(o)&&0===o.length&&(o=null),a.a.createElement(L.Provider,{value:r},r.match?o?"function"==typeof o?o(r):o:u?a.a.createElement(u,r):c?c(r):null:"function"==typeof o?o(r):null)}))},t}(a.a.Component);function Y(e){return"/"===e.charAt(0)?e:"/"+e}function $(e,t){if(!e)return t;var n=Y(e);return 0!==t.pathname.indexOf(n)?t:l({},t,{pathname:t.pathname.substr(n.length)})}function Q(e){return"string"==typeof e?e:g(e)}function V(e){return function(){d(!1)}}function G(){}a.a.Component;var X=function(e){function t(){return e.apply(this,arguments)||this}return Object(u.a)(t,e),t.prototype.render=function(){var e=this;return a.a.createElement(L.Consumer,null,(function(t){t||d(!1);var n,r,i=e.props.location||t.location;return a.a.Children.forEach(e.props.children,(function(e){if(null==r&&a.a.isValidElement(e)){n=e;var o=e.props.path||e.props.from;r=o?W(i.pathname,l({},e.props,{path:o})):t.match}})),r?a.a.cloneElement(n,{location:i,computedMatch:r}):null}))},t}(a.a.Component);var J=a.a.useContext;function Z(){return J(L).location}a.a.Component;var ee=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).history=I(t.props),t}return Object(u.a)(t,e),t.prototype.render=function(){return a.a.createElement(q,{history:this.history,children:this.props.children})},t}(a.a.Component);var te=function(e,t){return"function"==typeof e?e(t):e},ne=function(e,t){return"string"==typeof e?b(e,null,null,t):e},re=function(e){return e},ae=a.a.forwardRef;void 0===ae&&(ae=re);var ie=ae((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=F(e,["innerRef","navigate","onClick"]),u=o.target,c=l({},o,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return c.ref=re!==ae&&t||n,a.a.createElement("a",c)}));var oe=ae((function(e,t){var n=e.component,r=void 0===n?ie:n,i=e.replace,o=e.to,u=e.innerRef,c=F(e,["component","replace","to","innerRef"]);return a.a.createElement(L.Consumer,null,(function(e){e||d(!1);var n=e.history,s=ne(te(o,e.location),e.location),h=s?n.createHref(s):"",f=l({},c,{href:h,navigate:function(){var t=te(o,e.location);(i?n.replace:n.push)(t)}});return re!==ae?f.ref=t||u:f.innerRef=u,a.a.createElement(r,f)}))})),ue=function(e){return e},le=a.a.forwardRef;void 0===le&&(le=ue);le((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,i=e.activeClassName,o=void 0===i?"active":i,u=e.activeStyle,c=e.className,s=e.exact,h=e.isActive,f=e.location,m=e.sensitive,p=e.strict,y=e.style,v=e.to,g=e.innerRef,b=F(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a.a.createElement(L.Consumer,null,(function(e){e||d(!1);var n=f||e.location,i=ne(te(v,n),n),w=i.pathname,E=w&&w.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),x=E?W(n.pathname,{path:E,exact:s,sensitive:m,strict:p}):null,k=!!(h?h(x,n):x),N=k?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(c,o):c,O=k?l({},y,{},u):y,_=l({"aria-current":k&&r||null,className:N,style:O,to:i},b);return ue!==le?_.ref=t||g:_.innerRef=g,a.a.createElement(oe,_)}))}));var ce=n(128),se=n(259),he=n(34);function fe(){return a.a.createElement(se.x,{fixedToTop:!0},a.a.createElement(se.y,{align:"left"},a.a.createElement(se.z,null,"划词翻译"," ",a.a.createElement("span",{className:"bp3-text-small"},"v",browser.runtime.getManifest().version))),a.a.createElement(se.y,{align:"right"},a.a.createElement(se.b,{minimal:!0,icon:"home",text:"官方网站",href:"https://hcfy.limingkai.cn",target:"_blank",rel:"noreferrer"}),a.a.createElement(se.b,{icon:"git-repo",text:"更新日志",minimal:!0,href:"https://hcfy.limingkai.cn/log.html",target:"_blank",rel:"noreferrer"}),a.a.createElement(se.b,{icon:"issue",minimal:!0,text:"反馈问题",href:"https://hcfy.limingkai.cn/issues.html",target:"_blank",rel:"noreferrer"})))}var de=n(10),me=n(7),pe=n(50);const ye=Object(pe.a)(me.a,["pdfAuto","notifySyncOptions"]),ve="chrome://extensions/?id="+browser.runtime.id;function ge(){browser.tabs.create({url:ve})}function be(){browser.tabs.create({url:"chrome://extensions/shortcuts"})}const we={_execute_browser_action:"此快捷键相当于点击了浏览器地址栏右侧的划词翻译图标。",panel:`这是一个全局快捷键，您可以在浏览器以外的地方按下快捷键来打开独立窗口并翻译剪切板内的文本。在修改此快捷键时，请将作用域由“在 ${window.navigator.userAgent.toLowerCase().includes("edg")?"Microsoft Edge":"Chrome"} 中”改为“全局”。`,translate:""};function Ee(){const{darkMode:e,setDarkMode:t}=Object(he.a)(),[n,i]=Object(de.a)(ye),[o,u]=Object(r.useState)([]);return Object(r.useEffect)((()=>{browser.commands.getAll().then(u)}),[]),a.a.createElement("div",null,a.a.createElement(se.m,{id:"通用"},"通用"),a.a.createElement(se.e,null,a.a.createElement(se.o,{id:"深色模式"},"深色模式"),a.a.createElement(se.l,{inline:!0},a.a.createElement(se.D,{inline:!0,onChange:e=>{t(e.target.value)},selectedValue:e},a.a.createElement(se.C,{label:"开",value:"open"}),a.a.createElement(se.C,{label:"关",value:"close"}),a.a.createElement(se.C,{label:"跟随系统",value:"system"})))),a.a.createElement(se.e,null,a.a.createElement(se.o,{id:"PDF"},"PDF"),a.a.createElement(se.d,{title:"内置 PDF 阅读器",intent:"primary"},a.a.createElement("p",null,"划词翻译内置了一个 PDF 阅读器，在这个阅读器中打开的 PDF 文件可以正常使用网页划词功能。"),a.a.createElement("p",null,"你可以使用以下几种方式打开内置的 PDF 阅读器："),a.a.createElement("ul",null,a.a.createElement("li",null,"点击浏览器地址栏右侧的划词翻译图标，在弹出来的弹窗中单击“内置 PDF 阅读器”按钮。"),a.a.createElement("li",null,"在网页中一个指向 PDF 文件的链接上单击鼠标右键，选择“在划词翻译中打开此 PDF”。"),a.a.createElement("li",null,"使用浏览器自带的 PDF 阅读器打开 PDF 文件后，鼠标右键单击页面，选择“在划词翻译中打开此 PDF”。")),a.a.createElement(se.p,null,"如何打开电脑中的 PDF 文件"),a.a.createElement("p",null,"请先在",a.a.createElement("a",{onClick:ge},"划词翻译的详细信息界面"),"勾选“允许访问文件网址”，然后可以用以下方式打开："),!1,a.a.createElement("ul",null,a.a.createElement("li",null,"如果你启用了下面的“自动打开 PDF”选项，那么只需要将 PDF 文件拖放到浏览器中即可。"),!1,a.a.createElement("li",null,"打开内置的 PDF 阅读器，然后将 PDF 文件拖放进去。"))),a.a.createElement(se.l,{helperText:"开启后，在浏览器中打开 PDF 文件时会自动跳转到划词翻译的内置 PDF 阅读器。"},a.a.createElement(se.f,{label:"自动打开 PDF",checked:n?n.pdfAuto:ye.pdfAuto,onChange:e=>{i({pdfAuto:e.target.checked})}}))),a.a.createElement(se.e,null,a.a.createElement(se.o,{id:"快捷键"},"快捷键"),a.a.createElement("p",{className:"bp3-text-muted"},a.a.createElement(a.a.Fragment,null,"请前往",a.a.createElement("a",{onClick:be},"键盘快捷键页面"),"修改这些快捷键。"),!1),o.map((e=>a.a.createElement(se.l,{key:e.name,label:e.description||"激活该扩展程序",inline:!0,helperText:we[e.name]},a.a.createElement("input",{type:"text",className:"bp3-input",value:e.shortcut,disabled:!0}))))))}var xe=n(100),ke=n.n(xe);function Ne(){const[e,t]=Object(r.useState)(!1);return a.a.createElement(a.a.Fragment,null,a.a.createElement("a",{onClick:()=>{t(!0)}},"查看范例"),a.a.createElement(se.j,{isOpen:e,onClose:()=>{t(!1)},title:"范例",className:"example-dialog"},a.a.createElement("div",{className:"bp3-dialog-body"},a.a.createElement(se.r,{bordered:!0,condensed:!0,striped:!0},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"规则"),a.a.createElement("th",null,"匹配的网址"),a.a.createElement("th",null,"不匹配的网址"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("p",null,"*/*"),a.a.createElement("p",null,"匹配任意网址。")),a.a.createElement("td",null,a.a.createElement("p",null,"limingkai.cn"),a.a.createElement("p",null,"hcfy.limingkai.cn"),a.a.createElement("p",null,"baidu.com/search"),a.a.createElement("p",null,"jd.com/item.html")),a.a.createElement("td",null,a.a.createElement("p",null,"没有不匹配的网址"))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("p",null,"*.limingkai.cn/*"),a.a.createElement("p",null,"匹配 ",a.a.createElement(se.g,null,"limingkai.cn")," 或者所有域名以"," ",a.a.createElement(se.g,null,".limingkai.cn")," 结尾的网址，网址可以有任意路径。")),a.a.createElement("td",null,a.a.createElement("p",null,"limingkai.cn"),a.a.createElement("p",null,"hcfy.limingkai.cn"),a.a.createElement("p",null,"hcfy.limingkai.cn/path"),a.a.createElement("p",null,"aaa.hcfy.limingkai.cn")),a.a.createElement("td",null,a.a.createElement("p",null,"limingkai.org ",a.a.createElement(se.H,null,"域名不匹配")),a.a.createElement("p",null,"baidu.com ",a.a.createElement(se.H,null,"域名不匹配")))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("p",null,"limingkai.cn/*"),a.a.createElement("p",null,"匹配域名是 ",a.a.createElement(se.g,null,"limingkai.cn")," 的所有网址。")),a.a.createElement("td",null,a.a.createElement("p",null,"limingkai.cn"),a.a.createElement("p",null,"limingkai.cn/path")),a.a.createElement("td",null,a.a.createElement("p",null,"hcfy.limingkai.cn ",a.a.createElement(se.H,null,"域名不匹配")))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("p",null,"limingkai.cn/"),a.a.createElement("p",null,"仅匹配 ",a.a.createElement(se.g,null,"limingkai.cn")," 这一个网址。")),a.a.createElement("td",null,a.a.createElement("p",null,"limingkai.cn")),a.a.createElement("td",null,a.a.createElement("p",null,"hcfy.limingkai.cn ",a.a.createElement(se.H,null,"域名不匹配")),a.a.createElement("p",null,"limingkai.cn/path ",a.a.createElement(se.H,null,"路径不匹配")))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("p",null,"*/path"),a.a.createElement("p",null,"匹配任意域名的网址，但路径部分只能是 ",a.a.createElement(se.g,null,"path"),"。")),a.a.createElement("td",null,a.a.createElement("p",null,"hcfy.limingkai.cn/path"),a.a.createElement("p",null,"baidu.com/path")),a.a.createElement("td",null,a.a.createElement("p",null,"hcfy.limingkai.cn/a ",a.a.createElement(se.H,null,"路径不匹配")))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("p",null,"*/path/"),a.a.createElement("p",null,"匹配任意域名，但路径部分只能是 ",a.a.createElement(se.g,null,"path/"),"。跟上个例子相比，路径末尾多了一个 ",a.a.createElement(se.g,null,"/"),"。")),a.a.createElement("td",null,a.a.createElement("p",null,"hcfy.limingkai.cn/path/"),a.a.createElement("p",null,"baidu.com/path/")),a.a.createElement("td",null,a.a.createElement("p",null,"hcfy.limingkai.cn/path ",a.a.createElement(se.H,null,"路径不匹配")),a.a.createElement("p",null,"hcfy.limingkai.cn/path/a ",a.a.createElement(se.H,null,"路径不匹配")))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("p",null,"hcfy.limingkai.cn/*path*"),a.a.createElement("p",null,"匹配 ",a.a.createElement(se.g,null,"hcfy.limingkai.cn")," 域名且路径中包含"," ",a.a.createElement(se.g,null,"path")," 的网址。")),a.a.createElement("td",null,a.a.createElement("p",null,"hcfy.limingkai.cn/path"),a.a.createElement("p",null,"hcfy.limingkai.cn/abcpath"),a.a.createElement("p",null,"hcfy.limingkai.cn/abc/path"),a.a.createElement("p",null,"hcfy.limingkai.cn/abc/pathdef"),a.a.createElement("p",null,"hcfy.limingkai.cn/abc/path/def")),a.a.createElement("td",null,a.a.createElement("p",null,"hcfy.limingkai.cn/paXth ",a.a.createElement(se.H,null,"路径不匹配")),a.a.createElement("p",null,"hcfy.limingkai.cn/pa/th ",a.a.createElement(se.H,null,"路径不匹配")))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("p",null,"limingkai.cn/*/path/*/"),a.a.createElement("p",null,"匹配 ",a.a.createElement(se.g,null,"limingkai.cn")," 域名且路径中包含"," ",a.a.createElement(se.g,null,"path"),"、",a.a.createElement(se.g,null,"path")," 左右有路径片段且以"," ",a.a.createElement(se.g,null,"/")," 结尾的网址。")),a.a.createElement("td",null,a.a.createElement("p",null,"limingkai.cn/a/path/b/"),a.a.createElement("p",null,"limingkai.cn/a/b/path/c/d/")),a.a.createElement("td",null,a.a.createElement("p",null,"limingkai.cn/path/"," ",a.a.createElement(se.H,null,a.a.createElement(se.g,null,"path")," 左右两边没有路径片段")),a.a.createElement("p",null,"limingkai.cn/a/path/"," ",a.a.createElement(se.H,null,a.a.createElement(se.g,null,"path")," 右边没有路径片段")),a.a.createElement("p",null,"limingkai.cn/path/b/"," ",a.a.createElement(se.H,null,a.a.createElement(se.g,null,"path")," 左边没有路径片段")))))))))}var Oe=n(21);const _e={host:"",path:"/*"};function Ce(e,t){switch(t.type){case"reset":return _e;case"merge":return{...e,...t.data};default:throw new TypeError("不支持的 action type: "+JSON.stringify(t))}}function Pe(e){const{isOpen:t,setIsOpen:n,onSave:i,isExists:o,name:u}=e,[l,c]=Object(r.useState)(!1),s=Object(r.useRef)(null),h=()=>{n(!1),d({type:"reset"}),v("")},[f,d]=Object(r.useReducer)(Ce,_e),m=function(e){const t=e.host;return!!t&&("*"===t||!t.includes("*")||/^\*\.[^*]+$/.test(t))}(f),p=e=>{var t;const n=null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text");if(n){const t=Object(Oe.a)(n);t&&(e.preventDefault(),d({type:"merge",data:t}))}},[y,v]=Object(r.useState)(""),g=m&&Object(Oe.d)(f,y),b=void 0!==g,w=g&&g.isHostMatch.matches&&g.isPathMatch.matches;return a.a.createElement(se.j,{canEscapeKeyClose:!1,canOutsideClickClose:!1,isOpen:t,onClose:h,onOpening:()=>{var e;null===(e=s.current)||void 0===e||e.focus()},title:"新增"+u+"规则",className:"edit-rule-dialog"},a.a.createElement("div",{className:"bp3-dialog-body"},a.a.createElement(se.l,{label:"规则的格式"},a.a.createElement("div",{className:"bp3-form-helper-text"},"规则由“网站”和“页面”两个部分组成，在这两个部分中都可以使用通配符"," ",a.a.createElement(se.g,null,"*"),"。",a.a.createElement(se.K,null,a.a.createElement("li",null,"在“网站”中：",a.a.createElement(se.K,null,a.a.createElement("li",null,"可以有一个或 0 个通配符。如果有，则必须以通配符开头；"),a.a.createElement("li",null,"如果只填写了通配符，则表示匹配所有域名；"),a.a.createElement("li",null,"如果填写了以 ",a.a.createElement(se.g,null,"*.")," ","开头的域名，则表示匹配所有以这个域名结尾的域名；"),a.a.createElement("li",null,"你也可以不使用通配符来匹配单一的域名。"))),a.a.createElement("li",null,"在“页面”中：",a.a.createElement(se.K,null,a.a.createElement("li",null,"可以使用任意多个通配符，每个通配符表示匹配 0 个或多个任意字符；"),a.a.createElement("li",null,"页面必须以 ",a.a.createElement(se.g,null,"/")," 开头；"),a.a.createElement("li",null,"页面部分默认填写了 ",a.a.createElement(se.g,null,"/*"),"，表示匹配任意页面。")))),a.a.createElement(Ne,null))),a.a.createElement(se.p,null,"填写规则"),a.a.createElement(se.l,null,a.a.createElement(se.i,null,a.a.createElement(se.t,{placeholder:"域名",value:f.host,inputRef:s,onChange:e=>{d({type:"merge",data:{host:e.target.value.trim()}})},onPaste:p}),a.a.createElement(se.t,{placeholder:"路径",value:f.path,onChange:e=>{let t=e.target.value.trim();"/"!==t[0]&&(t="/"+t),d({type:"merge",data:{path:t}})},onPaste:p})),f.host&&!m&&a.a.createElement(se.d,{icon:null,intent:"warning"},"域名格式不正确")),a.a.createElement(se.p,null,"测试"," ",m&&a.a.createElement(se.g,{style:{fontWeight:"normal"}},Object(Oe.e)(f))),a.a.createElement(se.l,null,a.a.createElement(se.t,{value:y,onChange:e=>{v(e.target.value.trim())},placeholder:"你可以填写一个网址来测试是否跟规则匹配"}),y&&!b&&a.a.createElement(se.d,{icon:null,intent:"warning"},"网址格式不正确"),g&&b&&w&&a.a.createElement(se.d,{title:"匹配"}),g&&b&&!w&&a.a.createElement(se.d,{title:"不匹配"},g.isHostMatch.matches||a.a.createElement("p",null,"网址的域名 ",a.a.createElement(se.g,null,g.isHostMatch.urlHost)," ","不匹配规则 ",a.a.createElement(se.g,null,g.isHostMatch.ruleHost)),g.isPathMatch.matches||a.a.createElement("p",null,"网址的路径 ",a.a.createElement(se.g,null,g.isPathMatch.urlPath)," ","不匹配规则 ",a.a.createElement(se.g,null,g.isPathMatch.rulePath))))),a.a.createElement("div",{className:"bp3-dialog-footer"},a.a.createElement("div",{className:"bp3-dialog-footer-actions"},a.a.createElement(se.c,{onClick:h},"取消"),a.a.createElement(se.c,{intent:"primary",onClick:()=>{var e;m?o(f)?c(!0):(i(f),h()):null===(e=s.current)||void 0===e||e.focus()}},"保存"),a.a.createElement(se.a,{confirmButtonText:"我知道了",isOpen:l,onConfirm:()=>{c(!1)}},"规则 ",a.a.createElement(se.g,null,Object(Oe.e)(f))," 已经有了，无需重复添加。"))))}function Te(e){const{rules:t,setRules:n,name:i}=e,[o,u]=Object(r.useState)(!1),l=Object(r.useRef)();const[c,s]=Object(r.useState)(!1),h=()=>{s(!1),l.current=void 0};return a.a.createElement("div",{className:"domain-rules"},a.a.createElement("div",{className:"header"},a.a.createElement(se.q,null,i),a.a.createElement(se.c,{icon:"add",onClick:()=>{u(!0)},minimal:!0})),a.a.createElement("div",{className:"table-box"},a.a.createElement(se.r,{bordered:!0,striped:!0,condensed:!0},a.a.createElement("tbody",null,t.length?t.map((e=>{const t=Object(Oe.e)(e);return a.a.createElement("tr",{key:t},a.a.createElement("td",null,t),a.a.createElement("td",null,a.a.createElement(se.c,{minimal:!0,icon:"delete",onClick:()=>function(e){l.current=e,s(!0)}(e)})))})):a.a.createElement("tr",null,a.a.createElement("td",{colSpan:2},a.a.createElement(se.A,{title:"没有规则",description:"黑名单"===i?a.a.createElement(a.a.Fragment,null,"命中黑名单的网址会禁用网页划词"):a.a.createElement(a.a.Fragment,null,"命中白名单的网址会始终启用网页划词"),action:a.a.createElement(se.c,{onClick:()=>{u(!0)},intent:"primary"},"添加一条规则")})))))),a.a.createElement(se.a,{icon:"trash",intent:"danger",isOpen:c,confirmButtonText:"确定",cancelButtonText:"取消",onConfirm:()=>{if(l.current){const e=t.indexOf(l.current);if(e>=0){const r=[...t];r.splice(e,1),n(r)}}h()},onCancel:h},"确定要从",i,"中删除"," ",a.a.createElement(se.g,null,l.current?Object(Oe.e)(l.current):"这条规则")," ","吗？"),a.a.createElement(Pe,{isOpen:o,setIsOpen:u,onSave:e=>{const r=[...t];r.push(e),n(r)},isExists:e=>t.some((t=>ke()(t,e))),name:i}))}var je=n(87),Se=n(8);const Ie=Object(pe.a)(me.a,["button","modifierKey","domainBlackList","domainWhiteList","textList","placement","pin","pinPos"]),ze=je.a?"⌘":"Ctrl",Ae={host:"*",path:"/*"},De=[{label:"上",value:"top"},{label:"上左",value:"top-end"},{label:"上右",value:"top-start"},{label:"下",value:"bottom"},{label:"下左",value:"bottom-end"},{label:"下右",value:"bottom-start"},{label:"左",value:"left"},{label:"左上",value:"left-end"},{label:"左下",value:"left-start"},{label:"右",value:"right"},{label:"右上",value:"right-end"},{label:"右下",value:"right-start"}];function Re(){const[e,t]=Object(r.useState)(!1),[n,i]=Object(de.a)(Ie),o=null==n?void 0:n.domainBlackList,u=null==n?void 0:n.domainWhiteList,l=Object(r.useMemo)((()=>!!o&&o.some((e=>e.host===Ae.host&&e.path===Ae.path))),[o]),[c,s]=Object(r.useState)(""),h=Object(r.useMemo)((()=>Object(Oe.a)(c)),[c]),{matchedRule:f,whiteListMatched:d,blackListMatched:m}=Object(r.useMemo)((()=>h&&o&&u?Object(Oe.b)(h,o,u):{matchedRule:void 0,whiteListMatched:void 0,blackListMatched:void 0}),[o,u,h]),p=!!n;return Object(r.useEffect)((()=>{if(p){const e=decodeURI(window.location.hash.slice(1));e&&(window.location.hash="",window.location.hash=e)}}),[p]),n?a.a.createElement("div",{id:"selection"},a.a.createElement(se.m,{id:"网页划词"},"网页划词"),a.a.createElement(se.e,null,a.a.createElement(se.o,{id:"使用方式"},"使用方式"),a.a.createElement(se.d,{intent:"primary",title:"划词翻译支持的使用方式"},a.a.createElement("p",null,"划词翻译默认启用了“网页划词”，也就是用鼠标左键在网页中划选文本后，会弹出翻译按钮，点击翻译按钮后会弹出翻译结果。"),a.a.createElement("p",null,"如果你觉得这种方式对你造成了干扰，那么你可以勾选下面“网址筛选”中的“在所有网站中禁用网页划词”选项。你也可以在点击扩展图标后出现的弹窗中对特定网站或页面禁用/启用网页划词。"),a.a.createElement("p",null,"你还可以用下面几种方式获取翻译结果，即使是在禁用了网页划词的页面也能使用："),a.a.createElement(se.K,null,a.a.createElement("li",null,"使用",a.a.createElement("kbd",null,ze),"辅助键（需启用“配合辅助键使用”）：",a.a.createElement(se.K,null,a.a.createElement("li",null,"划词时按住",a.a.createElement("kbd",null,ze),"键不放，会直接弹出翻译结果。"),a.a.createElement("li",null,"划词后按一下",a.a.createElement("kbd",null,ze),"键，会直接弹出翻译结果。"))),a.a.createElement("li",null,"使用快捷键：",a.a.createElement(se.K,null,a.a.createElement("li",null,"使用“翻译网页中选中的文本”快捷键会直接弹出翻译结果。详情请查看左侧菜单中的“通用 - 快捷键 - 翻译网页中选中的文本”。"),a.a.createElement("li",null,"在任何地方（包括浏览器外部）将文本复制进剪切板，然后使用“打开独立翻译窗口”快捷键进行翻译。详情请查看左侧菜单中的“通用 - 快捷键 - 打开独立翻译窗口”。"),!1)),a.a.createElement("li",null,"使用右键菜单：",a.a.createElement(se.K,null,a.a.createElement("li",null,"划词后从右键菜单中选择“翻译选中的文本”会直接弹出翻译结果。在浏览器的内置页面中只能使用右键菜单翻译的方式。"))))),a.a.createElement(se.l,{helperText:a.a.createElement(a.a.Fragment,null,"启用：划词后，先弹出翻译按钮，点击按钮后再弹出翻译结果。",a.a.createElement("br",null),"关闭：划词后直接弹出翻译结果。")},a.a.createElement(se.f,{label:"先显示翻译按钮",checked:n.button,onChange:e=>{i({button:e.target.checked})}})),a.a.createElement(se.l,{helperText:a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"如果你希望划词后不要弹出按钮/结果、仅在使用",a.a.createElement("kbd",null,ze),"键时才弹出，那么还需要勾选下面“网址筛选”中的“在所有网站中禁用网页划词”选项。"))},a.a.createElement(se.f,{label:"配合辅助键使用",checked:n.modifierKey,onChange:e=>{i({modifierKey:e.target.checked})}})),a.a.createElement(se.l,{helperText:"弹窗会先尝试朝这个方向显示，如果空间不够，它会自动调整方向确保处于可视区域内。"},a.a.createElement(se.D,{label:"弹窗显示方向",inline:!0,onChange:e=>{i({placement:e.target.value})},selectedValue:n.placement,className:"placement-group"},De.map((e=>a.a.createElement(se.C,{value:e.value,label:e.label,key:e.value})))))),a.a.createElement(se.e,null,a.a.createElement(se.o,{id:"网址筛选"},"网址筛选"),a.a.createElement("p",{className:"bp3-text-small bp3-text-muted"},"划词翻译支持用黑 / 白名单规则控制在某些网址下是否启用网页划词。禁用了网页划词的页面在用鼠标划词后不会显示翻译按钮或翻译窗口，而且扩展图标上会有“off”字样。"),a.a.createElement(se.l,{helperText:"启用后，在所有网页中划词后都不会弹出按钮/结果，但你仍然可以用前面提到的几种方式获取翻译结果。"},a.a.createElement(se.f,{label:"在所有网站中禁用网页划词",checked:l,onChange:e=>{const t=e.target.checked;i((e=>{const n=e.domainBlackList,r=n.findIndex((e=>e.host===Ae.host&&e.path===Ae.path));t&&r>=0||!t&&r<0||(t?n.unshift(Ae):n.splice(r,1))}))}})),a.a.createElement("p",null,a.a.createElement(se.c,{onClick:()=>{t((e=>!e))}},e?"隐藏":"显示","黑 / 白名单规则")),a.a.createElement("p",{className:"bp3-text-small bp3-text-muted"},"通常情况下，你不需要手动修改黑 / 白名单规则，因为你可以在点击扩展图标后出现的弹窗中便捷的禁用 / 启用网页划词。"),a.a.createElement(se.h,{isOpen:e,keepChildrenMounted:!0},a.a.createElement("div",{className:"list"},a.a.createElement(Te,{rules:n.domainBlackList,setRules:e=>{i({domainBlackList:e})},name:"黑名单"}),a.a.createElement(Te,{rules:n.domainWhiteList,setRules:e=>{i({domainWhiteList:e})},name:"白名单"})),a.a.createElement(se.q,null,"测试黑 / 白名单"),a.a.createElement(se.l,null,a.a.createElement(se.t,{value:c,onChange:e=>{s(e.target.value.trim())},placeholder:"你可以填写一个网址来测试是否命中了黑名单或白名单"}),c&&!h&&a.a.createElement(se.d,{intent:"warning"},"网址格式不正确"),f&&a.a.createElement(se.d,null,m&&"没有命中白名单且","命中了",a.a.createElement("b",null,d?"白":"黑","名单"),"中的"," ",a.a.createElement(se.g,null,Object(Oe.e)(f))," 规则，此网址下会",a.a.createElement("b",null,d?"开启":"关闭"),"网页划词功能。"),h&&!m&&!d&&a.a.createElement(se.d,null,"既没有命中白名单，也没有命中黑名单，此网址下会开启网页划词功能。")))),a.a.createElement(se.e,null,a.a.createElement(se.o,{id:"文本筛选"},"文本筛选"),n.textList.map((e=>a.a.createElement(se.l,{key:e.name,helperText:e.description},a.a.createElement(se.f,{label:e.name,checked:e.enabled,onChange:()=>{return t=e,void i((e=>{const n=e.textList,r=Object(Se.d)(n).indexOf(t);if(r>=0){const e=n[r];e.enabled=!e.enabled}}));var t}})))))):null}var Me,Fe,Be=n(31),Le=n(19);const qe=Object(pe.a)(me.a,["width","destination","secondDestination","showTextArea","selectedAPIs","autoClipboard","autoPlay","autoCopy","recentUseLangFrom","recentUseLangTo","pin","pinPos","panelPos","sourceTransformNoBr","sourceTransformNCaml"]),Ke=!!(null===(Fe=null===(Me=null===window||void 0===window?void 0:window.chrome)||void 0===Me?void 0:Me.windows)||void 0===Fe?void 0:Fe.onBoundsChanged);function Ue(){browser.runtime.sendMessage({action:"save along panel size"}).then((e=>{e||window.confirm("请先打开独立翻译窗口，调整好独立窗口的位置和宽高后再点击此按钮保存。\n\n是否要立刻打开独立翻译窗口？")&&browser.runtime.sendMessage({action:"open panel"})}))}const We=a.a.createElement(se.H,{htmlTitle:"此选项可以直接在翻译面板的快捷设置中调整。",minimal:!0},"快捷选项");function He(){const[e,t]=Object(de.a)(qe);return a.a.createElement("div",null,a.a.createElement(se.m,{id:"翻译面板"},"翻译面板"),a.a.createElement(se.e,null,a.a.createElement(se.o,{id:"通用设置"},"通用设置"),a.a.createElement(se.l,{label:"目标语种",labelInfo:We},"优先翻译为"," ",a.a.createElement(Be.a,{lang:e?e.destination:qe.destination,setLang:e=>{t({destination:e})}}),"，若源语种也是",e?e.destination:qe.destination,"，则翻译为"," ",a.a.createElement(Be.a,{lang:e?e.secondDestination:qe.secondDestination,setLang:e=>{t({secondDestination:e})}})),a.a.createElement(se.l,{helperText:"点击扩展图标或使用全局快捷键打开独立窗口时，自动读取剪切板的内容并翻译"},a.a.createElement(se.G,{label:"自动读取剪切板",checked:e?e.autoClipboard:qe.autoClipboard,onChange:e=>{t({autoClipboard:e.target.checked})}})),a.a.createElement(se.l,{helperText:"翻译后如果第一个翻译源可以朗读，则自动朗读被翻译的文本。为避免朗读时间过长，如果被翻译的文本超过了 30 个字符则不会朗读。"},a.a.createElement(se.G,{labelElement:a.a.createElement(a.a.Fragment,null,"自动朗读 ",We),checked:e?e.autoPlay:qe.autoPlay,onChange:e=>{t({autoPlay:e.target.checked})}})),a.a.createElement(se.l,{label:"翻译源",labelInfo:We},Le.a.map((n=>a.a.createElement(se.f,{inline:!0,label:n.name,key:n.value,checked:!!e&&e.selectedAPIs.includes(n.value),onChange:e=>{const r=n.value;t((t=>{const n=t.selectedAPIs,a=n.indexOf(r);e.target.checked?a<0&&n.push(r):a>=0&&n.splice(a,1)}))}}))))),a.a.createElement(se.e,null,a.a.createElement(se.o,{id:"网页划词面板"},"网页划词面板"),a.a.createElement(se.l,{helperText:"是否要在网页划词面板中显示文本框。在独立翻译窗口和扩展图标窗口中将始终显示文本框"},a.a.createElement(se.f,{labelElement:a.a.createElement(a.a.Fragment,null,"显示文本框 ",We),checked:e?e.showTextArea:qe.showTextArea,onChange:e=>{t({showTextArea:e.target.checked})}})),a.a.createElement(se.l,{label:"面板宽度",helperText:"拖动面板的左右边缘可以调整面板的宽度"},a.a.createElement(se.t,{disabled:!0,value:e?e.width+"px":qe.width+"px"})),a.a.createElement(se.l,{helperText:"固定状态下，面板不会跟随浏览器滚动。点击面板左上角的图钉可以切换固定状态。"},"是否固定：",(e?e.pin:qe.pin)?"是":"否"),e&&e.pinPos&&a.a.createElement(se.l,{label:"面板位置",helperText:"面板距离浏览器左上角的距离。拖动面板可以改变面板的位置。"},"左边距：",e.pinPos.x,"px",a.a.createElement("br",null),"上边距：",e.pinPos.y,"px")),a.a.createElement(se.e,null,a.a.createElement(se.o,{id:"独立翻译窗口"},"独立翻译窗口"),e&&a.a.createElement(se.l,{label:"位置和宽高",helperText:a.a.createElement(a.a.Fragment,null,Ke&&"每当你对独立窗口进行调整后都会自动保存位置和宽高。",!Ke&&"请点击上方按钮保存独立窗口的位置和宽高。将浏览器升级到最新版本即可支持自动保存。",!Ke&&!1)},a.a.createElement("p",null,"上边距：",e.panelPos.top,"px 左边距：",e.panelPos.left,"px",a.a.createElement("br",null),"宽度：",e.panelPos.width,"px 高度：",e.panelPos.height,"px"),!Ke&&a.a.createElement(se.c,{onClick:Ue},"保存独立窗口的位置和宽高"))))}const Ye=[{divider:!0,text:"通用"},"深色模式","PDF","快捷键",{divider:!0,text:"网页划词"},"使用方式","网址筛选","文本筛选",{divider:!0,text:"翻译面板"},"通用设置","网页划词面板","独立翻译窗口"];function $e(){const e=J(B),t=Z(),n=Object(r.useMemo)((()=>decodeURIComponent(t.hash.slice(1))),[t.hash]);return Object(r.useEffect)((()=>{window.setTimeout((()=>{const e=document.getElementById(n);e&&(e.scrollIntoView(),document.documentElement.scrollTop-=85)}))}),[n]),a.a.createElement("div",{className:"wrapper"},a.a.createElement("div",{className:"nav"},a.a.createElement(se.e,null,a.a.createElement(se.u,null,Ye.map((t=>"string"==typeof t?a.a.createElement(se.w,{text:t,onClick:()=>{e.push("/#"+t)},active:n===t,key:t}):a.a.createElement(se.v,{title:t.text,key:t.text})))))),a.a.createElement("div",{className:"content"},a.a.createElement(Ee,null),a.a.createElement(Re,null),a.a.createElement(He,null)))}var Qe=n.p+"wechat.png";function Ve(){return a.a.createElement("div",{style:{margin:"15px"}},a.a.createElement(se.m,{id:"关于"},"关于划词翻译"),a.a.createElement("p",null,"划词翻译是一款简洁实用的翻译软件，支持桌面端的 Chrome、Edge 和 Firefox 浏览器。"),a.a.createElement("p",null,"划词翻译由我个人创建于 2013 年，并持续维护至今。",a.a.createElement("a",{target:"_blank",rel:"noreferrer",href:"https://hcfy.limingkai.cn/histroy.html"},"查看划词翻译大事记")),a.a.createElement("p",null,"你可以通过划词翻译公众号联系我，并欢迎你向我反馈问题或提出改进建议。另外，我也会在公众号内发布一些版本更新、未来开发计划等通知："),a.a.createElement("p",null,a.a.createElement("img",{src:Qe,alt:"微信搜索“划词翻译”"})),a.a.createElement("p",null,"你还可以在划词翻译官网查看其它浏览器的安装方式："),a.a.createElement("p",null,a.a.createElement(se.b,{target:"_blank",rel:"noreferrer",href:"https://hcfy.limingkai.cn"},"打开划词翻译官网")))}var Ge=n(124);function Xe(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Je(e){Xe(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function Ze(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function et(e){Xe(1,arguments);var t=Je(e),n=t.getFullYear(),r=t.getMonth(),a=new Date(0);return a.setFullYear(n,r+1,0),a.setHours(0,0,0,0),a.getDate()}function tt(e,t){Xe(2,arguments);var n=Je(e),r=Ze(t),a=n.getFullYear(),i=n.getDate(),o=new Date(0);o.setFullYear(a,r,15),o.setHours(0,0,0,0);var u=et(o);return n.setMonth(r,Math.min(i,u)),n}function nt(e,t){if(Xe(2,arguments),"object"!=typeof t||null===t)throw new RangeError("values parameter must be an object");var n=Je(e);return isNaN(n)?new Date(NaN):(null!=t.year&&n.setFullYear(t.year),null!=t.month&&(n=tt(n,t.month)),null!=t.date&&n.setDate(Ze(t.date)),null!=t.hours&&n.setHours(Ze(t.hours)),null!=t.minutes&&n.setMinutes(Ze(t.minutes)),null!=t.seconds&&n.setSeconds(Ze(t.seconds)),null!=t.milliseconds&&n.setMilliseconds(Ze(t.milliseconds)),n)}function rt(e){Xe(1,arguments);var t=Je(e);return!isNaN(t)}var at={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function it(e){return function(t){var n=t||{},r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var ot={date:it({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:it({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:it({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},ut={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function lt(e){return function(t,n){var r,a=n||{};if("formatting"===(a.context?String(a.context):"standalone")&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=a.width?String(a.width):i;r=e.formattingValues[o]||e.formattingValues[i]}else{var u=e.defaultWidth,l=a.width?String(a.width):e.defaultWidth;r=e.values[l]||e.values[u]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function ct(e){return function(t,n){var r=String(t),a=n||{},i=r.match(e.matchPattern);if(!i)return null;var o=i[0],u=r.match(e.parsePattern);if(!u)return null;var l=e.valueCallback?e.valueCallback(u[0]):u[0];return{value:l=a.valueCallback?a.valueCallback(l):l,rest:r.slice(o.length)}}}function st(e){return function(t,n){var r=String(t),a=n||{},i=a.width,o=i&&e.matchPatterns[i]||e.matchPatterns[e.defaultMatchWidth],u=r.match(o);if(!u)return null;var l,c=u[0],s=i&&e.parsePatterns[i]||e.parsePatterns[e.defaultParseWidth];return l="[object Array]"===Object.prototype.toString.call(s)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(s,(function(e){return e.test(c)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(s,(function(e){return e.test(c)})),l=e.valueCallback?e.valueCallback(l):l,{value:l=a.valueCallback?a.valueCallback(l):l,rest:r.slice(c.length)}}}var ht={code:"en-US",formatDistance:function(e,t,n){var r;return n=n||{},r="string"==typeof at[e]?at[e]:1===t?at[e].one:at[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:ot,formatRelative:function(e,t,n,r){return ut[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:lt({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:lt({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:lt({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:lt({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:lt({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:ct({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:st({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:st({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:st({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:st({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:st({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function ft(e,t){Xe(2,arguments);var n=Je(e).getTime(),r=Ze(t);return new Date(n+r)}function dt(e,t){Xe(2,arguments);var n=Ze(t);return ft(e,-n)}function mt(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var pt={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return mt("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):mt(n+1,2)},d:function(e,t){return mt(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":case"aaa":return n.toUpperCase();case"aaaaa":return n[0];case"aaaa":default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return mt(e.getUTCHours()%12||12,t.length)},H:function(e,t){return mt(e.getUTCHours(),t.length)},m:function(e,t){return mt(e.getUTCMinutes(),t.length)},s:function(e,t){return mt(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=e.getUTCMilliseconds();return mt(Math.floor(r*Math.pow(10,n-3)),t.length)}},yt=864e5;function vt(e){Xe(1,arguments);var t=1,n=Je(e),r=n.getUTCDay(),a=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-a),n.setUTCHours(0,0,0,0),n}function gt(e){Xe(1,arguments);var t=Je(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var a=vt(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=vt(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function bt(e){Xe(1,arguments);var t=gt(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=vt(n);return r}var wt=6048e5;function Et(e,t){Xe(1,arguments);var n=t||{},r=n.locale,a=r&&r.options&&r.options.weekStartsOn,i=null==a?0:Ze(a),o=null==n.weekStartsOn?i:Ze(n.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=Je(e),l=u.getUTCDay(),c=(l<o?7:0)+l-o;return u.setUTCDate(u.getUTCDate()-c),u.setUTCHours(0,0,0,0),u}function xt(e,t){Xe(1,arguments);var n=Je(e,t),r=n.getUTCFullYear(),a=t||{},i=a.locale,o=i&&i.options&&i.options.firstWeekContainsDate,u=null==o?1:Ze(o),l=null==a.firstWeekContainsDate?u:Ze(a.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(r+1,0,l),c.setUTCHours(0,0,0,0);var s=Et(c,t),h=new Date(0);h.setUTCFullYear(r,0,l),h.setUTCHours(0,0,0,0);var f=Et(h,t);return n.getTime()>=s.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function kt(e,t){Xe(1,arguments);var n=t||{},r=n.locale,a=r&&r.options&&r.options.firstWeekContainsDate,i=null==a?1:Ze(a),o=null==n.firstWeekContainsDate?i:Ze(n.firstWeekContainsDate),u=xt(e,t),l=new Date(0);l.setUTCFullYear(u,0,o),l.setUTCHours(0,0,0,0);var c=Et(l,t);return c}var Nt=6048e5;var Ot="midnight",_t="noon",Ct="morning",Pt="afternoon",Tt="evening",jt="night";function St(e,t){var n=e>0?"-":"+",r=Math.abs(e),a=Math.floor(r/60),i=r%60;if(0===i)return n+String(a);var o=t||"";return n+String(a)+o+mt(i,2)}function It(e,t){return e%60==0?(e>0?"-":"+")+mt(Math.abs(e)/60,2):zt(e,t)}function zt(e,t){var n=t||"",r=e>0?"-":"+",a=Math.abs(e);return r+mt(Math.floor(a/60),2)+n+mt(a%60,2)}var At={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return pt.y(e,t)},Y:function(e,t,n,r){var a=xt(e,r),i=a>0?a:1-a;return"YY"===t?mt(i%100,2):"Yo"===t?n.ordinalNumber(i,{unit:"year"}):mt(i,t.length)},R:function(e,t){return mt(gt(e),t.length)},u:function(e,t){return mt(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return mt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return mt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return pt.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return mt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var a=function(e,t){Xe(1,arguments);var n=Je(e),r=Et(n,t).getTime()-kt(n,t).getTime();return Math.round(r/Nt)+1}(e,r);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):mt(a,t.length)},I:function(e,t,n){var r=function(e){Xe(1,arguments);var t=Je(e),n=vt(t).getTime()-bt(t).getTime();return Math.round(n/wt)+1}(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):mt(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):pt.d(e,t)},D:function(e,t,n){var r=function(e){Xe(1,arguments);var t=Je(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),a=n-r;return Math.floor(a/yt)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):mt(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return mt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var a=e.getUTCDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return mt(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return mt(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,a=e.getUTCHours();switch(r=12===a?_t:0===a?Ot:a/12>=1?"pm":"am",t){case"b":case"bb":case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,a=e.getUTCHours();switch(r=a>=17?Tt:a>=12?Pt:a>=4?Ct:jt,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return pt.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):pt.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):mt(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):mt(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):pt.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):pt.s(e,t)},S:function(e,t){return pt.S(e,t)},X:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return It(a);case"XXXX":case"XX":return zt(a);case"XXXXX":case"XXX":default:return zt(a,":")}},x:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return It(a);case"xxxx":case"xx":return zt(a);case"xxxxx":case"xxx":default:return zt(a,":")}},O:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+St(a,":");case"OOOO":default:return"GMT"+zt(a,":")}},z:function(e,t,n,r){var a=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+St(a,":");case"zzzz":default:return"GMT"+zt(a,":")}},t:function(e,t,n,r){var a=r._originalDate||e;return mt(Math.floor(a.getTime()/1e3),t.length)},T:function(e,t,n,r){return mt((r._originalDate||e).getTime(),t.length)}};function Dt(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function Rt(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}var Mt={p:Rt,P:function(e,t){var n,r=e.match(/(P+)(p+)?/),a=r[1],i=r[2];if(!i)return Dt(e,t);switch(a){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;case"PPPP":default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",Dt(a,t)).replace("{{time}}",Rt(i,t))}},Ft=6e4;function Bt(e){return e.getTime()%Ft}function Lt(e){var t=new Date(e.getTime()),n=Math.ceil(t.getTimezoneOffset());t.setSeconds(0,0);var r=n>0?(Ft+Bt(t))%Ft:Bt(t);return n*Ft+r}var qt=["D","DD"],Kt=["YY","YYYY"];function Ut(e){return-1!==qt.indexOf(e)}function Wt(e){return-1!==Kt.indexOf(e)}function Ht(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var Yt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,$t=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Qt=/^'([^]*?)'?$/,Vt=/''/g,Gt=/[a-zA-Z]/;function Xt(e,t,n){Xe(2,arguments);var r=String(t),a=n||{},i=a.locale||ht,o=i.options&&i.options.firstWeekContainsDate,u=null==o?1:Ze(o),l=null==a.firstWeekContainsDate?u:Ze(a.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=i.options&&i.options.weekStartsOn,s=null==c?0:Ze(c),h=null==a.weekStartsOn?s:Ze(a.weekStartsOn);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");var f=Je(e);if(!rt(f))throw new RangeError("Invalid time value");var d=Lt(f),m=dt(f,d),p={firstWeekContainsDate:l,weekStartsOn:h,locale:i,_originalDate:f},y=r.match($t).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,Mt[t])(e,i.formatLong,p):e})).join("").match(Yt).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return Jt(n);var o=At[r];if(o)return!a.useAdditionalWeekYearTokens&&Wt(n)&&Ht(n,t,e),!a.useAdditionalDayOfYearTokens&&Ut(n)&&Ht(n,t,e),o(m,n,i.localize,p);if(r.match(Gt))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("");return y}function Jt(e){return e.match(Qt)[1].replace(Vt,"'")}function Zt(e){Xe(1,arguments);var t=Je(e);return t.setHours(0,0,0,0),t}function en(e,t){Xe(2,arguments);var n=Zt(e),r=Zt(t);return n.getTime()===r.getTime()}function tn(e,t){Xe(2,arguments);var n=Je(e),r=Ze(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}function nn(e,t){Xe(2,arguments);var n=Ze(t);return tn(e,-n)}var rn={lessThanXSeconds:{one:"不到 1 秒",other:"不到 {{count}} 秒"},xSeconds:{one:"1 秒",other:"{{count}} 秒"},halfAMinute:"半分钟",lessThanXMinutes:{one:"不到 1 分钟",other:"不到 {{count}} 分钟"},xMinutes:{one:"1 分钟",other:"{{count}} 分钟"},xHours:{one:"1 小时",other:"{{count}} 小时"},aboutXHours:{one:"大约 1 小时",other:"大约 {{count}} 小时"},xDays:{one:"1 天",other:"{{count}} 天"},aboutXWeeks:{one:"大约 1 个星期",other:"大约 {{count}} 个星期"},xWeeks:{one:"1 个星期",other:"{{count}} 个星期"},aboutXMonths:{one:"大约 1 个月",other:"大约 {{count}} 个月"},xMonths:{one:"1 个月",other:"{{count}} 个月"},aboutXYears:{one:"大约 1 年",other:"大约 {{count}} 年"},xYears:{one:"1 年",other:"{{count}} 年"},overXYears:{one:"超过 1 年",other:"超过 {{count}} 年"},almostXYears:{one:"将近 1 年",other:"将近 {{count}} 年"}};var an={date:it({formats:{full:"y'年'M'月'd'日' EEEE",long:"y'年'M'月'd'日'",medium:"yyyy-MM-dd",short:"yy-MM-dd"},defaultWidth:"full"}),time:it({formats:{full:"zzzz a h:mm:ss",long:"z a h:mm:ss",medium:"a h:mm:ss",short:"a h:mm"},defaultWidth:"full"}),dateTime:it({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})};function on(e,t,n,r){return function(e,t,n){Xe(2,arguments);var r=Et(e,n),a=Et(t,n);return r.getTime()===a.getTime()}(e,t,n)?r:e.getTime()>t.getTime()?"'下个'"+r:"'上个'"+r}var un={lastWeek:on,yesterday:"'昨天' p",today:"'今天' p",tomorrow:"'明天' p",nextWeek:on,other:"PP p"};var ln={code:"zh-CN",formatDistance:function(e,t,n){var r;return n=n||{},r="string"==typeof rn[e]?rn[e]:1===t?rn[e].one:rn[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?r+"内":r+"前":r},formatLong:an,formatRelative:function(e,t,n,r){var a=un[e];return"function"==typeof a?a(t,n,r,"eeee p"):a},localize:{ordinalNumber:function(e,t){var n=Number(e);switch(String((t||{}).unit)){case"date":return n.toString()+"日";case"hour":return n.toString()+"时";case"minute":return n.toString()+"分";case"second":return n.toString()+"秒";default:return"第 "+n.toString()}},era:lt({values:{narrow:["前","公元"],abbreviated:["前","公元"],wide:["公元前","公元"]},defaultWidth:"wide"}),quarter:lt({values:{narrow:["1","2","3","4"],abbreviated:["第一刻","第二刻","第三刻","第四刻"],wide:["第一刻钟","第二刻钟","第三刻钟","第四刻钟"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:lt({values:{narrow:["一","二","三","四","五","六","七","八","九","十","十一","十二"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},defaultWidth:"wide"}),day:lt({values:{narrow:["日","一","二","三","四","五","六"],short:["日","一","二","三","四","五","六"],abbreviated:["周日","周一","周二","周三","周四","周五","周六"],wide:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},defaultWidth:"wide"}),dayPeriod:lt({values:{narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},defaultWidth:"wide",formattingValues:{narrow:{am:"上",pm:"下",midnight:"凌晨",noon:"午",morning:"早",afternoon:"下午",evening:"晚",night:"夜"},abbreviated:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"},wide:{am:"上午",pm:"下午",midnight:"凌晨",noon:"中午",morning:"早晨",afternoon:"中午",evening:"晚上",night:"夜间"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:ct({matchPattern:/^(第\s*)?\d+(日|时|分|秒)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:st({matchPatterns:{narrow:/^(前)/i,abbreviated:/^(前)/i,wide:/^(公元前|公元)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^(前)/i,/^(公元)/i]},defaultParseWidth:"any"}),quarter:st({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^第[一二三四]刻/i,wide:/^第[一二三四]刻钟/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(1|一)/i,/(2|二)/i,/(3|三)/i,/(4|四)/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:st({matchPatterns:{narrow:/^(一|二|三|四|五|六|七|八|九|十[二一])/i,abbreviated:/^(一|二|三|四|五|六|七|八|九|十[二一]|\d|1[12])月/i,wide:/^(一|二|三|四|五|六|七|八|九|十[二一])月/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^一/i,/^二/i,/^三/i,/^四/i,/^五/i,/^六/i,/^七/i,/^八/i,/^九/i,/^十(?!(一|二))/i,/^十一/i,/^十二/i],any:[/^一|1/i,/^二|2/i,/^三|3/i,/^四|4/i,/^五|5/i,/^六|6/i,/^七|7/i,/^八|8/i,/^九|9/i,/^十(?!(一|二))|10/i,/^十一|11/i,/^十二|12/i]},defaultParseWidth:"any"}),day:st({matchPatterns:{narrow:/^[一二三四五六日]/i,short:/^[一二三四五六日]/i,abbreviated:/^周[一二三四五六日]/i,wide:/^星期[一二三四五六日]/i},defaultMatchWidth:"wide",parsePatterns:{any:[/日/i,/一/i,/二/i,/三/i,/四/i,/五/i,/六/i]},defaultParseWidth:"any"}),dayPeriod:st({matchPatterns:{any:/^(上午?|下午?|午夜|[中正]午|早上?|下午|晚上?|凌晨|)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^上午?/i,pm:/^下午?/i,midnight:/^午夜/i,noon:/^[中正]午/i,morning:/^早上/i,afternoon:/^下午/i,evening:/^晚上?/i,night:/^凌晨/i}},defaultParseWidth:"any"})},options:{weekStartsOn:1,firstWeekContainsDate:4}},cn=n(22);const sn=Object(pe.a)(me.a,["historyEnabled","historySyncEnabled"]),hn=Object(Se.b)(((e,t)=>{switch(t.type){case"set":return void t.cb(e);case"set latestDate":const n=Object(Ge.a)(e.rows);if(n){const t=Object(Ge.a)(n.items);if(t)return void(e.latestDate=t.date)}return void(e.latestDate=void 0);case"append data":if(e.end=t.data.length<100,!t.data.length)return;const r=e.rows[e.rows.length-1];let a,i;if(r)a=r.date,i=r.items;else{const n=t.data[0];a=nt(n.date,{hours:0,minutes:0,seconds:0,milliseconds:0}),i=[],e.rows.push({date:a,items:i})}return void t.data.forEach((t=>{!function(e,t){Xe(2,arguments);var n=Je(e),r=Je(t);return n.getTime()>r.getTime()}(a,t.date)?i.push(t):(a=nt(t.date,{hours:0,minutes:0,seconds:0,milliseconds:0}),i=[t],e.rows.push({date:a,items:i}))}));case"switch-check":const o=e.selectedRows.indexOf(t.id);return void(o>=0?e.selectedRows.splice(o,1):e.selectedRows.push(t.id))}}));function fn(e){const t=new Date(e);return rt(t)?Xt(t,"b K:mm",{locale:ln}):""}function dn(e){if(!rt(e))return"";let t="";return!function(e){return Xe(1,arguments),en(e,Date.now())}(e)?function(e){return Xe(1,arguments),en(e,nn(Date.now(),1))}(e)&&(t="昨天 - "):t="今天 - ",t+Xt(e,"yyyy 年 M 月 d 日 EEEE",{locale:ln})}function mn(e){return new URL(e).hostname}function pn(){const[e,t]=Object(de.a)(sn),n=e||sn,[i,o]=Object(r.useState)(!1),[u,l]=Object(r.useState)(!1),[c,s]=Object(r.useState)(""),[h,f]=Object(r.useReducer)(hn,{end:!0,rows:[],loading:!1,selectedRows:[],searchText:""}),d=Object(r.useCallback)((()=>{f({type:"set latestDate"})}),[]),m=()=>{var e;(e=h.selectedRows,cn.a.historyRecords.bulkDelete(e)).then((()=>{f({type:"set",cb(e){e.rows.forEach((e=>{e.items=e.items.filter((e=>!h.selectedRows.includes(e.id)))})),e.selectedRows=[]}})}))},p=()=>{cn.a.historyRecords.clear().then((()=>{f({type:"set",cb(e){e.selectedRows=[],e.end=!0,e.rows=[],e.latestDate=void 0,e.searchText=""}})}))},y=e=>{s(e),f({type:"set",cb(t){e!==t.searchText&&(t.end=!0,t.rows=[],t.searchText=e.trim(),t.latestDate=void 0)}})};return Object(r.useEffect)((()=>{if(h.end)return;const e=()=>{document.documentElement.scrollTop+window.innerHeight===document.documentElement.scrollHeight&&d()};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}),[d,h.end]),Object(r.useEffect)((()=>{let e=!1;return f({type:"set",cb(e){e.loading=!0}}),function(e,t,n){const r=t?cn.a.historyRecords.where("date").below(t).reverse():cn.a.historyRecords.orderBy("date").reverse();if(n){const e=n.toLocaleLowerCase();r.filter((t=>t.title.toLocaleLowerCase().includes(e)||t.url.toLocaleLowerCase().includes(e)||t.text.toLocaleLowerCase().includes(e)))}return r.limit(e).toArray()}(100,h.latestDate,h.searchText).then((t=>{e||(f({type:"set",cb(e){e.loading=!1}}),f({type:"append data",data:t}))})),()=>{e=!0}}),[h.searchText,h.latestDate]),a.a.createElement("div",{id:"history-records"},a.a.createElement(se.a,{cancelButtonText:"取消",confirmButtonText:"确定",intent:"danger",isOpen:i,icon:"trash",onClose:e=>{e&&m(),o(!1)}},a.a.createElement("p",null,"确定要删除这些记录吗？")),a.a.createElement(se.a,{cancelButtonText:"取消",confirmButtonText:"确定",icon:"trash",intent:"danger",isOpen:u,onClose:e=>{e&&p(),l(!1)}},a.a.createElement("p",null,"确定要清空历史记录吗？")),a.a.createElement("div",{className:"actions"},a.a.createElement("div",{className:"actions-left"},a.a.createElement(se.t,{className:"search-input",placeholder:"搜索历史记录",rightElement:c?a.a.createElement(se.c,{icon:"cross",minimal:!0,onClick:()=>{y("")}}):void 0,value:c,onChange:e=>{const t=e.target.value;y(t)}}),h.selectedRows.length?a.a.createElement(a.a.Fragment,null,a.a.createElement(se.c,{text:`删除选中的记录（${h.selectedRows.length}）`,intent:"primary",style:{marginLeft:"10px"},onClick:()=>{o(!0)}}),a.a.createElement(se.c,{text:"取消选择",style:{margin:"0 10px"},onClick:()=>{f({type:"set",cb(e){e.selectedRows=[]}})}}),a.a.createElement(se.c,{intent:"danger",text:"清空历史记录",onClick:()=>{l(!0)}})):void 0),a.a.createElement("div",{className:"actions-right"},a.a.createElement(se.f,{label:"启用历史记录",inline:!0,checked:n.historyEnabled,onChange:e=>{t({historyEnabled:e.target.checked})}}))),a.a.createElement("div",{className:"actions-bg",style:{height:"60px"}}),a.a.createElement("div",{style:{padding:"0 15px 15px 15px"}},h.rows.map((({date:e,items:t})=>a.a.createElement(se.e,{key:e.getTime()},a.a.createElement(se.n,null,dn(e)),t.map((e=>{return a.a.createElement("p",{key:e.id,className:"history-item"},a.a.createElement("span",{className:"date"},a.a.createElement(se.f,{checked:h.selectedRows.includes(e.id),labelElement:a.a.createElement("span",{className:"bp3-text-muted"},fn(e.date)),onChange:()=>{f({type:"switch-check",id:e.id})}})),a.a.createElement("span",{className:"text"},e.text),(t=e.url).startsWith("chrome-extension://")||t.startsWith("moz-extension://")?a.a.createElement("span",{className:"bp3-text-small bp3-text-muted hostname",onClick:()=>{y("划词翻译")}},e.title):a.a.createElement(a.a.Fragment,null,a.a.createElement("img",{src:e.favicon,width:"12px",height:"12px",alt:""}),a.a.createElement("a",{href:e.url,target:"_blank",rel:"noreferrer"},e.title||e.url),a.a.createElement("span",{className:"bp3-text-small bp3-text-muted hostname",onClick:()=>{const t=mn(e.url);y(t)}},mn(e.url))));var t}))))),!h.loading&&!h.end&&a.a.createElement(se.c,{onClick:d,text:"加载更多"}),h.loading&&a.a.createElement(se.F,null),!h.loading&&!h.rows.length&&a.a.createElement(se.A,{icon:"blank",title:h.searchText?"没有搜索结果":"无历史记录",description:n.historyEnabled?"":"若要记录翻译历史，请勾选上方的“启用历史记录”。"})))}var yn=n(118),vn=n(70),gn=n(45),bn=n(3),wn=n.n(bn);const En=Object(pe.a)(me.a,["favoritesEnabled","favoritesSyncEnabled"]),xn=Object(Se.b)(((e,t)=>{switch(t.type){case"set":return void t.cb(e);case"set latestDate":const n=Object(Ge.a)(e.rows);return n?void(e.latestDate=n.date):void(e.latestDate=void 0);case"append data":if(e.end=t.data.length<100,!t.data.length)return;return void e.rows.push(...t.data);case"switch-check":const r=e.selectedRows.indexOf(t.id);return void(r>=0?e.selectedRows.splice(r,1):e.selectedRows.push(t.id))}}));function kn(){const[e,t]=Object(de.a)(En),n=e||En,[i,o]=Object(r.useState)(!1),[u,l]=Object(r.useState)(!1),[c,s]=Object(r.useState)(""),[h,f]=Object(r.useReducer)(xn,{end:!0,rows:[],loading:!1,selectedRows:[],searchText:""}),d=Object(r.useCallback)((()=>{f({type:"set latestDate"})}),[]),m=e=>{s(e),f({type:"set",cb(t){e!==t.searchText&&(t.end=!0,t.rows=[],t.searchText=e.trim(),t.latestDate=void 0)}})};return Object(r.useEffect)((()=>{if(h.end)return;const e=()=>{document.documentElement.scrollTop+window.innerHeight===document.documentElement.scrollHeight&&d()};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}),[d,h.end]),Object(r.useEffect)((()=>{let e=!1;return f({type:"set",cb(e){e.loading=!0}}),Object(vn.e)(100,h.latestDate,h.searchText).then((t=>{e||(f({type:"set",cb(e){e.loading=!1}}),f({type:"append data",data:t}))}),console.error),()=>{e=!0}}),[h.searchText,h.latestDate]),a.a.createElement("div",{id:"favorites"},a.a.createElement(se.a,{cancelButtonText:"取消",confirmButtonText:"确定",intent:"danger",isOpen:i,icon:"trash",onClose:e=>{e&&Object(vn.b)(h.selectedRows).then((()=>{f({type:"set",cb(e){e.rows=e.rows.filter((e=>!h.selectedRows.includes(e.id))),e.selectedRows=[]}})})),o(!1)}},a.a.createElement("p",null,"确定要删除吗？")),a.a.createElement(se.a,{cancelButtonText:"取消",confirmButtonText:"确定",icon:"trash",intent:"danger",isOpen:u,onClose:e=>{e&&Object(vn.c)().then((()=>{f({type:"set",cb(e){e.selectedRows=[],e.end=!0,e.rows=[],e.latestDate=void 0,e.searchText=""}})})),l(!1)}},a.a.createElement("p",null,"确定要清空收藏夹吗？")),a.a.createElement("div",{className:"actions"},a.a.createElement("div",{className:"actions-left"},a.a.createElement(se.t,{className:"search-input",placeholder:"搜索收藏夹",rightElement:c?a.a.createElement(se.c,{icon:"cross",minimal:!0,onClick:()=>{m("")}}):void 0,value:c,onChange:e=>{const t=e.target.value;m(t)}}),h.selectedRows.length?a.a.createElement(a.a.Fragment,null,a.a.createElement(se.c,{text:`删除选中的收藏（${h.selectedRows.length}）`,intent:"primary",style:{marginLeft:"10px"},onClick:()=>{o(!0)}}),a.a.createElement(se.c,{style:{margin:"0 10px"},text:"取消选择",onClick:()=>{f({type:"set",cb(e){e.selectedRows=[]}})}}),a.a.createElement(se.c,{intent:"danger",text:"清空收藏夹",onClick:()=>{l(!0)}})):void 0),a.a.createElement("div",{className:"actions-right"},a.a.createElement(se.f,{label:"启用收藏功能",inline:!0,checked:n.favoritesEnabled,onChange:e=>{t({favoritesEnabled:e.target.checked})}}))),a.a.createElement("div",{className:"actions-bg",style:{height:"60px"}}),a.a.createElement("div",{className:"favorite-list"},h.rows.map((e=>a.a.createElement(se.e,{className:wn()("favorite-item",{active:h.selectedRows.includes(e.id)}),interactive:!0,key:e.id,onClick:()=>{f({type:"switch-check",id:e.id})}},a.a.createElement(se.o,null,e.text),Object.keys(e.results).map((t=>a.a.createElement(gn.a,{key:t,apiId:t,result:{loading:!1,result:{data:e.results[t]||null,error:null}},queryResult:yn.a,wordClickable:!1}))))))),!h.loading&&!h.end&&a.a.createElement(se.c,{onClick:d,text:"加载更多"}),h.loading&&a.a.createElement(se.F,null),!h.loading&&!h.rows.length&&a.a.createElement(se.A,{icon:"blank",title:h.searchText?"没有搜索结果":"无收藏",description:n.favoritesEnabled?"如果你不需要收藏功能，可以取消勾选上方的“启用收藏功能”，这样翻译面板上的收藏图标就会消失。":""}))}ce.a.onlyShowFocusOnTabs();n(239);o.a.render(a.a.createElement(ee,null,a.a.createElement((function(){Object(he.a)();const e=Z();return a.a.createElement(a.a.Fragment,null,a.a.createElement(fe,null),a.a.createElement("div",{id:"main"},a.a.createElement(se.e,{id:"left-nav"},a.a.createElement(se.u,{large:!0,style:{position:"fixed"}},a.a.createElement(oe,{to:"/"},a.a.createElement(se.w,{active:"/"===e.pathname,tagName:"span",icon:"cog",text:"设置"})),a.a.createElement(oe,{to:"/stars"},a.a.createElement(se.w,{active:"/stars"===e.pathname,tagName:"span",icon:"folder-open",text:"收藏夹"})),a.a.createElement(oe,{to:"/history"},a.a.createElement(se.w,{active:"/history"===e.pathname,tagName:"span",icon:"history",text:"历史记录"})),a.a.createElement(se.v,null),a.a.createElement(oe,{to:"/about"},a.a.createElement(se.w,{active:"/about"===e.pathname,tagName:"span",icon:"info-sign",text:"关于划词翻译"})))),a.a.createElement("div",{className:"right-content"},a.a.createElement(X,null,a.a.createElement(H,{path:"/history"},a.a.createElement(pn,null)),a.a.createElement(H,{path:"/stars"},a.a.createElement(kn,null)),a.a.createElement(H,{path:"/about"},a.a.createElement(Ve,null)),a.a.createElement(H,{path:"/"},a.a.createElement($e,null))))))}),null)),document.getElementById("app"))},26:function(e){e.exports=JSON.parse('[{"zhName":"中文(简体)","pinyin":"zhongwenjianti"},{"zhName":"印地语","pinyin":"yindiyu"},{"zhName":"印尼语","pinyin":"yinniyu"},{"zhName":"意大利语","pinyin":"yidaliyu"},{"zhName":"越南语","pinyin":"yuenanyu"},{"zhName":"英语","pinyin":"yingyu"},{"zhName":"希腊语","pinyin":"xilayu"},{"zhName":"西班牙语","pinyin":"xibanyayu"},{"zhName":"日语","pinyin":"riyu"},{"zhName":"葡萄牙语","pinyin":"putaoyayu"},{"zhName":"马来语","pinyin":"malaiyu"},{"zhName":"荷兰语","pinyin":"helanyu"},{"zhName":"韩语","pinyin":"hanyu"},{"zhName":"芬兰语","pinyin":"fenlanyu"},{"zhName":"法语","pinyin":"fayu"},{"zhName":"俄语","pinyin":"eyu"},{"zhName":"丹麦语","pinyin":"danmaiyu"},{"zhName":"德语","pinyin":"deyu"},{"zhName":"阿拉伯语","pinyin":"alaboyu"},{"zhName":"中文(繁体)","pinyin":"zhongwenfanti"},{"zhName":"意第绪语","pinyin":"yidixuyu"},{"zhName":"伊博语","pinyin":"yiboyu"},{"zhName":"约鲁巴语","pinyin":"yuelubayu"},{"zhName":"亚美尼亚语","pinyin":"yameiniyayu"},{"zhName":"夏威夷语","pinyin":"xiaweiyiyu"},{"zhName":"修纳语","pinyin":"xiunayu"},{"zhName":"信德语","pinyin":"xindeyu"},{"zhName":"宿务语","pinyin":"suwuyu"},{"zhName":"希伯来语","pinyin":"xibolaiyu"},{"zhName":"匈牙利语","pinyin":"xiongyaliyu"},{"zhName":"威尔士语","pinyin":"weiershiyu"},{"zhName":"乌兹别克语","pinyin":"wuzibiekeyu"},{"zhName":"乌尔都语","pinyin":"wuerduyu"},{"zhName":"乌克兰语","pinyin":"wukelanyu"},{"zhName":"泰卢固语","pinyin":"tailuguyu"},{"zhName":"塔吉克语","pinyin":"tajikeyu"},{"zhName":"土库曼语","pinyin":"tukumanyu"},{"zhName":"泰米尔语","pinyin":"taimieryu"},{"zhName":"土耳其语","pinyin":"tuerqiyu"},{"zhName":"泰语","pinyin":"taiyu"},{"zhName":"世界语","pinyin":"shijieyu"},{"zhName":"萨摩亚语","pinyin":"samoyayu"},{"zhName":"索马里语","pinyin":"suomaliyu"},{"zhName":"斯瓦希里语","pinyin":"siwaxiliyu"},{"zhName":"塞尔维亚语","pinyin":"saierweiyayu"},{"zhName":"僧伽罗语","pinyin":"sengqieluoyu"},{"zhName":"斯洛伐克语","pinyin":"siluofakeyu"},{"zhName":"斯洛文尼亚语","pinyin":"siluowenniyayu"},{"zhName":"瑞典语","pinyin":"ruidianyu"},{"zhName":"齐切瓦语","pinyin":"qiqiewayu"},{"zhName":"旁遮普语","pinyin":"pangzhepuyu"},{"zhName":"普什图语","pinyin":"pushituyu"},{"zhName":"南非荷兰语","pinyin":"nanfeihelanyu"},{"zhName":"尼泊尔语","pinyin":"niboeryu"},{"zhName":"挪威语","pinyin":"nuoweiyu"},{"zhName":"毛利语","pinyin":"maoliyu"},{"zhName":"马耳他语","pinyin":"maertayu"},{"zhName":"马拉雅拉姆语","pinyin":"malayalamuyu"},{"zhName":"马拉地语","pinyin":"maladiyu"},{"zhName":"马其顿语","pinyin":"maqidunyu"},{"zhName":"孟加拉语","pinyin":"mengjialayu"},{"zhName":"缅甸语","pinyin":"miandianyu"},{"zhName":"卢旺达语","pinyin":"luwangdayu"},{"zhName":"卢森堡语","pinyin":"lusenbaoyu"},{"zhName":"拉脱维亚语","pinyin":"latuoweiyayu"},{"zhName":"立陶宛语","pinyin":"litaowanyu"},{"zhName":"拉丁语","pinyin":"ladingyu"},{"zhName":"老挝语","pinyin":"laozhuayu"},{"zhName":"罗马尼亚语","pinyin":"luomaniyayu"},{"zhName":"库尔德语","pinyin":"kuerdeyu"},{"zhName":"科西嘉语","pinyin":"kexijiayu"},{"zhName":"卡纳达语","pinyin":"kanadayu"},{"zhName":"克罗地亚语","pinyin":"keluodiyayu"},{"zhName":"吉尔吉斯语","pinyin":"jierjisiyu"},{"zhName":"加利西亚语","pinyin":"jialixiyayu"},{"zhName":"加泰罗尼亚语","pinyin":"jiatailuoniyayu"},{"zhName":"捷克语","pinyin":"jiekeyu"},{"zhName":"豪萨语","pinyin":"haosayu"},{"zhName":"哈萨克语","pinyin":"hasakeyu"},{"zhName":"古吉拉特语","pinyin":"gujilateyu"},{"zhName":"格鲁吉亚语","pinyin":"gelujiyayu"},{"zhName":"高棉语","pinyin":"gaomianyu"},{"zhName":"菲律宾语","pinyin":"feilvbinyu"},{"zhName":"鞑靼语","pinyin":"dadayu"},{"zhName":"冰岛语","pinyin":"bingdaoyu"},{"zhName":"巴斯克语","pinyin":"basikeyu"},{"zhName":"波斯尼亚语","pinyin":"bosiniyayu"},{"zhName":"白俄罗斯语","pinyin":"baieluosiyu"},{"zhName":"波斯语","pinyin":"bosiyu"},{"zhName":"保加利亚语","pinyin":"baojialiyayu"},{"zhName":"波兰语","pinyin":"bolanyu"},{"zhName":"奥里亚语","pinyin":"aoliyayu"},{"zhName":"阿姆哈拉语","pinyin":"amuhalayu"},{"zhName":"爱尔兰语","pinyin":"aierlanyu"},{"zhName":"阿尔巴尼亚语","pinyin":"aerbaniyayu"},{"zhName":"阿塞拜疆语","pinyin":"asaibaijiangyu"},{"zhName":"爱沙尼亚语","pinyin":"aishaniyayu"},{"zhName":"中古法语","pinyin":"zhonggufayu"},{"zhName":"扎扎其语","pinyin":"zazaqiyu"},{"zhName":"爪哇语","pinyin":"zhaowayu"},{"zhName":"祖鲁语","pinyin":"zuluyu"},{"zhName":"中文(文言文)","pinyin":"zhongwenwenyanwen"},{"zhName":"中文(粤语)","pinyin":"zhongwenyueyu"},{"zhName":"印古什语","pinyin":"yingushiyu"},{"zhName":"因特语","pinyin":"yinteyu"},{"zhName":"伊努克提图特语","pinyin":"yinuketituteyu"},{"zhName":"伊多语","pinyin":"yiduoyu"},{"zhName":"亚齐语","pinyin":"yaqiyu"},{"zhName":"新挪威语","pinyin":"xinnuoweiyu"},{"zhName":"下索布语","pinyin":"xiasuobuyu"},{"zhName":"希利盖农语","pinyin":"xiligainongyu"},{"zhName":"西里西亚语","pinyin":"xilixiyayu"},{"zhName":"西弗里斯语","pinyin":"xifulisiyu"},{"zhName":"西非书面语","pinyin":"xifeishumianyu"},{"zhName":"叙利亚语","pinyin":"xuliyayu"},{"zhName":"瓦隆语","pinyin":"walongyu"},{"zhName":"文达语","pinyin":"wendayu"},{"zhName":"沃洛夫语","pinyin":"woluofuyu"},{"zhName":"突尼斯阿拉伯语","pinyin":"tunisialaboyu"},{"zhName":"提格利尼亚语","pinyin":"tigeliniyayu"},{"zhName":"他加禄语","pinyin":"tajialuyu"},{"zhName":"书面挪威语","pinyin":"shumiannuoweiyu"},{"zhName":"桑海语","pinyin":"sanghaiyu"},{"zhName":"掸语","pinyin":"danyu"},{"zhName":"塞尔维亚-克罗地亚语","pinyin":"saierweiyakeluodiyayu"},{"zhName":"萨丁尼亚语","pinyin":"sadingniyayu"},{"zhName":"苏格兰语","pinyin":"sugelanyu"},{"zhName":"切罗基语","pinyin":"qieluojiyu"},{"zhName":"契维语","pinyin":"qiweiyu"},{"zhName":"帕皮阿门托语","pinyin":"papiamentuoyu"},{"zhName":"那不勒斯语","pinyin":"nabulesiyu"},{"zhName":"南恩德贝莱语","pinyin":"nanendebeilaiyu"},{"zhName":"南索托语","pinyin":"nansuotuoyu"},{"zhName":"毛里求斯克里奥尔语","pinyin":"maoliqiusikeliaoeryu"},{"zhName":"曼克斯语","pinyin":"mankesiyu"},{"zhName":"马绍尔语","pinyin":"mashaoeryu"},{"zhName":"迈蒂利语","pinyin":"maidiliyu"},{"zhName":"马拉加斯语","pinyin":"malajiasiyu"},{"zhName":"逻辑语","pinyin":"luojiyu"},{"zhName":"罗姆语","pinyin":"luomuyu"},{"zhName":"卢森尼亚语","pinyin":"lusenniyayu"},{"zhName":"卢干达语","pinyin":"lugandayu"},{"zhName":"林堡语","pinyin":"linbaoyu"},{"zhName":"拉特加莱语","pinyin":"latejialaiyu"},{"zhName":"罗曼什语","pinyin":"luomanshiyu"},{"zhName":"林加拉语","pinyin":"linjialayu"},{"zhName":"克丘亚语","pinyin":"keqiuyayu"},{"zhName":"克林贡语","pinyin":"kelingongyu"},{"zhName":"克里米亚鞑靼语","pinyin":"kelimiyadadayu"},{"zhName":"克里克语","pinyin":"kelikeyu"},{"zhName":"康瓦尔语","pinyin":"kangwaeryu"},{"zhName":"卡舒比语","pinyin":"kashubiyu"},{"zhName":"卡努里语","pinyin":"kanuliyu"},{"zhName":"卡拜尔语","pinyin":"kabaieryu"},{"zhName":"克什米尔语","pinyin":"keshimieryu"},{"zhName":"孔卡尼语","pinyin":"kongkaniyu"},{"zhName":"科萨语","pinyin":"kesayu"},{"zhName":"加拿大法语","pinyin":"jianadafayu"},{"zhName":"胡帕语","pinyin":"hupayu"},{"zhName":"哈卡钦语","pinyin":"hakaqinyu"},{"zhName":"海地语","pinyin":"haidiyu"},{"zhName":"黑山语","pinyin":"heishanyu"},{"zhName":"古英语","pinyin":"guyingyu"},{"zhName":"古希腊语","pinyin":"guxilayu"},{"zhName":"高地索布语","pinyin":"gaodisuobuyu"},{"zhName":"盖尔语","pinyin":"gaieryu"},{"zhName":"格陵兰语","pinyin":"gelinglanyu"},{"zhName":"瓜拉尼语","pinyin":"gualaniyu"},{"zhName":"刚果语","pinyin":"gangguoyu"},{"zhName":"弗留利语","pinyin":"fuliuliyu"},{"zhName":"梵语","pinyin":"fanyu"},{"zhName":"法罗语","pinyin":"faluoyu"},{"zhName":"富拉尼语","pinyin":"fulaniyu"},{"zhName":"低地德语","pinyin":"didideyu"},{"zhName":"德顿语","pinyin":"dedunyu"},{"zhName":"迪维希语","pinyin":"diweixiyu"},{"zhName":"楚瓦什语","pinyin":"chuwashiyu"},{"zhName":"聪加语","pinyin":"congjiayu"},{"zhName":"布列塔尼语","pinyin":"bulietaniyu"},{"zhName":"博杰普尔语","pinyin":"bojiepueryu"},{"zhName":"俾路支语","pinyin":"biluzhiyu"},{"zhName":"比林语","pinyin":"bilinyu"},{"zhName":"本巴语","pinyin":"benbayu"},{"zhName":"北方萨米语","pinyin":"beifangsamiyu"},{"zhName":"邦板牙语","pinyin":"bangbanyayu"},{"zhName":"柏柏尔语","pinyin":"baibaieryu"},{"zhName":"巴西葡萄牙语","pinyin":"baxiputaoyayu"},{"zhName":"巴什基尔语","pinyin":"bashijieryu"},{"zhName":"比斯拉马语","pinyin":"bisilamayu"},{"zhName":"北索托语","pinyin":"beisuotuoyu"},{"zhName":"奥塞梯语","pinyin":"aosaitiyu"},{"zhName":"奥罗莫语","pinyin":"aoluomoyu"},{"zhName":"奥克语","pinyin":"aokeyu"},{"zhName":"奥杰布瓦语","pinyin":"aojiebuwayu"},{"zhName":"艾马拉语","pinyin":"aimalayu"},{"zhName":"阿斯图里亚斯语","pinyin":"asituliyasiyu"},{"zhName":"阿拉贡语","pinyin":"alagongyu"},{"zhName":"阿肯语","pinyin":"akenyu"},{"zhName":"阿尔及利亚阿拉伯语","pinyin":"aerjiliyaalaboyu"},{"zhName":"阿萨姆语","pinyin":"asamuyu"},{"zhName":"弗里西语","pinyin":"fulixiyu"},{"zhName":"海地克里奥尔语","pinyin":"haidikeliaoeryu"},{"zhName":"马尔加什语","pinyin":"maerjiashiyu"},{"zhName":"蒙古语","pinyin":"mengguyu"},{"zhName":"苗语","pinyin":"miaoyu"},{"zhName":"南非科萨语","pinyin":"nanfeikesayu"},{"zhName":"南非祖鲁语","pinyin":"nanfeizuluyu"},{"zhName":"塞索托语","pinyin":"saisuotuoyu"},{"zhName":"苏格兰盖尔语","pinyin":"sugelangaieryu"},{"zhName":"维吾尔语","pinyin":"weiwueryu"},{"zhName":"印尼巽他语","pinyin":"yinnixuntayu"},{"zhName":"印尼爪哇语","pinyin":"yinnizhaowayu"}]')},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(92);const a=[];function i(e,t,n,r="local"){return browser.storage[r].get(e).then((e=>{(n||t)(e,!0)})).then((()=>{const n=Object.keys(e);a.push({defaultOptions:e,onChange:t,area:r,keys:n})})),()=>{const n=a.findIndex((n=>n.onChange===t&&n.area===r&&n.defaultOptions===e));return n>=0&&(a.splice(n,1),!0)}}browser.storage.onChanged.addListener(((e,t)=>{a.forEach((n=>{if(n.area!==t)return;const a=function(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&t.includes(r)&&(n[r]=e[r].newValue);return n}(e,n.keys);Object(r.a)(a)||n.onChange(a)}))}))},28:function(e,t,n){"use strict";var r=n(38);t.a=function(e){return"function"==typeof e?e:r.a}},31:function(e,t,n){"use strict";n.d(t,"a",(function(){return J}));var r={};n.r(r),n.d(r,"MULTISELECT",(function(){return b})),n.d(r,"MULTISELECT_POPOVER",(function(){return w})),n.d(r,"MULTISELECT_TAG_INPUT_INPUT",(function(){return E})),n.d(r,"OMNIBAR",(function(){return x})),n.d(r,"OMNIBAR_OVERLAY",(function(){return k})),n.d(r,"SELECT",(function(){return N})),n.d(r,"SELECT_POPOVER",(function(){return O}));var a=n(0),i=n.n(a),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function u(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var l=function(){return(l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function c(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var s=n(3),h=n.n(s),f=n(75),d=n(259),m=n(25),p=n(1),y=n(6),v=n(138),g=p.a.getClassNamespace(),b=g+"-multi-select",w=b+"-popover",E=b+"-tag-input-input",x=g+"-omnibar",k=x+"-overlay",N=g+"-select",O=N+"-popover";function _(e,t,n){return void 0===e||null==t||null==n?t===n:p.c.isFunction(e)?e(t,n):t[e]===n[e]}function C(e){if(null==e)return!1;var t=Object.keys(e);return 1===t.length&&"__blueprintCreateNewItemBrand"===t[0]&&"blueprint-create-new-item"===e.__blueprintCreateNewItemBrand}function P(e){return null==e||C(e)?null:e}var T=function(e){function t(t,n){var r,i,o=e.call(this,t,n)||this;o.refHandlers={itemsParent:function(e){return o.itemsParentRef=e}},o.shouldCheckActiveItemInViewport=!1,o.expectedNextActiveItem=null,o.isEnterKeyPressed=!1,o.renderItemList=function(e){var t=o.props,n=t.initialContent,r=t.noResults,i=e.renderCreateItem(),u=function(e,t,n){if(0===e.query.length&&void 0!==n)return n;var r=e.filteredItems.map(e.renderItem).filter((function(e){return null!=e}));return r.length>0?r:t}(e,null!=i?null:r,n);if(null==u&&null==i)return null;var l=o.isCreateItemFirst();return a.createElement(d.u,{ulRef:e.itemsParentRef},l&&i,u,!l&&i)},o.renderItem=function(e,t){if(!0!==o.props.disabled){var n=o.state,r=n.activeItem,a=n.query,i=o.state.filteredItems.indexOf(e)>=0,u={active:_(o.props.itemsEqual,P(r),e),disabled:z(e,t,o.props.itemDisabled),matchesPredicate:i};return o.props.itemRenderer(e,{handleClick:function(t){return o.handleItemSelect(e,t)},index:t,modifiers:u,query:a})}return null},o.renderCreateItemMenuItem=function(){if(o.isCreateItemRendered()){var e=o.state,t=e.activeItem,n=e.query.trim(),r=C(t);return o.props.createNewItemRenderer(n,r,(function(e){o.handleItemCreate(n,e)}))}return null},o.handleItemCreate=function(e,t){var n,r,a,i,u=null===(r=(n=o.props).createNewItemFromQuery)||void 0===r?void 0:r.call(n,e);null!=u&&(null===(i=(a=o.props).onItemSelect)||void 0===i||i.call(a,u,t),o.maybeResetQuery())},o.handleItemSelect=function(e,t){var n,r;o.setActiveItem(e),null===(r=(n=o.props).onItemSelect)||void 0===r||r.call(n,e,t),o.maybeResetQuery()},o.handlePaste=function(e){for(var t,n=o.props,r=n.createNewItemFromQuery,a=n.onItemsPaste,i=[],u=[],l=0,c=e;l<c.length;l++){var s=c[l],h=S(s,o.props);if(void 0!==h)t=h,u.push(h);else if(o.canCreateItems()){var f=null==r?void 0:r(s);void 0!==f&&u.push(f)}else i.push(s)}o.setQuery(i.join(", "),!1),void 0!==t&&o.setActiveItem(t),null==a||a(u)},o.handleKeyDown=function(e){var t,n,r=e.keyCode;if(r===p.b.ARROW_UP||r===p.b.ARROW_DOWN){e.preventDefault();var a=o.getNextActiveItem(r===p.b.ARROW_UP?-1:1);null!=a&&o.setActiveItem(a)}else r===p.b.ENTER&&(o.isEnterKeyPressed=!0);null===(n=(t=o.props).onKeyDown)||void 0===n||n.call(t,e)},o.handleKeyUp=function(e){var t=o.props.onKeyUp,n=o.state.activeItem;e.keyCode===p.b.ENTER&&o.isEnterKeyPressed&&(e.preventDefault(),null==n||C(n)?o.handleItemCreate(o.state.query,e):o.handleItemSelect(n,e),o.isEnterKeyPressed=!1),null==t||t(e)},o.handleInputQueryChange=function(e){var t,n,r=null==e?"":e.target.value;o.setQuery(r),null===(n=(t=o.props).onQueryChange)||void 0===n||n.call(t,r,e)};var u=t.query,l=void 0===u?"":u,c=null===(r=t.createNewItemFromQuery)||void 0===r?void 0:r.call(t,l),s=I(l,t);return o.state={activeItem:void 0!==t.activeItem?t.activeItem:null!==(i=t.initialActiveItem)&&void 0!==i?i:A(s,t.itemDisabled),createNewItem:c,filteredItems:s,query:l},o}return u(t,e),t.ofType=function(){return t},t.prototype.render=function(){var e=this.props,t=e.className,n=e.items,r=e.renderer,a=e.itemListRenderer,i=void 0===a?this.renderItemList:a,o=this.state,u=(o.createNewItem,c(o,["createNewItem"]));return r(l(l({},u),{className:t,handleItemSelect:this.handleItemSelect,handleKeyDown:this.handleKeyDown,handleKeyUp:this.handleKeyUp,handlePaste:this.handlePaste,handleQueryChange:this.handleInputQueryChange,itemList:i(l(l({},u),{items:n,itemsParentRef:this.refHandlers.itemsParent,renderCreateItem:this.renderCreateItemMenuItem,renderItem:this.renderItem}))}))},t.prototype.componentDidUpdate=function(e){var t=this;void 0!==this.props.activeItem&&this.props.activeItem!==this.state.activeItem&&(this.shouldCheckActiveItemInViewport=!0,this.setState({activeItem:this.props.activeItem})),null!=this.props.query&&this.props.query!==e.query?this.setQuery(this.props.query,this.props.resetOnQuery,this.props):p.c.shallowCompareKeys(this.props,e,{include:["items","itemListPredicate","itemPredicate"]})||this.setQuery(this.state.query),this.shouldCheckActiveItemInViewport&&(this.requestAnimationFrame((function(){return t.scrollActiveItemIntoView()})),this.shouldCheckActiveItemInViewport=!1)},t.prototype.scrollActiveItemIntoView=function(){var e=!1!==this.props.scrollToActiveItem,t=!_(this.props.itemsEqual,P(this.expectedNextActiveItem),P(this.props.activeItem));if(this.expectedNextActiveItem=null,e||!t){var n=this.getActiveElement();if(null!=this.itemsParentRef&&null!=n){var r=n.offsetTop,a=n.offsetHeight,i=this.itemsParentRef,o=i.offsetTop,u=i.scrollTop,l=i.clientHeight,c=this.getItemsParentPadding(),s=c.paddingTop,h=r+a+c.paddingBottom-o,f=r-s-o;h>=u+l?this.itemsParentRef.scrollTop=h+a-l:f<=u&&(this.itemsParentRef.scrollTop=f-a)}}},t.prototype.setQuery=function(e,t,n){var r;void 0===t&&(t=this.props.resetOnQuery),void 0===n&&(n=this.props);var a=n.createNewItemFromQuery;this.shouldCheckActiveItemInViewport=!0,e!==this.state.query&&(null===(r=n.onQueryChange)||void 0===r||r.call(n,e));var i=e.trim(),o=I(i,n),u=null!=a&&""!==i?a(i):void 0;this.setState({createNewItem:u,filteredItems:o,query:e});var l=this.getActiveIndex(o);(t||l<0||z(P(this.state.activeItem),l,n.itemDisabled))&&(this.isCreateItemRendered()&&this.isCreateItemFirst()?this.setActiveItem({__blueprintCreateNewItemBrand:"blueprint-create-new-item"}):this.setActiveItem(A(o,n.itemDisabled)))},t.prototype.setActiveItem=function(e){var t,n,r,a;this.expectedNextActiveItem=e,void 0===this.props.activeItem&&(this.shouldCheckActiveItemInViewport=!0,this.setState({activeItem:e})),C(e)?null===(n=(t=this.props).onActiveItemChange)||void 0===n||n.call(t,null,!0):null===(a=(r=this.props).onActiveItemChange)||void 0===a||a.call(r,e,!1)},t.prototype.getActiveElement=function(){var e=this.state.activeItem;if(null!=this.itemsParentRef){if(C(e)){var t=this.isCreateItemFirst()?0:this.state.filteredItems.length;return this.itemsParentRef.children.item(t)}var n=this.getActiveIndex();return this.itemsParentRef.children.item(n)}},t.prototype.getActiveIndex=function(e){void 0===e&&(e=this.state.filteredItems);var t=this.state.activeItem;if(null==t||C(t))return-1;for(var n=0;n<e.length;++n)if(_(this.props.itemsEqual,e[n],t))return n;return-1},t.prototype.getItemsParentPadding=function(){var e=getComputedStyle(this.itemsParentRef),t=e.paddingTop;return{paddingBottom:j(e.paddingBottom),paddingTop:j(t)}},t.prototype.getNextActiveItem=function(e,t){if((void 0===t&&(t=this.getActiveIndex()),this.isCreateItemRendered())&&(0===t&&-1===e||t===this.state.filteredItems.length-1&&1===e))return{__blueprintCreateNewItemBrand:"blueprint-create-new-item"};return A(this.state.filteredItems,this.props.itemDisabled,e,t)},t.prototype.isCreateItemRendered=function(){return this.canCreateItems()&&""!==this.state.query&&!this.wouldCreatedItemMatchSomeExistingItem()},t.prototype.isCreateItemFirst=function(){return"first"===this.props.createNewItemPosition},t.prototype.canCreateItems=function(){return null!=this.props.createNewItemFromQuery&&null!=this.props.createNewItemRenderer},t.prototype.wouldCreatedItemMatchSomeExistingItem=function(){var e=this;return this.state.filteredItems.some((function(t){return _(e.props.itemsEqual,t,e.state.createNewItem)}))},t.prototype.maybeResetQuery=function(){this.props.resetOnSelect&&this.setQuery("",!0)},t.displayName=y.a+".QueryList",t.defaultProps={disabled:!1,resetOnQuery:!0},t}(n(96).a);function j(e){return null==e?0:parseInt(e.slice(0,-2),10)}function S(e,t){var n=t.items,r=t.itemPredicate;if(p.c.isFunction(r))for(var a=0;a<n.length;a++){var i=n[a];if(r(e,i,a,!0))return i}}function I(e,t){var n=t.items,r=t.itemPredicate,a=t.itemListPredicate;return p.c.isFunction(a)?a(e,n):p.c.isFunction(r)?n.filter((function(t,n){return r(e,t,n)})):n}function z(e,t,n){return null!=n&&null!=e&&(p.c.isFunction(n)?n(e,t):!!e[n])}function A(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=e.length-1),0===e.length)return null;var a,i,o,u=r,l=e.length-1;do{if(o=l,!z(e[u=(a=u+n)<(i=0)?o:a>o?i:a],u,t))return e[u]}while(u!==r&&-1!==r);return null}var D=function(e){function t(){var t,n=e.apply(this,arguments)||this;return n.state={isOpen:!1},n.TypedQueryList=T.ofType(),n.inputEl=null,n.queryList=null,n.refHandlers={input:Object(f.c)(null===(t=n.props.inputProps)||void 0===t?void 0:t.inputRef)?n.inputEl=n.props.inputProps.inputRef:function(e){var t,r;n.inputEl=e,null===(r=null===(t=n.props.inputProps)||void 0===t?void 0:t.inputRef)||void 0===r||r(e)},queryList:function(e){return n.queryList=e}},n.renderQueryList=function(e){var t=n.props,i=t.filterable,o=void 0===i||i,u=t.disabled,c=void 0!==u&&u,s=t.inputProps,f=void 0===s?{}:s,p=t.popoverProps,y=void 0===p?{}:p,v=a.createElement(d.t,l({leftIcon:"search",placeholder:"Filter...",rightElement:n.maybeRenderClearButton(e.query)},f,{inputRef:n.refHandlers.input,onChange:e.handleQueryChange,value:e.query})),g=e.handleKeyDown,b=e.handleKeyUp;return a.createElement(d.B,l({autoFocus:!1,enforceFocus:!1,isOpen:n.state.isOpen,disabled:c,position:m.a.BOTTOM_LEFT},y,{className:h()(e.className,y.className),onInteraction:n.handlePopoverInteraction,popoverClassName:h()(r.SELECT_POPOVER,y.popoverClassName),onOpening:n.handlePopoverOpening,onOpened:n.handlePopoverOpened,onClosing:n.handlePopoverClosing}),a.createElement("div",{onKeyDown:n.state.isOpen?g:n.handleTargetKeyDown,onKeyUp:n.state.isOpen?b:void 0},n.props.children),a.createElement("div",{onKeyDown:g,onKeyUp:b},o?v:void 0,e.itemList))},n.handleTargetKeyDown=function(e){e.which!==p.b.ARROW_UP&&e.which!==p.b.ARROW_DOWN||(e.preventDefault(),n.setState({isOpen:!0}))},n.handleItemSelect=function(e,t){var r,a;n.setState({isOpen:!1}),null===(a=(r=n.props).onItemSelect)||void 0===a||a.call(r,e,t)},n.handlePopoverInteraction=function(e){var t,r;n.setState({isOpen:e}),null===(r=null===(t=n.props.popoverProps)||void 0===t?void 0:t.onInteraction)||void 0===r||r.call(t,e)},n.handlePopoverOpening=function(e){var t,r;n.previousFocusedElement=document.activeElement,n.props.resetOnClose&&n.resetQuery(),null===(r=null===(t=n.props.popoverProps)||void 0===t?void 0:t.onOpening)||void 0===r||r.call(t,e)},n.handlePopoverOpened=function(e){var t,r;null!=n.queryList&&n.queryList.scrollActiveItemIntoView(),n.requestAnimationFrame((function(){var e,t=n.props.inputProps;!1!==(void 0===t?{}:t).autoFocus&&(null===(e=Object(f.a)(n.inputEl))||void 0===e||e.focus())})),null===(r=null===(t=n.props.popoverProps)||void 0===t?void 0:t.onOpened)||void 0===r||r.call(t,e)},n.handlePopoverClosing=function(e){var t,r;n.requestAnimationFrame((function(){void 0!==n.previousFocusedElement&&(n.previousFocusedElement.focus(),n.previousFocusedElement=void 0)})),null===(r=null===(t=n.props.popoverProps)||void 0===t?void 0:t.onClosing)||void 0===r||r.call(t,e)},n.resetQuery=function(){return n.queryList&&n.queryList.setQuery("",!0)},n}return u(t,e),t.ofType=function(){return t},t.prototype.render=function(){var e=this.props,t=(e.filterable,e.inputProps,e.popoverProps,c(e,["filterable","inputProps","popoverProps"]));return a.createElement(this.TypedQueryList,l({},t,{onItemSelect:this.handleItemSelect,ref:this.refHandlers.queryList,renderer:this.renderQueryList}))},t.prototype.componentDidUpdate=function(e,t){this.state.isOpen&&!t.isOpen&&null!=this.queryList&&this.queryList.scrollActiveItemIntoView()},t.prototype.maybeRenderClearButton=function(e){return e.length>0?a.createElement(d.c,{icon:"cross",minimal:!0,onClick:this.resetQuery}):void 0},t.displayName=y.a+".Select",t}(v.a),R=n(26);var M=function(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e},F=n(49),B=Object(F.a)(!0),L=n(20);var q=function(e,t){return e&&B(e,t,L.a)},K=n(18);var U=function(e,t){return function(n,r){if(null==n)return n;if(!Object(K.a)(n))return e(n,r);for(var a=n.length,i=t?a:-1,o=Object(n);(t?i--:++i<a)&&!1!==r(o[i],i,o););return n}}(q,!0),W=n(28),H=n(15);var Y=function(e,t){return(Object(H.a)(e)?M:U)(e,Object(W.a)(t))};const $="自动检测",Q=[{zhName:$,pinyin:"zidongjiance"}].concat(R),V=D.ofType(),G=(e,{handleClick:t,modifiers:n})=>n.matchesPredicate?i.a.createElement(d.w,{onClick:t,active:n.active,key:e.zhName,text:e.zhName}):null,X=(e,t,n,r)=>{const a=e.toLowerCase();return r?t.zhName===a:t.zhName.includes(a)||t.pinyin.includes(a)};function J(e){const{addAuto:t,offset:n,small:r,recentUse:o}=e,[u,l]=Object(a.useState)(t?Q:R);Object(a.useEffect)((()=>{const e=t?Q:R;if(!o||!o.length)return void l(e);const n=[...e];Y(o,(e=>{const t=n.findIndex((t=>t.zhName===e));if(t<0)return;const r=n.splice(t,1)[0];n.unshift(r)})),l(n)}),[t,o]);const c=(()=>{if(!o||!o.length)return o;const e=o.indexOf("");if(e>=0){const t=[...o];return t[e]=$,t}return o})(),[s,h]=Object(a.useState)(null);return Object(a.useEffect)((()=>{const t=e.lang||$,n=u.find((e=>e.zhName===t))||null;h(n)}),[u,e.lang]),i.a.createElement(V,{className:"lang-select",onItemSelect:t=>{e.setLang(t.zhName===$?"":t.zhName)},activeItem:s,items:u,itemListRenderer:({filteredItems:e,itemsParentRef:t,query:n,renderItem:r})=>{const a=!n&&c&&c.length?c.map(((e,t)=>{const n=Q.find((t=>t.zhName===e));if(n)return r(n,t)})).filter((e=>null!=e)):void 0,o=e.map(a?(e,t)=>{if(!(null==c?void 0:c.includes(e.zhName)))return r(e,t)}:r).filter((e=>null!=e));return i.a.createElement(d.u,{ulRef:t},a&&i.a.createElement(i.a.Fragment,null,i.a.createElement("li",{className:"bp3-menu-header"},i.a.createElement("h6",{className:"bp3-heading"},"最近使用")),a),i.a.createElement("li",{className:"bp3-menu-header"},i.a.createElement("h6",{className:"bp3-heading"},n?"搜索结果":"所有语言")),o.length?o:i.a.createElement("li",{className:"bp3-text-small",style:{paddingLeft:"8px"}},"没有搜索结果"))},itemRenderer:G,itemPredicate:X,inputProps:{placeholder:"使用拼音或中文搜索"},popoverProps:{usePortal:!1,modifiers:n?{offset:{offset:n}}:void 0}},i.a.createElement(d.c,{rightIcon:"caret-down",text:s?s.zhName:"请选择",small:null==r||r}))}},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n(10),i=n(7),o=n(50);const u=Object(o.a)(i.a,["darkMode"]);function l(e=document.body){const[t,n]=Object(a.a)(u),i=null==t?void 0:t.darkMode;return Object(r.useEffect)((()=>{if(e)switch(i){case"open":return void t(!0);case"close":return void t(!1);case"system":const e=window.matchMedia("(prefers-color-scheme: dark)");t(e.matches);const n=()=>{t(e.matches)};return e.addEventListener("change",n),()=>{e.removeEventListener("change",n)}}function t(t){null==e||e.classList[t?"add":"remove"]("bp3-dark")}}),[i,e]),{darkMode:i,setDarkMode:e=>{n({darkMode:e})}}}},36:function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,"a",(function(){return r}))},44:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(e,t){var n=this;this.container=e,this.className=t,this.isRunning=!1,this.handleKeyDown=function(e){9===e.which&&(n.reset(),n.container.addEventListener("mousedown",n.handleMouseDown))},this.handleMouseDown=function(){n.reset(),n.container.classList.add(n.className),n.container.addEventListener("keydown",n.handleKeyDown)}}return e.prototype.isActive=function(){return this.isRunning},e.prototype.start=function(){this.container.addEventListener("mousedown",this.handleMouseDown),this.isRunning=!0},e.prototype.stop=function(){this.reset(),this.isRunning=!1},e.prototype.reset=function(){this.container.classList.remove(this.className),this.container.removeEventListener("keydown",this.handleKeyDown),this.container.removeEventListener("mousedown",this.handleMouseDown)},e}()},45:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r=n(0),a=n.n(r),i=n(259),o=n(3),u=n.n(o);function l(){window.location.reload()}function c(){return a.a.createElement(i.A,{description:"划词翻译内部出现了一个错误，这可能是划词翻译自动更新了导致的，刷新网页即可恢复。",action:a.a.createElement(i.c,{small:!0,onClick:l},"刷新网页")})}const s={BaiDuWeb:"https://fanyi.baidu.com",YouDaoWeb:"http://fanyi.youdao.com",GoogleWeb:"https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=zh-CN&dj=1&ie=UTF-8&oe=UTF-8&source=icon&dt=t&dt=bd&dt=qc&dt=rm&dt=ex&dt=at&dt=ss&dt=rw&dt=ld&q=test"};function h(e){const{api:t,onRetry:n}=e,r=s[t.value];return a.a.createElement(i.A,{description:a.a.createElement(a.a.Fragment,null,"查询结果时发生了网络错误，请确认您能否正常打开"," ",a.a.createElement("a",{href:r,target:"_blank",rel:"noreferrer"},r),"。"),action:a.a.createElement(i.c,{small:!0,onClick:n},"重试")})}function f(e){return a.a.createElement(i.A,{description:"查询超时，请稍后重试。",action:a.a.createElement(i.c,{small:!0,onClick:e.onRetry},"重试")})}function d(e){return a.a.createElement(i.A,{description:`${e.api.name}不支持源语种或目标语种。`})}function m(e){return a.a.createElement(i.A,{description:"查询结果时发生了未知错误，请稍后重试。",action:a.a.createElement(i.c,{small:!0,onClick:e.onRetry},"重试")})}function p(e){const{api:t,onRetry:n}=e;return a.a.createElement(i.A,{description:"谷歌翻译"===t.name?a.a.createElement(a.a.Fragment,null,"谷歌翻译暂时不可用，请稍后再试。",a.a.createElement("a",{href:"https://hcfy.limingkai.cn/faq.html#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%B0%B7%E6%AD%8C%E7%BF%BB%E8%AF%91%E7%BB%8F%E5%B8%B8%E6%8F%90%E7%A4%BA-%E8%B0%B7%E6%AD%8C%E7%BF%BB%E8%AF%91%E6%9A%82%E6%97%B6%E4%B8%8D%E5%8F%AF%E7%94%A8%EF%BC%8C%E8%AF%B7%E7%A8%8D%E5%90%8E%E5%86%8D%E8%AF%95%E3%80%82-%EF%BC%9F",target:"_blank",rel:"noreferrer"},"为什么？")):`${t.name}出现了未知错误。`,action:a.a.createElement(i.c,{small:!0,onClick:n},"重试")})}var y=n(19),v=n(118);async function g(e){const t=await browser.runtime.sendMessage({action:"audio",url:e});(null==t?void 0:t.error)&&window.alert("播放失败，请稍后重试。")}const b=a.a.createElement(i.s,{icon:"volume-up",iconSize:12});function w(e){const t=e.uri;return a.a.createElement(i.c,{icon:b,small:!0,minimal:!0,disabled:!t,onClick:t?()=>g(t):void 0,title:t?"朗读":"不支持此语种"})}function E(e,t){const n=[];e.phonetic&&n.push(e.phonetic.map((e=>`${e.name?e.name+" ":""}/${e.value}/`))),e.dict?n.push(...e.dict.map((e=>`${e.pos?e.pos+("GoogleWeb"===t?": ":" "):""}${e.terms.join(", ")}`))):e.result&&n.push(...e.result),browser.runtime.sendMessage({action:"write to clipboard",text:n.join("\n")})}function x(e){e.stopPropagation()}const k=/\b[A-Z\sa-z]+\b/g;function N(e){const{apiId:t,result:{loading:n,result:{data:o,error:l}},queryResult:s,autoCopy:b=!1,autoPlay:N=!1,wordClickable:O=!0,setQuery:_=v.a}=e,[C,P]=Object(r.useState)("duplicate"),[T,j]=Object(r.useState)(),S=y.a.find((e=>e.value===t)),I=()=>{P("tick"),j("success"),window.setTimeout((()=>{P("duplicate"),j(void 0)}),1e3)};return Object(r.useEffect)((()=>{var e;if(o&&N&&o.text.length<30){const t=(null===(e=o.phonetic)||void 0===e?void 0:e[0].ttsURI)||o.ttsURI;t&&g(t)}}),[N,o]),Object(r.useEffect)((()=>{o&&b&&(E(o,t),I())}),[o,b,t]),a.a.createElement(i.e,{className:"result-block",onClick:x},a.a.createElement("div",{className:"legend"},a.a.createElement("div",{className:"legend-left"},a.a.createElement("span",{className:"api-ico",style:{backgroundImage:`url(${S.icon})`}}),a.a.createElement(i.q,null,S.name),a.a.createElement("span",{className:"source"},null==o?void 0:o.from),!(null==o?void 0:o.phonetic)&&a.a.createElement(w,{uri:null==o?void 0:o.ttsURI})),a.a.createElement("div",null,!l&&!n&&a.a.createElement(a.a.Fragment,null,a.a.createElement(i.c,{onClick:()=>{o&&(E(o,t),I())},icon:a.a.createElement(i.s,{icon:C,iconSize:12}),minimal:!0,small:!0,intent:T,title:"复制翻译结果"}),a.a.createElement(i.b,{disabled:!(null==o?void 0:o.link),target:"_blank",href:(null==o?void 0:o.link)||"",icon:a.a.createElement(i.s,{icon:"share",iconSize:12}),minimal:!0,small:!0,title:"查看详细结果"})))),a.a.createElement("div",{style:{display:n?"block":"none"}},a.a.createElement("p",{className:u()({"bp3-skeleton":n})},"1"),a.a.createElement("p",{className:u()({"bp3-skeleton":n}),style:{width:"150px"}},"1")),l&&a.a.createElement("div",{className:"error"},function(e,t){const{api:n,onRetry:r}=t;switch(e){case"BACKGROUND_DISCONNECTED":return a.a.createElement(c,null);case"NETWORK_ERROR":return a.a.createElement(h,{api:n,onRetry:r});case"NETWORK_TIMEOUT":return a.a.createElement(f,{onRetry:r});case"UNSUPPORTED_LANG":return a.a.createElement(d,{api:n});case"API_SERVER_ERROR":return a.a.createElement(p,{api:n,onRetry:r});default:return a.a.createElement(m,{onRetry:r})}}(l.code,{api:S,onRetry:()=>{s(t)}})),(null==o?void 0:o.phonetic)&&a.a.createElement("div",{className:"phonetic"},o.phonetic.map(((e,t)=>a.a.createElement("div",{key:t,className:"phonetic-item"},e.name&&a.a.createElement("span",null,e.name),e.value&&a.a.createElement("span",null,`/${e.value}/`),e.ttsURI&&a.a.createElement(w,{uri:e.ttsURI}))))),o&&a.a.createElement("div",{className:"common-result"},o.dict&&a.a.createElement("div",{className:"dict"},o.dict.map(((e,n)=>{const r=e.terms.join(", ");return a.a.createElement("p",{key:n},e.pos&&a.a.createElement("span",{className:"dict-pos"},e.pos,"GoogleWeb"===t?": ":""),O?function(e,t){const n=Array.from(e.matchAll(k)),r=e.split(k);return a.a.createElement(a.a.Fragment,null,r.map(((e,r)=>{const i=n[r];return a.a.createElement(a.a.Fragment,{key:r},e,i?a.a.createElement("a",{onClick:()=>t(i[0])},i[0]):"")})))}(r,_):r)}))),!o.dict&&o.result&&a.a.createElement("div",{className:"general-result"},o.result.map(((e,n)=>a.a.createElement("p",{key:n},e,a.a.createElement(w,{uri:{text:e,apiId:t,source:null==o?void 0:o.to}})))))))}},7:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));const r={button:!0,modifierKey:!0,domainBlackList:[],domainWhiteList:[],textList:[{name:"忽略中文",readonly:!0,enabled:!1,value:"[\\u4e00-\\u9fa5]",description:"如果划选的文本当中包含中文，则不弹出翻译按钮或翻译结果。"},{name:"忽略字符",readonly:!0,enabled:!0,value:"^[\\s.\\-0-9()•+]+$",description:"如果划选的文本全部都是由数字、点、括号、空格、横线、加号和圆点（即 •，多用于密码框）组成的，则不弹出翻译按钮或翻译结果。"}],placement:"bottom",pin:!1,pinPos:null,darkMode:"system",pdfAuto:!0,width:250,destination:"中文(简体)",secondDestination:"英语",showTextArea:!1,selectedAPIs:["BaiDuWeb"],autoClipboard:!0,autoPlay:!1,autoCopy:!1,recentUseLangFrom:[""],recentUseLangTo:["中文(简体)"],tipPanelSettingsClosed:!1,tipBlockedPDFClosed:!1,panelPos:{width:270,height:500,left:100,top:100},notifySyncOptions:!0,sourceTransformNoBr:!1,sourceTransformNCaml:!1,historyEnabled:!1,historySyncEnabled:!1,favoritesEnabled:!0,favoritesSyncEnabled:!1},a={user:null,optionsSyncAt:null,disabledNofiByBrowserUI:!1}},70:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return l}));var r=n(22);function a(e){return r.a.favorites.bulkDelete(e)}async function i(e){return await r.a.favorites.where("text").equalsIgnoreCase(e).count()>0}function o(e){return r.a.favorites.where("text").equalsIgnoreCase(e).delete()}function u(){return r.a.favorites.clear()}function l(e,t,n){const a=t?r.a.favorites.where("date").below(t).reverse():r.a.favorites.orderBy("date").reverse();if(n){const e=n.toLocaleLowerCase();a.filter((t=>!!t.text.toLocaleLowerCase().includes(e)||Object.keys(t.results).some((n=>{var r,a;const i=t.results[n];return!!i&&(!!(null===(r=i.dict)||void 0===r?void 0:r.some((t=>t.terms.some((t=>t.includes(e))))))||!!(null===(a=i.result)||void 0===a?void 0:a.some((t=>t.includes(e)))))}))))}return a.limit(e).toArray()}},87:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const r=window.navigator.userAgent,a=r.includes("Mac");r.includes("Edg")},96:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),a=n(0),i=n(42),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.timeoutIds=[],r.requestIds=[],r.clearTimeouts=function(){if(r.timeoutIds.length>0){for(var e=0,t=r.timeoutIds;e<t.length;e++){var n=t[e];window.clearTimeout(n)}r.timeoutIds=[]}},r.cancelAnimationFrames=function(){if(r.requestIds.length>0){for(var e=0,t=r.requestIds;e<t.length;e++){var n=t[e];window.cancelAnimationFrame(n)}r.requestIds=[]}},Object(i.e)("production")||r.validateProps(r.props),r}return Object(r.c)(t,e),t.prototype.componentDidUpdate=function(e,t,n){Object(i.e)("production")||this.validateProps(this.props)},t.prototype.componentWillUnmount=function(){this.clearTimeouts(),this.cancelAnimationFrames()},t.prototype.requestAnimationFrame=function(e){var t=window.requestAnimationFrame(e);return this.requestIds.push(t),function(){return window.cancelAnimationFrame(t)}},t.prototype.setTimeout=function(e,t){var n=window.setTimeout(e,t);return this.timeoutIds.push(n),function(){return window.clearTimeout(n)}},t.prototype.validateProps=function(e){},t}(a.Component)},98:function(e,t,n){"use strict";var r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function a(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var i=arguments[t],o=0,u=i.length;o<u;o++,a++)r[a]=i[o];return r}var i=Object.keys,o=Array.isArray,u="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function l(e,t){return"object"!=typeof t||i(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||u.Promise||(u.Promise=Promise);var c=Object.getPrototypeOf,s={}.hasOwnProperty;function h(e,t){return s.call(e,t)}function f(e,t){"function"==typeof t&&(t=t(c(e))),i(t).forEach((function(n){m(e,n,t[n])}))}var d=Object.defineProperty;function m(e,t,n,r){d(e,t,l(n&&h(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(e){return{from:function(t){return e.prototype=Object.create(t.prototype),m(e.prototype,"constructor",e),{extend:f.bind(null,e.prototype)}}}}var y=Object.getOwnPropertyDescriptor;function v(e,t){var n;return y(e,t)||(n=c(e))&&v(n,t)}var g=[].slice;function b(e,t,n){return g.call(e,t,n)}function w(e,t){return t(e)}function E(e){if(!e)throw new Error("Assertion Failed")}function x(e){u.setImmediate?setImmediate(e):setTimeout(e,0)}function k(e,t){return e.reduce((function(e,n,r){var a=t(n,r);return a&&(e[a[0]]=a[1]),e}),{})}function N(e,t){if(h(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,a=t.length;r<a;++r){var i=N(e,t[r]);n.push(i)}return n}var o=t.indexOf(".");if(-1!==o){var u=e[t.substr(0,o)];return void 0===u?void 0:N(u,t.substr(o+1))}}function O(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){E("string"!=typeof n&&"length"in n);for(var r=0,a=t.length;r<a;++r)O(e,t[r],n[r])}else{var i=t.indexOf(".");if(-1!==i){var u=t.substr(0,i),l=t.substr(i+1);if(""===l)void 0===n?o(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=n;else{var c=e[u];c||(c=e[u]={}),O(c,l,n)}}else void 0===n?o(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function _(e,t){"string"==typeof t?O(e,t,void 0):"length"in t&&[].map.call(t,(function(t){O(e,t,void 0)}))}function C(e){var t={};for(var n in e)h(e,n)&&(t[n]=e[n]);return t}var P=[].concat;function T(e){return P.apply([],e)}var j="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(T([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return u[e]})),S=j.map((function(e){return u[e]})),I=k(j,(function(e){return[e,!0]}));function z(e){if(!e||"object"!=typeof e)return e;var t;if(o(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(z(e[n]))}else if(S.indexOf(e.constructor)>=0)t=e;else for(var a in t=e.constructor?Object.create(e.constructor.prototype):{},e)h(e,a)&&(t[a]=z(e[a]));return t}var A={}.toString;function D(e){return A.call(e).slice(8,-1)}var R=function(e,t){return"Array"===t?""+e.map((function(e){return R(e,D(e))})):"ArrayBuffer"===t?""+new Uint8Array(e):"Date"===t?e.getTime():ArrayBuffer.isView(e)?""+new Uint8Array(e.buffer):e};function M(e,t,n,r){return n=n||{},r=r||"",i(e).forEach((function(a){if(h(t,a)){var i=e[a],o=t[a];if("object"==typeof i&&"object"==typeof o&&i&&o){var u=D(i),l=D(o);u===l?I[u]?R(i,u)!==R(o,l)&&(n[r+a]=t[a]):M(i,o,n,r+a+"."):n[r+a]=t[a]}else i!==o&&(n[r+a]=t[a])}else n[r+a]=void 0})),i(t).forEach((function(a){h(e,a)||(n[r+a]=t[a])})),n}var F="undefined"!=typeof Symbol&&Symbol.iterator,B=F?function(e){var t;return null!=e&&(t=e[F])&&t.apply(e)}:function(){return null},L={};function q(e){var t,n,r,a;if(1===arguments.length){if(o(e))return e.slice();if(this===L&&"string"==typeof e)return[e];if(a=B(e)){for(n=[];!(r=a.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var K="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},U="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function W(e,t){U=e,H=t}var H=function(){return!0},Y=!new Error("").stack;function $(){if(Y)try{throw new Error}catch(e){return e}return new Error}function Q(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(H).map((function(e){return"\n"+e})).join("")):""}var V=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],G=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(V),X={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function J(e,t){this._e=$(),this.name=e,this.message=t}function Z(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function ee(e,t,n,r){this._e=$(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Z(e,t)}function te(e,t){this._e=$(),this.name="BulkError",this.failures=t,this.message=Z(e,t)}p(J).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Q(this._e,2))}},toString:function(){return this.name+": "+this.message}}),p(ee).from(J),p(te).from(J);var ne=G.reduce((function(e,t){return e[t]=t+"Error",e}),{}),re=J,ae=G.reduce((function(e,t){var n=t+"Error";function r(e,r){this._e=$(),this.name=n,e?"string"==typeof e?(this.message=e+(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=X[t]||n,this.inner=null)}return p(r).from(re),e[t]=r,e}),{});ae.Syntax=SyntaxError,ae.Type=TypeError,ae.Range=RangeError;var ie=V.reduce((function(e,t){return e[t+"Error"]=ae[t],e}),{});var oe=G.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=ae[t]),e}),{});function ue(){}function le(e){return e}function ce(e,t){return null==e||e===le?t:function(n){return t(e(n))}}function se(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function he(e,t){return e===ue?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?se(r,this.onsuccess):r),a&&(this.onerror=this.onerror?se(a,this.onerror):a),void 0!==i?i:n}}function fe(e,t){return e===ue?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?se(n,this.onsuccess):n),r&&(this.onerror=this.onerror?se(r,this.onerror):r)}}function de(e,t){return e===ue?t:function(n){var r=e.apply(this,arguments);l(n,r);var a=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?se(a,this.onsuccess):a),i&&(this.onerror=this.onerror?se(i,this.onerror):i),void 0===r?void 0===o?void 0:o:l(r,o)}}function me(e,t){return e===ue?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function pe(e,t){return e===ue?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,a=arguments.length,i=new Array(a);a--;)i[a]=arguments[a];return n.then((function(){return t.apply(r,i)}))}return t.apply(this,arguments)}}oe.ModifyError=ee,oe.DexieError=J,oe.BulkError=te;var ye={},ve="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,e.__proto__,e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,t.__proto__,e]}(),ge=ve[0],be=ve[1],we=ve[2],Ee=be&&be.then,xe=ge&&ge.constructor,ke=!!we,Ne=!1,Oe=we?function(){we.then(Qe)}:u.setImmediate?setImmediate.bind(null,Qe):u.MutationObserver?function(){var e=document.createElement("div");new MutationObserver((function(){Qe(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Qe,0)},_e=function(e,t){De.push([e,t]),Pe&&(Oe(),Pe=!1)},Ce=!0,Pe=!0,Te=[],je=[],Se=null,Ie=le,ze={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:bt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(e){try{bt(e[0],e[1])}catch(e){}}))}},Ae=ze,De=[],Re=0,Me=[];function Fe(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ue,this._lib=!1;var t=this._PSD=Ae;if(U&&(this._stackHolder=$(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==ye)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ke(this,this._value))}this._state=null,this._value=null,++t.ref,qe(this,e)}var Be={get:function(){var e=Ae,t=at;function n(n,r){var a=this,i=!e.global&&(e!==Ae||t!==at),o=i&&!lt(),u=new Fe((function(t,u){We(a,new Le(yt(n,e,i,o),yt(r,e,i,o),t,u,e))}));return U&&$e(u,this),u}return n.prototype=ye,n},set:function(e){m(this,"then",e&&e.prototype===ye?Be:{get:function(){return e},set:Be.set})}};function Le(e,t,n,r,a){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=a}function qe(e,t){try{t((function(t){if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Ve();t&&"function"==typeof t.then?qe(e,(function(e,n){t instanceof Fe?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Ue(e)),n&&Ge()}}),Ke.bind(null,e))}catch(t){Ke(e,t)}}function Ke(e,t){if(je.push(t),null===e._state){var n=e._lib&&Ve();t=Ie(t),e._state=!1,e._value=t,U&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}((function(){var n=v(t,"stack");t._promise=e,m(t,"stack",{get:function(){return Ne?n&&(n.get?n.get.apply(t):n.value):e.stack}})})),function(e){Te.some((function(t){return t._value===e._value}))||Te.push(e)}(e),Ue(e),n&&Ge()}}function Ue(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)We(e,t[n]);var a=e._PSD;--a.ref||a.finalize(),0===Re&&(++Re,_e((function(){0==--Re&&Xe()}),[]))}function We(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Re,_e(He,[n,e,t])}else e._listeners.push(t)}function He(e,t,n){try{Se=t;var r,a=t._value;t._state?r=e(a):(je.length&&(je=[]),r=e(a),-1===je.indexOf(a)&&function(e){var t=Te.length;for(;t;)if(Te[--t]._value===e._value)return void Te.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Se=null,0==--Re&&Xe(),--n.psd.ref||n.psd.finalize()}}function Ye(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var a,i,o=e._value;null!=o?(a=o.name||"Error",i=o.message||o,r=Q(o,0)):(a=o,i=""),t.push(a+(i?": "+i:"")+r)}return U&&((r=Q(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&Ye(e._prev,t,n)),t}function $e(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function Qe(){Ve()&&Ge()}function Ve(){var e=Ce;return Ce=!1,Pe=!1,e}function Ge(){var e,t,n;do{for(;De.length>0;)for(e=De,De=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(De.length>0);Ce=!0,Pe=!0}function Xe(){var e=Te;Te=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Me.slice(0),n=t.length;n;)t[--n]()}function Je(e){return new Fe(ye,!1,e)}function Ze(e,t){var n=Ae;return function(){var r=Ve(),a=Ae;try{return ft(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{ft(a,!1),r&&Ge()}}}f(Fe.prototype,{then:Be,_then:function(e,t){We(this,new Le(null,null,e,t,Ae))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return e instanceof t?n(e):Je(e)})):this.then(null,(function(e){return e&&e.name===t?n(e):Je(e)}))},finally:function(e){return this.then((function(t){return e(),t}),(function(t){return e(),Je(t)}))},stack:{get:function(){if(this._stack)return this._stack;try{Ne=!0;var e=Ye(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{Ne=!1}}},timeout:function(e,t){var n=this;return e<1/0?new Fe((function(r,a){var i=setTimeout((function(){return a(new ae.Timeout(t))}),e);n.then(r,a).finally(clearTimeout.bind(null,i))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&m(Fe.prototype,Symbol.toStringTag,"Dexie.Promise"),ze.env=dt(),f(Fe,{all:function(){var e=q.apply(null,arguments).map(ct);return new Fe((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(a,i){return Fe.resolve(a).then((function(n){e[i]=n,--r||t(e)}),n)}))}))},resolve:function(e){if(e instanceof Fe)return e;if(e&&"function"==typeof e.then)return new Fe((function(t,n){e.then(t,n)}));var t=new Fe(ye,!0,e);return $e(t,Se),t},reject:Je,race:function(){var e=q.apply(null,arguments).map(ct);return new Fe((function(t,n){e.map((function(e){return Fe.resolve(e).then(t,n)}))}))},PSD:{get:function(){return Ae},set:function(e){return Ae=e}},totalEchoes:{get:function(){return at}},newPSD:ot,usePSD:mt,scheduler:{get:function(){return _e},set:function(e){_e=e}},rejectionMapper:{get:function(){return Ie},set:function(e){Ie=e}},follow:function(e,t){return new Fe((function(n,r){return ot((function(t,n){var r=Ae;r.unhandleds=[],r.onunhandled=n,r.finalize=se((function(){var e=this;!function(e){function t(){e(),Me.splice(Me.indexOf(t),1)}Me.push(t),++Re,_e((function(){0==--Re&&Xe()}),[])}((function(){0===e.unhandleds.length?t():n(e.unhandleds[0])}))}),r.finalize),e()}),t,n,r)}))}}),xe&&(xe.allSettled&&m(Fe,"allSettled",(function(){var e=q.apply(null,arguments).map(ct);return new Fe((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,a){return Fe.resolve(e).then((function(e){return r[a]={status:"fulfilled",value:e}}),(function(e){return r[a]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),xe.any&&"undefined"!=typeof AggregateError&&m(Fe,"any",(function(){var e=q.apply(null,arguments).map(ct);return new Fe((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,a=new Array(r);e.forEach((function(e,i){return Fe.resolve(e).then((function(e){return t(e)}),(function(e){a[i]=e,--r||n(new AggregateError(a))}))}))}))})));var et={awaits:0,echoes:0,id:0},tt=0,nt=[],rt=0,at=0,it=0;function ot(e,t,n,r){var a=Ae,i=Object.create(a);i.parent=a,i.ref=0,i.global=!1,i.id=++it;var o=ze.env;i.env=ke?{Promise:Fe,PromiseProp:{value:Fe,configurable:!0,writable:!0},all:Fe.all,race:Fe.race,allSettled:Fe.allSettled,any:Fe.any,resolve:Fe.resolve,reject:Fe.reject,nthen:vt(o.nthen,i),gthen:vt(o.gthen,i)}:{},t&&l(i,t),++a.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=mt(i,e,n,r);return 0===i.ref&&i.finalize(),u}function ut(){return et.id||(et.id=++tt),++et.awaits,et.echoes+=100,et.id}function lt(){return!!et.awaits&&(0==--et.awaits&&(et.id=0),et.echoes=100*et.awaits,!0)}function ct(e){return et.echoes&&e&&e.constructor===xe?(ut(),e.then((function(e){return lt(),e}),(function(e){return lt(),wt(e)}))):e}function st(e){++at,et.echoes&&0!=--et.echoes||(et.echoes=et.id=0),nt.push(Ae),ft(e,!0)}function ht(){var e=nt[nt.length-1];nt.pop(),ft(e,!1)}function ft(e,t){var n=Ae;if((t?!et.echoes||rt++&&e===Ae:!rt||--rt&&e===Ae)||pt(t?st.bind(null,e):ht),e!==Ae&&(Ae=e,n===ze&&(ze.env=dt()),ke)){var r=ze.env.Promise,a=e.env;be.then=a.nthen,r.prototype.then=a.gthen,(n.global||e.global)&&(Object.defineProperty(u,"Promise",a.PromiseProp),r.all=a.all,r.race=a.race,r.resolve=a.resolve,r.reject=a.reject,a.allSettled&&(r.allSettled=a.allSettled),a.any&&(r.any=a.any))}}function dt(){var e=u.Promise;return ke?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:be.then,gthen:e.prototype.then}:{}}function mt(e,t,n,r,a){var i=Ae;try{return ft(e,!0),t(n,r,a)}finally{ft(i,!1)}}function pt(e){Ee.call(ge,e)}function yt(e,t,n,r){return"function"!=typeof e?e:function(){var a=Ae;n&&ut(),ft(t,!0);try{return e.apply(this,arguments)}finally{ft(a,!1),r&&pt(lt)}}}function vt(e,t){return function(n,r){return e.call(this,yt(n,t),yt(r,t))}}-1===(""+Ee).indexOf("[native code]")&&(ut=lt=ue);var gt="unhandledrejection";function bt(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var r,a={promise:t,reason:e};if(u.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(gt,!0,!0),l(r,a)):u.CustomEvent&&l(r=new CustomEvent(gt,{detail:a}),a),r&&u.dispatchEvent&&(dispatchEvent(r),!u.PromiseRejectionEvent&&u.onunhandledrejection))try{u.onunhandledrejection(r)}catch(e){}U&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(e){}}var wt=Fe.reject;function Et(e,t,n,r){if(e._state.openComplete||Ae.letThrough){var a=e._createTransaction(t,n,e._dbSchema);try{a.create()}catch(e){return wt(e)}return a._promise(t,(function(e,t){return ot((function(){return Ae.trans=a,r(e,t,a)}))})).then((function(e){return a._completion.then((function(){return e}))}))}if(!e._state.isBeingOpened){if(!e._options.autoOpen)return wt(new ae.DatabaseClosed);e.open().catch(ue)}return e._state.dbReadyPromise.then((function(){return Et(e,t,n,r)}))}var xt="3.0.3",kt=String.fromCharCode(65535),Nt=-1/0,Ot="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",_t="String expected.",Ct=[],Pt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Tt=Pt,jt=Pt,St=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},It="__dbnames",zt="readonly",At="readwrite";function Dt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Rt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Mt(e){return function(t){return void 0===N(t,e)&&_(t=z(t),e),t}}var Ft=function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||Ae.trans,a=this.name;function i(e,n,r){if(!r.schema[a])throw new ae.NotFound("Table "+a+" not part of transaction");return t(r.idbtrans,r)}var o=Ve();try{return r&&r.db===this.db?r===Ae.trans?r._promise(e,i,n):ot((function(){return r._promise(e,i,n)}),{trans:r,transless:Ae.transless||Ae}):Et(this.db,e,[this.name],i)}finally{o&&Ge()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},e.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(o(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var t=i(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){return e.compound&&t.every((function(t){return e.keyPath.indexOf(t)>=0}))&&e.keyPath.every((function(e){return t.indexOf(e)>=0}))}))[0];if(n&&this.db._maxKey!==kt)return this.where(n.name).equals(n.keyPath.map((function(t){return e[t]})));!n&&U&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+t.join("+")+"]");var r=this.schema.idxByName,a=this.db._deps.indexedDB;function u(e,t){try{return 0===a.cmp(e,t)}catch(e){return!1}}var l=t.reduce((function(t,n){var a=t[0],i=t[1],l=r[n],c=e[n];return[a||l,a||!l?Dt(i,l&&l.multi?function(e){var t=N(e,n);return o(t)&&t.some((function(e){return u(c,e)}))}:function(e){return u(c,N(e,n))}):i]}),[null,null]),c=l[0],s=l[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(s):n?this.filter(s):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,o(e)?"["+e.join("+")+"]":e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){this.schema.mappedClass=e;var t=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(h(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e},e.prototype.defineClass=function(){return this.mapToClass((function(e){l(this,e)}))},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,a=r.auto,i=r.keyPath,o=e;return i&&a&&(o=Mt(i)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[o]})})).then((function(e){return e.numFailures?Fe.reject(e.failures[0]):e.lastResult})).then((function(t){if(i)try{O(e,i,t)}catch(e){}return t}))},e.prototype.update=function(e,t){if("object"!=typeof t||o(t))throw new ae.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||o(e))return this.where(":id").equals(e).modify(t);i(t).forEach((function(n){O(e,n,t[n])}));var n=N(e,this.schema.primKey.keyPath);return void 0===n?wt(new ae.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,a=r.auto,i=r.keyPath,o=e;return i&&a&&(o=Mt(i)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[o],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?Fe.reject(e.failures[0]):e.lastResult})).then((function(t){if(i)try{O(e,i,t)}catch(e){}return t}))},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?Fe.reject(e.failures[0]):void 0}))},e.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Rt})})).then((function(e){return e.numFailures?Fe.reject(e.failures[0]):void 0}))},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},e.prototype.bulkAdd=function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,i=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,o=n.auto,u=n.keyPath;if(u&&a)throw new ae.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,c=u&&o?e.map(Mt(u)):e;return r.core.mutate({trans:t,type:"add",keys:a,values:c,wantResults:i}).then((function(e){var t=e.numFailures,n=e.results,a=e.lastResult,o=e.failures;if(0===t)return i?n:a;throw new te(r.name+".bulkAdd(): "+t+" of "+l+" operations failed",Object.keys(o).map((function(e){return o[e]})))}))}))},e.prototype.bulkPut=function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,i=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=r.schema.primKey,o=n.auto,u=n.keyPath;if(u&&a)throw new ae.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new ae.InvalidArgument("Arguments objects and keys must have the same length");var l=e.length,c=u&&o?e.map(Mt(u)):e;return r.core.mutate({trans:t,type:"put",keys:a,values:c,wantResults:i}).then((function(e){var t=e.numFailures,n=e.results,a=e.lastResult,o=e.failures;if(0===t)return i?n:a;throw new te(r.name+".bulkPut(): "+t+" of "+l+" operations failed",Object.keys(o).map((function(e){return o[e]})))}))}))},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,a=e.lastResult,i=e.failures;if(0===r)return a;throw new te(t.name+".bulkDelete(): "+r+" of "+n+" operations failed",i)}))},e}();function Bt(e){var t={},n=function(n,r){if(r){for(var a=arguments.length,i=new Array(a-1);--a;)i[a-1]=arguments[a];return t[n].subscribe.apply(null,i),e}if("string"==typeof n)return t[n]};n.addEventType=u;for(var r=1,a=arguments.length;r<a;++r)u(arguments[r]);return n;function u(e,r,a){if("object"==typeof e)return l(e);r||(r=me),a||(a=ue);var i={subscribers:[],fire:a,subscribe:function(e){-1===i.subscribers.indexOf(e)&&(i.subscribers.push(e),i.fire=r(i.fire,e))},unsubscribe:function(e){i.subscribers=i.subscribers.filter((function(t){return t!==e})),i.fire=i.subscribers.reduce(r,a)}};return t[e]=n[e]=i,i}function l(e){i(e).forEach((function(t){var n=e[t];if(o(n))u(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new ae.InvalidArgument("Invalid event config");var r=u(t,le,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){x((function(){e.apply(null,t)}))}))}))}}))}}function Lt(e,t){return p(t).from({prototype:e}),t}function qt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Kt(e,t){e.filter=Dt(e.filter,t)}function Ut(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Dt(r(),t())}:t,e.justLimit=n&&!r}function Wt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new ae.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Ht(e,t,n){var r=Wt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Yt(e,t,n,r){var a=e.replayFilter?Dt(e.filter,e.replayFilter()):e.filter;if(e.or){var i={},o=function(e,n,r){if(!a||a(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))){var o=n.primaryKey,u=""+o;"[object ArrayBuffer]"===u&&(u=""+new Uint8Array(o)),h(i,u)||(i[u]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(o,n),$t(Ht(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return $t(Ht(e,r,n),Dt(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function $t(e,t,n,r){var a=Ze(r?function(e,t,a){return n(r(e),t,a)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=ue}),(function(t){e.fail(t),n=ue}))||a(e.value,e,(function(e){return n=e})),n()}))}))}var Qt=function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,wt.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,wt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Dt(t.algorithm,e)},e.prototype._iterate=function(e,t){return Yt(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&l(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return Yt(t,e,n,t.table.core)}))},e.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(qt(n,!0))return r.count({trans:e,query:{index:Wt(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var a=0;return Yt(n,(function(){return++a,!1}),e,r).then((function(){return a}))})).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],a=n.length-1;function i(e,t){return t?i(e[n[t]],t-1):e[r]}var o="next"===this._ctx.dir?1:-1;function u(e,t){var n=i(e,a),r=i(t,a);return n<r?-o:n>r?o:0}return this.toArray((function(e){return e.sort(u)})).then(t)},e.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&qt(n,!0)&&n.limit>0){var r=n.valueMapper,a=Wt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:a,range:n.range}}).then((function(e){var t=e.result;return r?t.map(r):t}))}var i=[];return Yt(n,(function(e){return i.push(e)}),e,n.table.core).then((function(){return i}))}),e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,qt(t)?Ut(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?(--t,!1):(n((function(){e.advance(t),t=0})),!1))}})):Ut(t,(function(){var t=e;return function(){return--t<0}}))),this},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Ut(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this},e.prototype.until=function(e,t){return Kt(this._ctx,(function(n,r,a){return!e(n.value)||(r(a),t)})),this},e.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){var t,n;return Kt(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=Dt(t.isMatch,n),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&qt(t,!0)&&t.limit>0)return this._read((function(e){var n=Wt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Kt(this._ctx,(function(e){var t=e.primaryKey.toString(),r=h(n,t);return n[t]=!0,!r})),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var a;if("function"==typeof e)a=e;else{var o=i(e),u=o.length;a=function(t){for(var n=!1,r=0;r<u;++r){var a=o[r],i=e[a];N(t,a)!==i&&(O(t,a,i),n=!0)}return n}}var l=n.table.core,c=l.schema.primaryKey,s=c.outbound,h=c.extractKey,f="testmode"in Ln?1:2e3,d=t.db.core.cmp,m=[],p=0,y=[],v=function(e,t){var n=t.failures,r=t.numFailures;p+=e-r;for(var a=0,o=i(n);a<o.length;a++){var u=o[a];m.push(n[u])}};return t.clone().primaryKeys().then((function(e){var t=function(n){var i=Math.min(f,e.length-n);return l.getMany({trans:r,keys:e.slice(n,n+i)}).then((function(o){for(var u=[],c=[],m=s?[]:null,p=[],y=0;y<i;++y){var g=o[y],b={value:z(g),primKey:e[n+y]};!1!==a.call(b,b.value,b)&&(null==b.value?p.push(e[n+y]):s||0===d(h(g),h(b.value))?(c.push(b.value),s&&m.push(e[n+y])):(p.push(e[n+y]),u.push(b.value)))}return Promise.resolve(u.length>0&&l.mutate({trans:r,type:"add",values:u}).then((function(e){for(var t in e.failures)p.splice(parseInt(t),1);v(u.length,e)}))).then((function(e){return c.length>0&&l.mutate({trans:r,type:"put",keys:m,values:c}).then((function(e){return v(c.length,e)}))})).then((function(){return p.length>0&&l.mutate({trans:r,type:"delete",keys:p}).then((function(e){return v(p.length,e)}))})).then((function(){return e.length>n+i&&t(n+f)}))}))};return t(0).then((function(){if(m.length>0)throw new ee("Error modifying one or more objects",m,p,y);return e.length}))}))}))},e.prototype.delete=function(){var e=this._ctx,t=e.range;return qt(e)&&(e.isPrimKey&&!jt||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,a=t;return e.table.core.count({trans:n,query:{index:r,range:a}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:a}).then((function(e){var n=e.failures,r=(e.lastResult,e.results,e.numFailures);if(r)throw new ee("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-r);return t-r}))}))})):this.modify((function(e,t){return t.value=null}))},e}();function Vt(e,t){return e<t?-1:e===t?0:1}function Gt(e,t){return e>t?-1:e===t?0:1}function Xt(e,t,n){var r=e instanceof rn?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Jt(e){return new e.Collection(e,(function(){return nn("")})).limit(0)}function Zt(e,t,n,r,a,i){for(var o=Math.min(e.length,r.length),u=-1,l=0;l<o;++l){var c=t[l];if(c!==r[l])return a(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):a(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;a(e[l],c)<0&&(u=l)}return o<r.length&&"next"===i?e+n.substr(e.length):o<e.length&&"prev"===i?e.substr(0,n.length):u<0?null:e.substr(0,u)+r[u]+n.substr(u+1)}function en(e,t,n,r){var a,i,o,u,l,c,s,h=n.length;if(!n.every((function(e){return"string"==typeof e})))return Xt(e,_t);function f(e){a=function(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}(e),i=function(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}(e),o="next"===e?Vt:Gt;var t=n.map((function(e){return{lower:i(e),upper:a(e)}})).sort((function(e,t){return o(e.lower,t.lower)}));u=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),c=e,s="next"===e?"":r}f("next");var d=new e.Collection(e,(function(){return tn(u[0],l[h-1]+r)}));d._ondirectionchange=function(e){f(e)};var m=0;return d._addAlgorithm((function(e,n,r){var a=e.key;if("string"!=typeof a)return!1;var f=i(a);if(t(f,l,m))return!0;for(var d=null,p=m;p<h;++p){var y=Zt(a,f,u[p],l[p],o,c);null===y&&null===d?m=p+1:(null===d||o(d,y)>0)&&(d=y)}return n(null!==d?function(){e.continue(d+s)}:r),!1})),d}function tn(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function nn(e){return{type:1,lower:e,upper:e}}var rn=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),e.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Jt(this):new this.Collection(this,(function(){return tn(e,t,!n,!r)}))}catch(e){return Xt(this,Ot)}},e.prototype.equals=function(e){return null==e?Xt(this,Ot):new this.Collection(this,(function(){return nn(e)}))},e.prototype.above=function(e){return null==e?Xt(this,Ot):new this.Collection(this,(function(){return tn(e,void 0,!0)}))},e.prototype.aboveOrEqual=function(e){return null==e?Xt(this,Ot):new this.Collection(this,(function(){return tn(e,void 0,!1)}))},e.prototype.below=function(e){return null==e?Xt(this,Ot):new this.Collection(this,(function(){return tn(void 0,e,!1,!0)}))},e.prototype.belowOrEqual=function(e){return null==e?Xt(this,Ot):new this.Collection(this,(function(){return tn(void 0,e)}))},e.prototype.startsWith=function(e){return"string"!=typeof e?Xt(this,_t):this.between(e,e+kt,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):en(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],kt)},e.prototype.equalsIgnoreCase=function(e){return en(this,(function(e,t){return e===t[0]}),[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=q.apply(L,arguments);return 0===e.length?Jt(this):en(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=q.apply(L,arguments);return 0===e.length?Jt(this):en(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,kt)},e.prototype.anyOf=function(){var e=this,t=q.apply(L,arguments),n=this._cmp;try{t.sort(n)}catch(e){return Xt(this,Ot)}if(0===t.length)return Jt(this);var r=new this.Collection(this,(function(){return tn(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var a=0;return r._addAlgorithm((function(e,r,i){for(var o=e.key;n(o,t[a])>0;)if(++a===t.length)return r(i),!1;return 0===n(o,t[a])||(r((function(){e.continue(t[a])})),!1)})),r},e.prototype.notEqual=function(e){return this.inAnyRange([[Nt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=q.apply(L,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Xt(this,Ot)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[Nt,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,a=this._ascending,i=this._descending,o=this._min,u=this._max;if(0===e.length)return Jt(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&a(e[0],e[1])<=0})))return Xt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ae.InvalidArgument);var l=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers;var s,h=a;function f(e,t){return h(e[0],t[0])}try{(s=e.reduce((function(e,t){for(var n=0,a=e.length;n<a;++n){var i=e[n];if(r(t[0],i[1])<0&&r(t[1],i[0])>0){i[0]=o(i[0],t[0]),i[1]=u(i[1],t[1]);break}}return n===a&&e.push(t),e}),[])).sort(f)}catch(e){return Xt(this,Ot)}var d=0,m=c?function(e){return a(e,s[d][1])>0}:function(e){return a(e,s[d][1])>=0},p=l?function(e){return i(e,s[d][0])>0}:function(e){return i(e,s[d][0])>=0};var y=m,v=new this.Collection(this,(function(){return tn(s[0][0],s[s.length-1][1],!l,!c)}));return v._ondirectionchange=function(e){"next"===e?(y=m,h=a):(y=p,h=i),s.sort(f)},v._addAlgorithm((function(e,t,r){for(var i=e.key;y(i);)if(++d===s.length)return t(r),!1;return!!function(e){return!m(e)&&!p(e)}(i)||(0===n._cmp(i,s[d][1])||0===n._cmp(i,s[d][0])||t((function(){h===a?e.continue(s[d][0]):e.continue(s[d][1])})),!1)})),v},e.prototype.startsWithAnyOf=function(){var e=q.apply(L,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?Jt(this):this.inAnyRange(e.map((function(e){return[e,e+kt]}))):Xt(this,"startsWithAnyOf() only works with strings")},e}();function an(e){return 1===e.length?e[0]:e}function on(e){try{return e.only([[]]),[[]]}catch(e){return kt}}function un(e){return Ze((function(t){return ln(t),e(t.target.error),!1}))}function ln(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var cn=function(){function e(){}return e.prototype._lock=function(){return E(!Ae.global),++this._reculock,1!==this._reculock||Ae.global||(Ae.lockOwnerFor=this),this},e.prototype._unlock=function(){if(E(!Ae.global),0==--this._reculock)for(Ae.global||(Ae.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{mt(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&Ae.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(E(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new ae.DatabaseClosed(r);case"MissingAPIError":throw new ae.MissingAPI(r.message,r);default:throw new ae.OpenFailed(r)}if(!this.active)throw new ae.TransactionInactive;return E(null===this._completion._state),(e=this.idbtrans=e||n.transaction(an(this.storeNames),this.mode)).onerror=Ze((function(n){ln(n),t._reject(e.error)})),e.onabort=Ze((function(n){ln(n),t.active&&t._reject(new ae.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=Ze((function(){t.active=!1,t._resolve()})),this},e.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return wt(new ae.ReadOnly("Transaction is readonly"));if(!this.active)return wt(new ae.TransactionInactive);if(this._locked())return new Fe((function(a,i){r._blockedFuncs.push([function(){r._promise(e,t,n).then(a,i)},Ae])}));if(n)return ot((function(){var e=new Fe((function(e,n){r._lock();var a=t(e,n,r);a&&a.then&&a.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var a=new Fe((function(e,n){var a=t(e,n,r);a&&a.then&&a.then(e,n)}));return a._lib=!0,a},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=Fe.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((function(){return n}));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var a=t._waitingFor;return new Fe((function(e,r){n.then((function(n){return t._waitingQueue.push(Ze(e.bind(null,n)))}),(function(e){return t._waitingQueue.push(Ze(r.bind(null,e)))})).finally((function(){t._waitingFor===a&&(t._waitingFor=null)}))}))},e.prototype.abort=function(){this.active&&this._reject(new ae.Abort),this.active=!1},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(h(t,e))return t[e];var n=this.schema[e];if(!n)throw new ae.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e}();function sn(e,t,n,r,a,i,o){return{name:e,keyPath:t,unique:n,multi:r,auto:a,compound:i,src:(n&&!o?"&":"")+(r?"*":"")+(a?"++":"")+hn(t)}}function hn(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function fn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:k(n,(function(e){return[e.name,e]}))}}function dn(e){return null==e?function(){}:"string"==typeof e?function(e){return 1===e.split(".").length?function(t){return t[e]}:function(t){return N(t,e)}}(e):function(t){return N(t,e)}}function mn(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}function pn(e){return[].slice.call(e)}var yn=0;function vn(e){return null==e?":id":"string"==typeof e?e:"["+e.join("+")+"]"}function gn(e,t,n,r){var i=t.cmp.bind(t);function u(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var t=e.lower,r=e.upper,a=e.lowerOpen,i=e.upperOpen;return void 0===t?void 0===r?null:n.upperBound(r,!!i):void 0===r?n.lowerBound(t,!!a):n.bound(t,r,!!a,!!i)}var l=function(e,t){var n=pn(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((function(e){return t.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=o(t),a=null==t,i={},u={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:a,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:dn(t)},indexes:pn(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry,a=e.keyPath,u={name:t,compound:o(a),keyPath:a,unique:n,multiEntry:r,extractKey:dn(a)};return i[vn(a)]=u,u})),getIndexByKeyPath:function(e){return i[vn(e)]}};return i[":id"]=u.primaryKey,null!=t&&(i[vn(t)]=u.primaryKey),u}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,r),c=l.schema,s=l.hasGetAll,h=c.tables.map((function(e){return function(e){var t=e.name;return{name:t,schema:e,mutate:function(n){var r=n.trans,i=n.type,o=n.keys,l=n.values,c=n.range,s=n.wantResults;return new Promise((function(n,h){n=Ze(n);var f=r.objectStore(t),d=null==f.keyPath,m="put"===i||"add"===i;if(!m&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var p=(o||l||{length:1}).length;if(o&&l&&o.length!==l.length)throw new Error("Given keys array must have same length as given values array.");if(0===p)return n({numFailures:0,failures:{},results:[],lastResult:void 0});var y,v=s&&a(o||mn(e.primaryKey,{type:i,keys:o,values:l})),g=[],b=0,w=function(e){++b,ln(e),v&&(v[e.target._reqno]=void 0),g[e.target._reqno]=e.target.error},E=function(e){var t=e.target;v[t._reqno]=t.result};if("deleteRange"===i){if(4===c.type)return n({numFailures:b,failures:g,results:v,lastResult:void 0});y=3===c.type?f.clear():f.delete(u(c))}else{var x=m?d?[l,o]:[l,null]:[o,null],k=x[0],N=x[1];if(m)for(var O=0;O<p;++O)(y=N&&void 0!==N[O]?f[i](k[O],N[O]):f[i](k[O]))._reqno=O,v&&void 0===v[O]&&(y.onsuccess=E),y.onerror=w;else for(O=0;O<p;++O)(y=f[i](k[O]))._reqno=O,y.onerror=w}var _=function(e){var t=e.target.result;v&&(v[p-1]=t),n({numFailures:b,failures:g,results:v,lastResult:t})};y.onerror=function(e){w(e),_(e)},y.onsuccess=_}))},getMany:function(e){var n=e.trans,r=e.keys;return new Promise((function(e,a){e=Ze(e);for(var i,o=n.objectStore(t),u=r.length,l=new Array(u),c=0,s=0,h=function(t){var n=t.target;l[n._pos]=n.result,++s===c&&e(l)},f=un(a),d=0;d<u;++d)null!=r[d]&&((i=o.get(r[d]))._pos=d,i.onsuccess=h,i.onerror=f,++c);0===c&&e(l)}))},get:function(e){var n=e.trans,r=e.key;return new Promise((function(e,a){e=Ze(e);var i=n.objectStore(t).get(r);i.onsuccess=function(t){return e(t.target.result)},i.onerror=un(a)}))},query:function(e){return function(n){return new Promise((function(r,a){r=Ze(r);var i=n.trans,o=n.values,l=n.limit,c=n.query,s=l===1/0?void 0:l,h=c.index,f=c.range,d=i.objectStore(t),m=h.isPrimaryKey?d:d.index(h.name),p=u(f);if(0===l)return r({result:[]});if(e){var y=o?m.getAll(p,s):m.getAllKeys(p,s);y.onsuccess=function(e){return r({result:e.target.result})},y.onerror=un(a)}else{var v=0,g=o||!("openKeyCursor"in m)?m.openCursor(p):m.openKeyCursor(p),b=[];g.onsuccess=function(e){var t=g.result;return t?(b.push(o?t.value:t.primaryKey),++v===l?r({result:b}):void t.continue()):r({result:b})},g.onerror=un(a)}}))}}(s),openCursor:function(e){var n=e.trans,r=e.values,a=e.query,i=e.reverse,o=e.unique;return new Promise((function(e,l){e=Ze(e);var c=a.index,s=a.range,h=n.objectStore(t),f=c.isPrimaryKey?h:h.index(c.name),d=i?o?"prevunique":"prev":o?"nextunique":"next",m=r||!("openKeyCursor"in f)?f.openCursor(u(s),d):f.openKeyCursor(u(s),d);m.onerror=un(l),m.onsuccess=Ze((function(t){var r=m.result;if(r){r.___id=++yn,r.done=!1;var a=r.continue.bind(r),i=r.continuePrimaryKey;i&&(i=i.bind(r));var o=r.advance.bind(r),u=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=function(){throw new Error("Cursor not started")},r.fail=Ze(l),r.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},r.start=function(e){var t=new Promise((function(e,t){e=Ze(e),m.onerror=un(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=u,e(t)}})),n=function(){if(m.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return m.onsuccess=Ze((function(e){m.onsuccess=n,n()})),r.continue=a,r.continuePrimaryKey=i,r.advance=o,n(),t},e(r)}else e(null)}),l)}))},count:function(e){var n=e.query,r=e.trans,a=n.index,i=n.range;return new Promise((function(e,n){var o=r.objectStore(t),l=a.isPrimaryKey?o:o.index(a.name),c=u(i),s=c?l.count(c):l.count();s.onsuccess=Ze((function(t){return e(t.target.result)})),s.onerror=un(n)}))}}}(e)})),f={};return h.forEach((function(e){return f[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!f[e])throw new Error("Table '"+e+"' not found");return f[e]},cmp:i,MIN_KEY:-1/0,MAX_KEY:on(n),schema:c}}function bn(e,t,n,a){var i=n.IDBKeyRange;return{dbcore:function(e,t){return t.reduce((function(e,t){var n=t.create;return r(r({},e),n(e))}),e)}(gn(t,n.indexedDB,i,a),e.dbcore)}}function wn(e,t){var n=t.db,r=bn(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((function(t){var n=t.name;e.core.schema.tables.some((function(e){return e.name===n}))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function En(e,t,n,r){n.forEach((function(n){var a=r[n];t.forEach((function(t){var r=v(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?m(t,n,{get:function(){return this.table(n)},set:function(e){d(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,a))}))}))}function xn(e,t){t.forEach((function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]}))}function kn(e,t){return e._cfg.version-t._cfg.version}function Nn(e,t,n,r){var a=e._dbSchema,o=e._createTransaction("readwrite",e._storeNames,a);o.create(n),o._completion.catch(r);var u=o._reject.bind(o),l=Ae.transless||Ae;ot((function(){Ae.trans=o,Ae.transless=l,0===t?(i(a).forEach((function(e){_n(n,e,a[e].primKey,a[e].indexes)})),wn(e,n),Fe.follow((function(){return e.on.populate.fire(o)})).catch(u)):function(e,t,n,r){var a=[],o=e._versions,u=e._dbSchema=Pn(e,e.idbdb,r),l=!1;function c(){return a.length?Fe.resolve(a.shift()(n.idbtrans)).then(c):Fe.resolve()}return o.filter((function(e){return e._cfg.version>=t})).forEach((function(o){a.push((function(){var a=u,c=o._cfg.dbschema;Tn(e,a,r),Tn(e,c,r),u=e._dbSchema=c;var s=On(a,c);s.add.forEach((function(e){_n(r,e[0],e[1].primKey,e[1].indexes)})),s.change.forEach((function(e){if(e.recreate)throw new ae.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach((function(e){return Cn(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),Cn(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var h=o._cfg.contentUpgrade;if(h&&o._cfg.version>t){wn(e,r),n._memoizedTables={},l=!0;var f=C(c);s.del.forEach((function(e){f[e]=a[e]})),xn(e,[e.Transaction.prototype]),En(e,[e.Transaction.prototype],i(f),f),n.schema=f;var d,m=K(h);m&&ut();var p=Fe.follow((function(){if((d=h(n))&&m){var e=lt.bind(null,null);d.then(e,e)}}));return d&&"function"==typeof d.then?Fe.resolve(d):p.then((function(){return d}))}})),a.push((function(t){l&&Tt||function(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];null==e[r]&&t.db.deleteObjectStore(r)}}(o._cfg.dbschema,t);xn(e,[e.Transaction.prototype]),En(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),c().then((function(){var e,t;t=r,i(e=u).forEach((function(n){t.db.objectStoreNames.contains(n)||_n(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,o,n).catch(u)}))}function On(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var a=e[n],i=t[n];if(a){var o={name:n,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||a.primKey.auto!==i.primKey.auto&&!Pt)o.recreate=!0,r.change.push(o);else{var u=a.idxByName,l=i.idxByName,c=void 0;for(c in u)l[c]||o.del.push(c);for(c in l){var s=u[c],h=l[c];s?s.src!==h.src&&o.change.push(h):o.add.push(h)}(o.del.length>0||o.add.length>0||o.change.length>0)&&r.change.push(o)}}else r.add.push([n,i])}return r}function _n(e,t,n,r){var a=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return Cn(a,e)})),a}function Cn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Pn(e,t,n){var r={};return b(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),a=t.keyPath,i=sn(hn(a),a||"",!1,!1,!!t.autoIncrement,a&&"string"!=typeof a,!0),o=[],u=0;u<t.indexNames.length;++u){var l=t.index(t.indexNames[u]);a=l.keyPath;var c=sn(l.name,a,!!l.unique,!!l.multiEntry,!1,a&&"string"!=typeof a,!1);o.push(c)}r[e]=fn(e,i,o)})),r}function Tn(e,t,n){for(var r=n.db.objectStoreNames,a=0;a<r.length;++a){var i=r[a],o=n.objectStore(i);e._hasGetAll="getAll"in o;for(var l=0;l<o.indexNames.length;++l){var c=o.indexNames[l],s=o.index(c).keyPath,h="string"==typeof s?s:"["+b(s).join("+")+"]";if(t[i]){var f=t[i].idxByName[h];f&&(f.name=c,delete t[i].idxByName[h],t[i].idxByName[c]=f)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}var jn,Sn=function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){i(e).forEach((function(n){if(null!==e[n]){var r=e[n].split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return sn(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),o(r),0===t)})),a=r.shift();if(a.multi)throw new ae.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new ae.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new ae.Schema("Index must have a name and cannot be an empty string")})),t[n]=fn(n,a,r)}}))},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,e):e;var n=t._versions,r={},a={};return n.forEach((function(e){l(r,e._cfg.storesSource),a=e._cfg.dbschema={},e._parseStoresSpec(r,a)})),t._dbSchema=a,xn(t,[t._allTables,t,t.Transaction.prototype]),En(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],i(a),a),t._storeNames=i(a),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=e,this},e}();function In(e){return ot((function(){return Ae.letThrough=!0,e()}))}function zn(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?wt(t.dbOpenError):e}));U&&(t.openCanceller._stackHolder=$()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.dbReadyResolve,a=null;return Fe.race([t.openCanceller,new Fe((function(r,o){if(!n)throw new ae.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var u=e.name,l=t.autoSchema?n.open(u):n.open(u,Math.round(10*e.verno));if(!l)throw new ae.MissingAPI("IndexedDB API not available");l.onerror=un(o),l.onblocked=Ze(e._fireOnBlocked),l.onupgradeneeded=Ze((function(r){if(a=l.transaction,t.autoSchema&&!e._options.allowEmptyDB){l.onerror=ln,a.abort(),l.result.close();var i=n.deleteDatabase(u);i.onsuccess=i.onerror=Ze((function(){o(new ae.NoSuchDatabase("Database "+u+" doesnt exist"))}))}else{a.onerror=un(o);var c=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;e.idbdb=l.result,Nn(e,c/10,a,o)}}),o),l.onsuccess=Ze((function(){a=null;var n=e.idbdb=l.result,o=b(n.objectStoreNames);if(o.length>0)try{var c=n.transaction(an(o),"readonly");t.autoSchema?function(e,t,n){e.verno=t.version/10;var r=e._dbSchema=Pn(0,t,n);e._storeNames=b(t.objectStoreNames,0),En(e,[e._allTables],i(r),r)}(e,n,c):(Tn(e,e._dbSchema,c),function(e,t){var n=On(Pn(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((function(e){return e.add.length||e.change.length})))}(e,c)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),wn(e,c)}catch(e){}Ct.push(e),n.onversionchange=Ze((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),jn.add(u),r()}),o)}))]).then((function(){return t.onReadyBeingFired=[],Fe.resolve(In(e.on.ready.fire)).then((function e(){if(t.onReadyBeingFired.length>0){var n=t.onReadyBeingFired.reduce(pe,ue);return t.onReadyBeingFired=[],Fe.resolve(In(n)).then(e)}}))})).finally((function(){t.onReadyBeingFired=null})).then((function(){return t.isBeingOpened=!1,e})).catch((function(n){try{a&&a.abort()}catch(e){}return t.isBeingOpened=!1,e.close(),t.dbOpenError=n,wt(t.dbOpenError)})).finally((function(){t.openComplete=!0,r()}))}function An(e){var t=function(t){return e.next(t)},n=a(t),r=a((function(t){return e.throw(t)}));function a(e){return function(t){var a=e(t),i=a.value;return a.done?i:i&&"function"==typeof i.then?i.then(n,r):o(i)?Promise.all(i).then(n,r):n(i)}}return a(t)()}function Dn(e,t,n){var r=arguments.length;if(r<2)throw new ae.InvalidArgument("Too few arguments");for(var a=new Array(r-1);--r;)a[r-1]=arguments[r];n=a.pop();var i=T(a);return[e,i,n]}function Rn(e,t,n,r,a){return Fe.resolve().then((function(){var i=Ae.transless||Ae,o=e._createTransaction(t,n,e._dbSchema,r),u={trans:o,transless:i};r?o.idbtrans=r.idbtrans:o.create();var l,c=K(a);c&&ut();var s=Fe.follow((function(){if(l=a.call(o,o))if(c){var e=lt.bind(null,null);l.then(e,e)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=An(l))}),u);return(l&&"function"==typeof l.then?Fe.resolve(l).then((function(e){return o.active?e:wt(new ae.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):s.then((function(){return l}))).then((function(e){return r&&o._resolve(),o._completion.then((function(){return e}))})).catch((function(e){return o._reject(e),wt(e)}))}))}function Mn(e,t,n){for(var r=o(e)?e.slice():[e],a=0;a<n;++a)r.push(t);return r}var Fn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return r(r({},e),{table:function(t){var n=e.table(t),a=n.schema,i={},o=[];function u(e,t,n){var a=vn(e),l=i[a]=i[a]||[],c=null==e?0:"string"==typeof e?1:e.length,s=t>0,h=r(r({},n),{isVirtual:s,isPrimaryKey:!s&&n.isPrimaryKey,keyTail:t,keyLength:c,extractKey:dn(e),unique:!s&&n.unique});(l.push(h),h.isPrimaryKey||o.push(h),c>1)&&u(2===c?e[0]:e.slice(0,c-1),t+1,n);return l.sort((function(e,t){return e.keyTail-t.keyTail})),h}var l=u(a.primaryKey.keyPath,0,a.primaryKey);i[":id"]=[l];for(var c=0,s=a.indexes;c<s.length;c++){var h=s[c];u(h.keyPath,0,h)}function f(t){var n,a,i=t.query.index;return i.isVirtual?r(r({},t),{query:{index:i,range:(n=t.query.range,a=i.keyTail,{type:1===n.type?2:n.type,lower:Mn(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,a),lowerOpen:!0,upper:Mn(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,a),upperOpen:!0})}}):t}return r(r({},n),{schema:r(r({},a),{primaryKey:l,indexes:o,getIndexByKeyPath:function(e){var t=i[vn(e)];return t&&t[0]}}),count:function(e){return n.count(f(e))},query:function(e){return n.query(f(e))},openCursor:function(t){var r=t.query.index,a=r.keyTail,i=r.isVirtual,o=r.keyLength;if(!i)return n.openCursor(t);return n.openCursor(f(t)).then((function(n){return n&&function(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(Mn(r,t.reverse?e.MAX_KEY:e.MIN_KEY,a)):t.unique?n.continue(Mn(n.key,t.reverse?e.MIN_KEY:e.MAX_KEY,a)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Mn(t,e.MAX_KEY,a),r)}},key:{get:function(){var e=n.key;return 1===o?e[0]:e.slice(0,o)}},value:{get:function(){return n.value}}})}(n)}))}})}})}},Bn={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return r(r({},e),{table:function(t){var n=e.table(t),i=n.schema.primaryKey;return r(r({},n),{mutate:function(e){var o=Ae.trans,u=o.table(t).hook,l=u.deleting,c=u.creating,s=u.updating;switch(e.type){case"add":if(c.fire===ue)break;return o._promise("readwrite",(function(){return f(e)}),!0);case"put":if(c.fire===ue&&s.fire===ue)break;return o._promise("readwrite",(function(){return f(e)}),!0);case"delete":if(l.fire===ue)break;return o._promise("readwrite",(function(){return f(e)}),!0);case"deleteRange":if(l.fire===ue)break;return o._promise("readwrite",(function(){return function(e){return d(e.trans,e.range,1e4)}(e)}),!0)}return n.mutate(e);function f(e){var t=Ae.trans,o=e.keys||mn(i,e);if(!o)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?r(r({},e),{keys:o,wantResults:!0}):r({},e)).type&&(e.values=a(e.values)),e.keys&&(e.keys=a(e.keys)),function(e,t,n){return"add"===t.type?Promise.resolve(new Array(t.values.length)):e.getMany({trans:t.trans,keys:n})}(n,e,o).then((function(r){var a=o.map((function(n,a){var o=r[a],u={onerror:null,onsuccess:null};if("delete"===e.type)l.fire.call(u,n,o,t);else if("add"===e.type||void 0===o){var f=c.fire.call(u,n,e.values[a],t);null==n&&null!=f&&(n=f,e.keys[a]=n,i.outbound||O(e.values[a],i.keyPath,n))}else{var d=M(o,e.values[a]),m=s.fire.call(u,d,n,o,t);if(m){var p=e.values[a];Object.keys(m).forEach((function(e){h(p,e)?p[e]=m[e]:O(p,e,m[e])}))}}return u}));return n.mutate(e).then((function(t){for(var n=t.failures,i=t.results,u=t.numFailures,l=t.lastResult,c=0;c<o.length;++c){var s=i?i[c]:o[c],h=a[c];null==s?h.onerror&&h.onerror(n[c]):h.onsuccess&&h.onsuccess("put"===e.type&&r[c]?e.values[c]:s)}return{failures:n,results:i,numFailures:u,lastResult:l}})).catch((function(e){return a.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}function d(e,t,a){return n.query({trans:e,values:!1,query:{index:i,range:t},limit:a}).then((function(n){var i=n.result;return f({type:"delete",keys:i,trans:e}).then((function(n){return n.numFailures>0?Promise.reject(n.failures[0]):i.length<a?{failures:[],numFailures:0,lastResult:void 0}:d(e,r(r({},t),{lower:i[i.length-1],lowerOpen:!0}),a)}))}))}}})}})}},Ln=function(){function e(t,n){var a=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=r({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var o=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null;var u,l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ue,dbReadyPromise:null,cancelOpen:ue,openCanceller:null,autoSchema:!0};l.dbReadyPromise=new Fe((function(e){l.dbReadyResolve=e})),l.openCanceller=new Fe((function(e,t){l.cancelOpen=t})),this._state=l,this.name=t,this.on=Bt(this,"populate","blocked","versionchange",{ready:[pe,ue]}),this.on.ready.subscribe=w(this.on.ready.subscribe,(function(t){return function(n,r){e.vip((function(){var e=a._state;if(e.openComplete)e.dbOpenError||Fe.resolve().then(n),r&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),r&&t(n);else{t(n);var i=a;r||t((function e(){i.on.ready.unsubscribe(n),i.on.ready.unsubscribe(e)}))}}))}})),this.Collection=(u=this,Lt(Qt.prototype,(function(e,t){this.db=u;var n=Rt,r=null;if(t)try{n=t()}catch(e){r=e}var a=e._ctx,i=a.table,o=i.hook.reading.fire;this._ctx={table:i,index:a.index,isPrimKey:!a.index||i.schema.primKey.keyPath&&a.index===i.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:a.or,valueMapper:o!==le?o:null}}))),this.Table=function(e){return Lt(Ft.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Bt(null,{creating:[he,ue],reading:[ce,le],updating:[de,ue],deleting:[fe,ue]})}))}(this),this.Transaction=function(e){return Lt(cn.prototype,(function(t,n,r,a){var i=this;this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.idbtrans=null,this.on=Bt(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Fe((function(e,t){i._resolve=e,i._reject=t})),this._completion.then((function(){i.active=!1,i.on.complete.fire()}),(function(e){var t=i.active;return i.active=!1,i.on.error.fire(e),i.parent?i.parent._reject(e):t&&i.idbtrans&&i.idbtrans.abort(),wt(e)}))}))}(this),this.Version=function(e){return Lt(Sn.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Lt(rn.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};var a=e._deps.indexedDB;if(!a)throw new ae.MissingAPI("indexedDB API missing");this._cmp=this._ascending=a.cmp.bind(a),this._descending=function(e,t){return a.cmp(t,e)},this._max=function(e,t){return a.cmp(e,t)>0?e:t},this._min=function(e,t){return a.cmp(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+a.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+a.name+"'. Closing db now to resume the delete request."),a.close()})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+a.name+"') was blocked"):console.warn("Upgrade '"+a.name+"' blocked by other connection holding version "+e.oldVersion/10)})),this._maxKey=on(n.IDBKeyRange),this._createTransaction=function(e,t,n,r){return new a.Transaction(e,t,n,r)},this._fireOnBlocked=function(e){a.on("blocked").fire(e),Ct.filter((function(e){return e.name===a.name&&e!==a&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Fn),this.use(Bn),o.forEach((function(e){return e(a)}))}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new ae.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ae.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(kn),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this._state.openComplete||Ae.letThrough?e():new Fe((function(e,n){if(!t._state.isBeingOpened){if(!t._options.autoOpen)return void n(new ae.DatabaseClosed);t.open().catch(ue)}t._state.dbReadyPromise.then(e,n)})).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,a=e.name;a&&this.unuse({stack:t,name:a});var i=this._middlewares[t]||(this._middlewares[t]=[]);return i.push({stack:t,create:n,level:null==r?10:r,name:a}),i.sort((function(e,t){return e.level-t.level})),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},e.prototype.open=function(){return zn(this)},e.prototype.close=function(){var e=Ct.indexOf(this),t=this._state;if(e>=0&&Ct.splice(e,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}this._options.autoOpen=!1,t.dbOpenError=new ae.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError),t.dbReadyPromise=new Fe((function(e){t.dbReadyResolve=e})),t.openCanceller=new Fe((function(e,n){t.cancelOpen=n}))},e.prototype.delete=function(){var e=this,t=arguments.length>0,n=this._state;return new Fe((function(r,a){var i=function(){e.close();var t=e._deps.indexedDB.deleteDatabase(e.name);t.onsuccess=Ze((function(){jn.remove(e.name),r()})),t.onerror=un(a),t.onblocked=e._fireOnBlocked};if(t)throw new ae.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(i):i()}))},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return null!==this.idbdb},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},e.prototype.hasFailed=function(){return null!==this._state.dbOpenError},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return i(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!0,configurable:!0}),e.prototype.transaction=function(){var e=Dn.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var r=this,a=Ae.trans;a&&a.db===this&&-1===e.indexOf("!")||(a=null);var i,o,u=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(o=t.map((function(e){var t=e instanceof r.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||e===zt)i=zt;else{if("rw"!=e&&e!=At)throw new ae.InvalidArgument("Invalid transaction mode: "+e);i=At}if(a){if(a.mode===zt&&i===At){if(!u)throw new ae.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a=null}a&&o.forEach((function(e){if(a&&-1===a.storeNames.indexOf(e)){if(!u)throw new ae.SubTransaction("Table "+e+" not included in parent transaction.");a=null}})),u&&a&&!a.active&&(a=null)}}catch(e){return a?a._promise(null,(function(t,n){n(e)})):wt(e)}var l=Rn.bind(null,this,i,o,a,n);return a?a._promise(i,l,"lock"):Ae.trans?mt(Ae.transless,(function(){return r._whenReady(l)})):this._whenReady(l)},e.prototype.table=function(e){if(!h(this._allTables,e))throw new ae.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},e}(),qn=Ln;f(qn,r(r({},oe),{delete:function(e){return new qn(e).delete()},exists:function(e){return new qn(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){return jn?jn.getDatabaseNames().then(e):Fe.resolve([])},defineClass:function(){return function(e){l(this,e)}},ignoreTransaction:function(e){return Ae.trans?mt(Ae.transless,e):e()},vip:In,async:function(e){return function(){try{var t=An(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Fe.resolve(t)}catch(e){return wt(e)}}},spawn:function(e,t,n){try{var r=An(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Fe.resolve(r)}catch(e){return wt(e)}},currentTransaction:{get:function(){return Ae.trans||null}},waitFor:function(e,t){var n=Fe.resolve("function"==typeof e?qn.ignoreTransaction(e):e).timeout(t||6e4);return Ae.trans?Ae.trans.waitFor(n):n},Promise:Fe,debug:{get:function(){return U},set:function(e){W(e,"dexie"===e?function(){return!0}:St)}},derive:p,extend:l,props:f,override:w,Events:Bt,getByKeyPath:N,setByKeyPath:O,delByKeyPath:_,shallowClone:C,deepClone:z,getObjectDiff:M,asap:x,minKey:Nt,addons:[],connections:Ct,errnames:ne,dependencies:function(){try{return{indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:xt,version:xt.split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)})),default:qn,Dexie:qn})),qn.maxKey=on(qn.dependencies.IDBKeyRange),function(e){try{jn=function(e){var t,n=e&&"function"==typeof e.databases;if(!n){var r=new Ln(It,{addons:[]});r.version(1).stores({dbnames:"name"}),t=r.table("dbnames")}return{getDatabaseNames:function(){return n?Fe.resolve(e.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==It}))})):t.toCollection().primaryKeys()},add:function(e){return!n&&e!==It&&t.put({name:e}).catch(ue)},remove:function(e){return!n&&e!==It&&t.delete(e).catch(ue)}}}(e)}catch(e){}}(Ln.dependencies.indexedDB),Fe.rejectionMapper=function(e,t){if(!e||e instanceof J||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ie[e.name])return e;var n=new ie[e.name](t||e.message,e);return"stack"in e&&m(n,"stack",{get:function(){return this.inner.stack}}),n},W(U,St),t.a=Ln}});