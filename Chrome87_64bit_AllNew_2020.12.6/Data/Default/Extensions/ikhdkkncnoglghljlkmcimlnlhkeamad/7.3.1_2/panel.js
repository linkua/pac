!function(e){function t(t){for(var i,o,u=t[0],s=t[1],l=t[2],m=0,p=[];m<u.length;m++)o=u[m],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);for(c&&c(t);p.length;)p.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,u=1;u<n.length;u++){var s=n[u];0!==a[s]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},a={4:0},r=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var u=window.webpackJsonp=window.webpackJsonp||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var c=s;r.push([240,0,1]),n()}({10:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(0),a=n(51),r=n(50),o=n(27),u=n(8);function s(e){const[t]=Object(i.useState)(e),[n,s]=Object(i.useState)(null);return Object(i.useEffect)((()=>{const e=Object(o.a)(t,(e=>{s((t=>t?Object(u.b)(t,(t=>{Object(a.a)(t,e)})):t))}),s);return()=>{e()}}),[t]),[n,e=>{s((t=>{if(!t)return t;if("function"!=typeof e){const t=e;e=e=>{Object(a.a)(e,t)}}return Object(u.b)(t,e,(e=>{const n=e.map((e=>e.path[0])),i=Object(r.a)(t,n),a=Object(u.a)(i,e);browser.storage.local.set(a)}))}))}]}Object(u.c)()},105:function(e,t,n){"use strict";var i=n(11),a=n(17),r=function(){return a.a.Date.now()},o=n(39),u=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,m=parseInt;var p=function(e){if("number"==typeof e)return e;if(Object(o.a)(e))return NaN;if(Object(i.a)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Object(i.a)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(u,"");var n=l.test(e);return n||c.test(e)?m(e.slice(2),n?2:8):s.test(e)?NaN:+e},y=Math.max,d=Math.min;t.a=function(e,t,n){var a,o,u,s,l,c,m=0,h=!1,f=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function N(t){var n=a,i=o;return a=o=void 0,m=t,s=e.apply(i,n)}function b(e){return m=e,l=setTimeout(z,t),h?N(e):s}function g(e){var n=e-c;return void 0===c||n>=t||n<0||f&&e-m>=u}function z(){var e=r();if(g(e))return E(e);l=setTimeout(z,function(e){var n=t-(e-c);return f?d(n,u-(e-m)):n}(e))}function E(e){return l=void 0,v&&a?N(e):(a=o=void 0,s)}function I(){var e=r(),n=g(e);if(a=arguments,o=this,c=e,n){if(void 0===l)return b(c);if(f)return clearTimeout(l),l=setTimeout(z,t),N(c)}return void 0===l&&(l=setTimeout(z,t)),s}return t=p(t)||0,Object(i.a)(n)&&(h=!!n.leading,u=(f="maxWait"in n)?y(p(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),I.cancel=function(){void 0!==l&&clearTimeout(l),m=0,a=c=o=l=void 0},I.flush=function(){return void 0===l?s:E(r())},I}},124:function(e,t,n){"use strict";t.a=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},126:function(e,t,n){},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(12),a=n(44),r="undefined"!=typeof document?new a.a(document.documentElement,i.FOCUS_DISABLED):{isActive:function(){return!0},start:function(){return!0},stop:function(){return!0}},o={alwaysShowFocus:function(){return r.stop()},isActive:function(){return r.isActive()},onlyShowFocusOnTabs:function(){return r.start()}}},19:function(e,t,n){"use strict";const i={name:"百度翻译",value:"BaiDuWeb",icon:browser.runtime.getURL("baidu.ico")},a={name:"有道翻译",value:"YouDaoWeb",icon:browser.runtime.getURL("youdao.ico")},r={name:"谷歌翻译",value:"GoogleWeb",icon:browser.runtime.getURL("google.ico")};t.a=[r,i,a]},20:function(e,t,n){"use strict";var i=n(41),a=n(40),r=n(18);t.a=function(e){return Object(r.a)(e)?Object(i.a)(e):Object(a.a)(e)}},240:function(e,t,n){e.exports=n(241)},241:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(13),o=n.n(r),u=n(128),s=(n(126),n(242),n(56)),l=n(34),c=n(43),m=n(50),p=n(7);u.a.onlyShowFocusOnTabs();const y=Object(m.a)(p.a,["autoClipboard"]);function d(){const[e,t]=Object(i.useState)(""),n=Object(i.useRef)(null);function r(e){var i;e?(t(e),null===(i=n.current)||void 0===i||i.select()):browser.storage.local.get(y).then((({autoClipboard:e})=>{var i;t(e?Object(c.a)():""),null===(i=n.current)||void 0===i||i.select()}))}return Object(l.a)(),Object(i.useEffect)((()=>{r(decodeURIComponent(window.location.search.slice(6)))}),[]),Object(i.useEffect)((()=>{browser.runtime.onMessage.addListener((e=>{switch(e.action){case"translateInPopup":r(e.data)}}))}),[]),a.a.createElement(s.a,{ref:n,queryText:e,showTextArea:!0,textMode:!0})}window.addEventListener("DOMContentLoaded",(()=>{o.a.render(a.a.createElement(d,null),document.getElementById("app"))}))},242:function(e,t,n){},26:function(e){e.exports=JSON.parse('[{"zhName":"中文(简体)","pinyin":"zhongwenjianti"},{"zhName":"印地语","pinyin":"yindiyu"},{"zhName":"印尼语","pinyin":"yinniyu"},{"zhName":"意大利语","pinyin":"yidaliyu"},{"zhName":"越南语","pinyin":"yuenanyu"},{"zhName":"英语","pinyin":"yingyu"},{"zhName":"希腊语","pinyin":"xilayu"},{"zhName":"西班牙语","pinyin":"xibanyayu"},{"zhName":"日语","pinyin":"riyu"},{"zhName":"葡萄牙语","pinyin":"putaoyayu"},{"zhName":"马来语","pinyin":"malaiyu"},{"zhName":"荷兰语","pinyin":"helanyu"},{"zhName":"韩语","pinyin":"hanyu"},{"zhName":"芬兰语","pinyin":"fenlanyu"},{"zhName":"法语","pinyin":"fayu"},{"zhName":"俄语","pinyin":"eyu"},{"zhName":"丹麦语","pinyin":"danmaiyu"},{"zhName":"德语","pinyin":"deyu"},{"zhName":"阿拉伯语","pinyin":"alaboyu"},{"zhName":"中文(繁体)","pinyin":"zhongwenfanti"},{"zhName":"意第绪语","pinyin":"yidixuyu"},{"zhName":"伊博语","pinyin":"yiboyu"},{"zhName":"约鲁巴语","pinyin":"yuelubayu"},{"zhName":"亚美尼亚语","pinyin":"yameiniyayu"},{"zhName":"夏威夷语","pinyin":"xiaweiyiyu"},{"zhName":"修纳语","pinyin":"xiunayu"},{"zhName":"信德语","pinyin":"xindeyu"},{"zhName":"宿务语","pinyin":"suwuyu"},{"zhName":"希伯来语","pinyin":"xibolaiyu"},{"zhName":"匈牙利语","pinyin":"xiongyaliyu"},{"zhName":"威尔士语","pinyin":"weiershiyu"},{"zhName":"乌兹别克语","pinyin":"wuzibiekeyu"},{"zhName":"乌尔都语","pinyin":"wuerduyu"},{"zhName":"乌克兰语","pinyin":"wukelanyu"},{"zhName":"泰卢固语","pinyin":"tailuguyu"},{"zhName":"塔吉克语","pinyin":"tajikeyu"},{"zhName":"土库曼语","pinyin":"tukumanyu"},{"zhName":"泰米尔语","pinyin":"taimieryu"},{"zhName":"土耳其语","pinyin":"tuerqiyu"},{"zhName":"泰语","pinyin":"taiyu"},{"zhName":"世界语","pinyin":"shijieyu"},{"zhName":"萨摩亚语","pinyin":"samoyayu"},{"zhName":"索马里语","pinyin":"suomaliyu"},{"zhName":"斯瓦希里语","pinyin":"siwaxiliyu"},{"zhName":"塞尔维亚语","pinyin":"saierweiyayu"},{"zhName":"僧伽罗语","pinyin":"sengqieluoyu"},{"zhName":"斯洛伐克语","pinyin":"siluofakeyu"},{"zhName":"斯洛文尼亚语","pinyin":"siluowenniyayu"},{"zhName":"瑞典语","pinyin":"ruidianyu"},{"zhName":"齐切瓦语","pinyin":"qiqiewayu"},{"zhName":"旁遮普语","pinyin":"pangzhepuyu"},{"zhName":"普什图语","pinyin":"pushituyu"},{"zhName":"南非荷兰语","pinyin":"nanfeihelanyu"},{"zhName":"尼泊尔语","pinyin":"niboeryu"},{"zhName":"挪威语","pinyin":"nuoweiyu"},{"zhName":"毛利语","pinyin":"maoliyu"},{"zhName":"马耳他语","pinyin":"maertayu"},{"zhName":"马拉雅拉姆语","pinyin":"malayalamuyu"},{"zhName":"马拉地语","pinyin":"maladiyu"},{"zhName":"马其顿语","pinyin":"maqidunyu"},{"zhName":"孟加拉语","pinyin":"mengjialayu"},{"zhName":"缅甸语","pinyin":"miandianyu"},{"zhName":"卢旺达语","pinyin":"luwangdayu"},{"zhName":"卢森堡语","pinyin":"lusenbaoyu"},{"zhName":"拉脱维亚语","pinyin":"latuoweiyayu"},{"zhName":"立陶宛语","pinyin":"litaowanyu"},{"zhName":"拉丁语","pinyin":"ladingyu"},{"zhName":"老挝语","pinyin":"laozhuayu"},{"zhName":"罗马尼亚语","pinyin":"luomaniyayu"},{"zhName":"库尔德语","pinyin":"kuerdeyu"},{"zhName":"科西嘉语","pinyin":"kexijiayu"},{"zhName":"卡纳达语","pinyin":"kanadayu"},{"zhName":"克罗地亚语","pinyin":"keluodiyayu"},{"zhName":"吉尔吉斯语","pinyin":"jierjisiyu"},{"zhName":"加利西亚语","pinyin":"jialixiyayu"},{"zhName":"加泰罗尼亚语","pinyin":"jiatailuoniyayu"},{"zhName":"捷克语","pinyin":"jiekeyu"},{"zhName":"豪萨语","pinyin":"haosayu"},{"zhName":"哈萨克语","pinyin":"hasakeyu"},{"zhName":"古吉拉特语","pinyin":"gujilateyu"},{"zhName":"格鲁吉亚语","pinyin":"gelujiyayu"},{"zhName":"高棉语","pinyin":"gaomianyu"},{"zhName":"菲律宾语","pinyin":"feilvbinyu"},{"zhName":"鞑靼语","pinyin":"dadayu"},{"zhName":"冰岛语","pinyin":"bingdaoyu"},{"zhName":"巴斯克语","pinyin":"basikeyu"},{"zhName":"波斯尼亚语","pinyin":"bosiniyayu"},{"zhName":"白俄罗斯语","pinyin":"baieluosiyu"},{"zhName":"波斯语","pinyin":"bosiyu"},{"zhName":"保加利亚语","pinyin":"baojialiyayu"},{"zhName":"波兰语","pinyin":"bolanyu"},{"zhName":"奥里亚语","pinyin":"aoliyayu"},{"zhName":"阿姆哈拉语","pinyin":"amuhalayu"},{"zhName":"爱尔兰语","pinyin":"aierlanyu"},{"zhName":"阿尔巴尼亚语","pinyin":"aerbaniyayu"},{"zhName":"阿塞拜疆语","pinyin":"asaibaijiangyu"},{"zhName":"爱沙尼亚语","pinyin":"aishaniyayu"},{"zhName":"中古法语","pinyin":"zhonggufayu"},{"zhName":"扎扎其语","pinyin":"zazaqiyu"},{"zhName":"爪哇语","pinyin":"zhaowayu"},{"zhName":"祖鲁语","pinyin":"zuluyu"},{"zhName":"中文(文言文)","pinyin":"zhongwenwenyanwen"},{"zhName":"中文(粤语)","pinyin":"zhongwenyueyu"},{"zhName":"印古什语","pinyin":"yingushiyu"},{"zhName":"因特语","pinyin":"yinteyu"},{"zhName":"伊努克提图特语","pinyin":"yinuketituteyu"},{"zhName":"伊多语","pinyin":"yiduoyu"},{"zhName":"亚齐语","pinyin":"yaqiyu"},{"zhName":"新挪威语","pinyin":"xinnuoweiyu"},{"zhName":"下索布语","pinyin":"xiasuobuyu"},{"zhName":"希利盖农语","pinyin":"xiligainongyu"},{"zhName":"西里西亚语","pinyin":"xilixiyayu"},{"zhName":"西弗里斯语","pinyin":"xifulisiyu"},{"zhName":"西非书面语","pinyin":"xifeishumianyu"},{"zhName":"叙利亚语","pinyin":"xuliyayu"},{"zhName":"瓦隆语","pinyin":"walongyu"},{"zhName":"文达语","pinyin":"wendayu"},{"zhName":"沃洛夫语","pinyin":"woluofuyu"},{"zhName":"突尼斯阿拉伯语","pinyin":"tunisialaboyu"},{"zhName":"提格利尼亚语","pinyin":"tigeliniyayu"},{"zhName":"他加禄语","pinyin":"tajialuyu"},{"zhName":"书面挪威语","pinyin":"shumiannuoweiyu"},{"zhName":"桑海语","pinyin":"sanghaiyu"},{"zhName":"掸语","pinyin":"danyu"},{"zhName":"塞尔维亚-克罗地亚语","pinyin":"saierweiyakeluodiyayu"},{"zhName":"萨丁尼亚语","pinyin":"sadingniyayu"},{"zhName":"苏格兰语","pinyin":"sugelanyu"},{"zhName":"切罗基语","pinyin":"qieluojiyu"},{"zhName":"契维语","pinyin":"qiweiyu"},{"zhName":"帕皮阿门托语","pinyin":"papiamentuoyu"},{"zhName":"那不勒斯语","pinyin":"nabulesiyu"},{"zhName":"南恩德贝莱语","pinyin":"nanendebeilaiyu"},{"zhName":"南索托语","pinyin":"nansuotuoyu"},{"zhName":"毛里求斯克里奥尔语","pinyin":"maoliqiusikeliaoeryu"},{"zhName":"曼克斯语","pinyin":"mankesiyu"},{"zhName":"马绍尔语","pinyin":"mashaoeryu"},{"zhName":"迈蒂利语","pinyin":"maidiliyu"},{"zhName":"马拉加斯语","pinyin":"malajiasiyu"},{"zhName":"逻辑语","pinyin":"luojiyu"},{"zhName":"罗姆语","pinyin":"luomuyu"},{"zhName":"卢森尼亚语","pinyin":"lusenniyayu"},{"zhName":"卢干达语","pinyin":"lugandayu"},{"zhName":"林堡语","pinyin":"linbaoyu"},{"zhName":"拉特加莱语","pinyin":"latejialaiyu"},{"zhName":"罗曼什语","pinyin":"luomanshiyu"},{"zhName":"林加拉语","pinyin":"linjialayu"},{"zhName":"克丘亚语","pinyin":"keqiuyayu"},{"zhName":"克林贡语","pinyin":"kelingongyu"},{"zhName":"克里米亚鞑靼语","pinyin":"kelimiyadadayu"},{"zhName":"克里克语","pinyin":"kelikeyu"},{"zhName":"康瓦尔语","pinyin":"kangwaeryu"},{"zhName":"卡舒比语","pinyin":"kashubiyu"},{"zhName":"卡努里语","pinyin":"kanuliyu"},{"zhName":"卡拜尔语","pinyin":"kabaieryu"},{"zhName":"克什米尔语","pinyin":"keshimieryu"},{"zhName":"孔卡尼语","pinyin":"kongkaniyu"},{"zhName":"科萨语","pinyin":"kesayu"},{"zhName":"加拿大法语","pinyin":"jianadafayu"},{"zhName":"胡帕语","pinyin":"hupayu"},{"zhName":"哈卡钦语","pinyin":"hakaqinyu"},{"zhName":"海地语","pinyin":"haidiyu"},{"zhName":"黑山语","pinyin":"heishanyu"},{"zhName":"古英语","pinyin":"guyingyu"},{"zhName":"古希腊语","pinyin":"guxilayu"},{"zhName":"高地索布语","pinyin":"gaodisuobuyu"},{"zhName":"盖尔语","pinyin":"gaieryu"},{"zhName":"格陵兰语","pinyin":"gelinglanyu"},{"zhName":"瓜拉尼语","pinyin":"gualaniyu"},{"zhName":"刚果语","pinyin":"gangguoyu"},{"zhName":"弗留利语","pinyin":"fuliuliyu"},{"zhName":"梵语","pinyin":"fanyu"},{"zhName":"法罗语","pinyin":"faluoyu"},{"zhName":"富拉尼语","pinyin":"fulaniyu"},{"zhName":"低地德语","pinyin":"didideyu"},{"zhName":"德顿语","pinyin":"dedunyu"},{"zhName":"迪维希语","pinyin":"diweixiyu"},{"zhName":"楚瓦什语","pinyin":"chuwashiyu"},{"zhName":"聪加语","pinyin":"congjiayu"},{"zhName":"布列塔尼语","pinyin":"bulietaniyu"},{"zhName":"博杰普尔语","pinyin":"bojiepueryu"},{"zhName":"俾路支语","pinyin":"biluzhiyu"},{"zhName":"比林语","pinyin":"bilinyu"},{"zhName":"本巴语","pinyin":"benbayu"},{"zhName":"北方萨米语","pinyin":"beifangsamiyu"},{"zhName":"邦板牙语","pinyin":"bangbanyayu"},{"zhName":"柏柏尔语","pinyin":"baibaieryu"},{"zhName":"巴西葡萄牙语","pinyin":"baxiputaoyayu"},{"zhName":"巴什基尔语","pinyin":"bashijieryu"},{"zhName":"比斯拉马语","pinyin":"bisilamayu"},{"zhName":"北索托语","pinyin":"beisuotuoyu"},{"zhName":"奥塞梯语","pinyin":"aosaitiyu"},{"zhName":"奥罗莫语","pinyin":"aoluomoyu"},{"zhName":"奥克语","pinyin":"aokeyu"},{"zhName":"奥杰布瓦语","pinyin":"aojiebuwayu"},{"zhName":"艾马拉语","pinyin":"aimalayu"},{"zhName":"阿斯图里亚斯语","pinyin":"asituliyasiyu"},{"zhName":"阿拉贡语","pinyin":"alagongyu"},{"zhName":"阿肯语","pinyin":"akenyu"},{"zhName":"阿尔及利亚阿拉伯语","pinyin":"aerjiliyaalaboyu"},{"zhName":"阿萨姆语","pinyin":"asamuyu"},{"zhName":"弗里西语","pinyin":"fulixiyu"},{"zhName":"海地克里奥尔语","pinyin":"haidikeliaoeryu"},{"zhName":"马尔加什语","pinyin":"maerjiashiyu"},{"zhName":"蒙古语","pinyin":"mengguyu"},{"zhName":"苗语","pinyin":"miaoyu"},{"zhName":"南非科萨语","pinyin":"nanfeikesayu"},{"zhName":"南非祖鲁语","pinyin":"nanfeizuluyu"},{"zhName":"塞索托语","pinyin":"saisuotuoyu"},{"zhName":"苏格兰盖尔语","pinyin":"sugelangaieryu"},{"zhName":"维吾尔语","pinyin":"weiwueryu"},{"zhName":"印尼巽他语","pinyin":"yinnixuntayu"},{"zhName":"印尼爪哇语","pinyin":"yinnizhaowayu"}]')},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(92);const a=[];function r(e,t,n,i="local"){return browser.storage[i].get(e).then((e=>{(n||t)(e,!0)})).then((()=>{const n=Object.keys(e);a.push({defaultOptions:e,onChange:t,area:i,keys:n})})),()=>{const n=a.findIndex((n=>n.onChange===t&&n.area===i&&n.defaultOptions===e));return n>=0&&(a.splice(n,1),!0)}}browser.storage.onChanged.addListener(((e,t)=>{a.forEach((n=>{if(n.area!==t)return;const a=function(e,t){const n={};for(const i in e)e.hasOwnProperty(i)&&t.includes(i)&&(n[i]=e[i].newValue);return n}(e,n.keys);Object(i.a)(a)||n.onChange(a)}))}))},28:function(e,t,n){"use strict";var i=n(38);t.a=function(e){return"function"==typeof e?e:i.a}},31:function(e,t,n){"use strict";n.d(t,"a",(function(){return Y}));var i={};n.r(i),n.d(i,"MULTISELECT",(function(){return b})),n.d(i,"MULTISELECT_POPOVER",(function(){return g})),n.d(i,"MULTISELECT_TAG_INPUT_INPUT",(function(){return z})),n.d(i,"OMNIBAR",(function(){return E})),n.d(i,"OMNIBAR_OVERLAY",(function(){return I})),n.d(i,"SELECT",(function(){return w})),n.d(i,"SELECT_POPOVER",(function(){return O}));var a=n(0),r=n.n(a),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function u(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var s=function(){return(s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function l(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}var c=n(3),m=n.n(c),p=n(75),y=n(259),d=n(25),h=n(1),f=n(6),v=n(138),N=h.a.getClassNamespace(),b=N+"-multi-select",g=b+"-popover",z=b+"-tag-input-input",E=N+"-omnibar",I=E+"-overlay",w=N+"-select",O=w+"-popover";function j(e,t,n){return void 0===e||null==t||null==n?t===n:h.c.isFunction(e)?e(t,n):t[e]===n[e]}function C(e){if(null==e)return!1;var t=Object.keys(e);return 1===t.length&&"__blueprintCreateNewItemBrand"===t[0]&&"blueprint-create-new-item"===e.__blueprintCreateNewItemBrand}function P(e){return null==e||C(e)?null:e}var k=function(e){function t(t,n){var i,r,o=e.call(this,t,n)||this;o.refHandlers={itemsParent:function(e){return o.itemsParentRef=e}},o.shouldCheckActiveItemInViewport=!1,o.expectedNextActiveItem=null,o.isEnterKeyPressed=!1,o.renderItemList=function(e){var t=o.props,n=t.initialContent,i=t.noResults,r=e.renderCreateItem(),u=function(e,t,n){if(0===e.query.length&&void 0!==n)return n;var i=e.filteredItems.map(e.renderItem).filter((function(e){return null!=e}));return i.length>0?i:t}(e,null!=r?null:i,n);if(null==u&&null==r)return null;var s=o.isCreateItemFirst();return a.createElement(y.u,{ulRef:e.itemsParentRef},s&&r,u,!s&&r)},o.renderItem=function(e,t){if(!0!==o.props.disabled){var n=o.state,i=n.activeItem,a=n.query,r=o.state.filteredItems.indexOf(e)>=0,u={active:j(o.props.itemsEqual,P(i),e),disabled:T(e,t,o.props.itemDisabled),matchesPredicate:r};return o.props.itemRenderer(e,{handleClick:function(t){return o.handleItemSelect(e,t)},index:t,modifiers:u,query:a})}return null},o.renderCreateItemMenuItem=function(){if(o.isCreateItemRendered()){var e=o.state,t=e.activeItem,n=e.query.trim(),i=C(t);return o.props.createNewItemRenderer(n,i,(function(e){o.handleItemCreate(n,e)}))}return null},o.handleItemCreate=function(e,t){var n,i,a,r,u=null===(i=(n=o.props).createNewItemFromQuery)||void 0===i?void 0:i.call(n,e);null!=u&&(null===(r=(a=o.props).onItemSelect)||void 0===r||r.call(a,u,t),o.maybeResetQuery())},o.handleItemSelect=function(e,t){var n,i;o.setActiveItem(e),null===(i=(n=o.props).onItemSelect)||void 0===i||i.call(n,e,t),o.maybeResetQuery()},o.handlePaste=function(e){for(var t,n=o.props,i=n.createNewItemFromQuery,a=n.onItemsPaste,r=[],u=[],s=0,l=e;s<l.length;s++){var c=l[s],m=x(c,o.props);if(void 0!==m)t=m,u.push(m);else if(o.canCreateItems()){var p=null==i?void 0:i(c);void 0!==p&&u.push(p)}else r.push(c)}o.setQuery(r.join(", "),!1),void 0!==t&&o.setActiveItem(t),null==a||a(u)},o.handleKeyDown=function(e){var t,n,i=e.keyCode;if(i===h.b.ARROW_UP||i===h.b.ARROW_DOWN){e.preventDefault();var a=o.getNextActiveItem(i===h.b.ARROW_UP?-1:1);null!=a&&o.setActiveItem(a)}else i===h.b.ENTER&&(o.isEnterKeyPressed=!0);null===(n=(t=o.props).onKeyDown)||void 0===n||n.call(t,e)},o.handleKeyUp=function(e){var t=o.props.onKeyUp,n=o.state.activeItem;e.keyCode===h.b.ENTER&&o.isEnterKeyPressed&&(e.preventDefault(),null==n||C(n)?o.handleItemCreate(o.state.query,e):o.handleItemSelect(n,e),o.isEnterKeyPressed=!1),null==t||t(e)},o.handleInputQueryChange=function(e){var t,n,i=null==e?"":e.target.value;o.setQuery(i),null===(n=(t=o.props).onQueryChange)||void 0===n||n.call(t,i,e)};var u=t.query,s=void 0===u?"":u,l=null===(i=t.createNewItemFromQuery)||void 0===i?void 0:i.call(t,s),c=R(s,t);return o.state={activeItem:void 0!==t.activeItem?t.activeItem:null!==(r=t.initialActiveItem)&&void 0!==r?r:S(c,t.itemDisabled),createNewItem:l,filteredItems:c,query:s},o}return u(t,e),t.ofType=function(){return t},t.prototype.render=function(){var e=this.props,t=e.className,n=e.items,i=e.renderer,a=e.itemListRenderer,r=void 0===a?this.renderItemList:a,o=this.state,u=(o.createNewItem,l(o,["createNewItem"]));return i(s(s({},u),{className:t,handleItemSelect:this.handleItemSelect,handleKeyDown:this.handleKeyDown,handleKeyUp:this.handleKeyUp,handlePaste:this.handlePaste,handleQueryChange:this.handleInputQueryChange,itemList:r(s(s({},u),{items:n,itemsParentRef:this.refHandlers.itemsParent,renderCreateItem:this.renderCreateItemMenuItem,renderItem:this.renderItem}))}))},t.prototype.componentDidUpdate=function(e){var t=this;void 0!==this.props.activeItem&&this.props.activeItem!==this.state.activeItem&&(this.shouldCheckActiveItemInViewport=!0,this.setState({activeItem:this.props.activeItem})),null!=this.props.query&&this.props.query!==e.query?this.setQuery(this.props.query,this.props.resetOnQuery,this.props):h.c.shallowCompareKeys(this.props,e,{include:["items","itemListPredicate","itemPredicate"]})||this.setQuery(this.state.query),this.shouldCheckActiveItemInViewport&&(this.requestAnimationFrame((function(){return t.scrollActiveItemIntoView()})),this.shouldCheckActiveItemInViewport=!1)},t.prototype.scrollActiveItemIntoView=function(){var e=!1!==this.props.scrollToActiveItem,t=!j(this.props.itemsEqual,P(this.expectedNextActiveItem),P(this.props.activeItem));if(this.expectedNextActiveItem=null,e||!t){var n=this.getActiveElement();if(null!=this.itemsParentRef&&null!=n){var i=n.offsetTop,a=n.offsetHeight,r=this.itemsParentRef,o=r.offsetTop,u=r.scrollTop,s=r.clientHeight,l=this.getItemsParentPadding(),c=l.paddingTop,m=i+a+l.paddingBottom-o,p=i-c-o;m>=u+s?this.itemsParentRef.scrollTop=m+a-s:p<=u&&(this.itemsParentRef.scrollTop=p-a)}}},t.prototype.setQuery=function(e,t,n){var i;void 0===t&&(t=this.props.resetOnQuery),void 0===n&&(n=this.props);var a=n.createNewItemFromQuery;this.shouldCheckActiveItemInViewport=!0,e!==this.state.query&&(null===(i=n.onQueryChange)||void 0===i||i.call(n,e));var r=e.trim(),o=R(r,n),u=null!=a&&""!==r?a(r):void 0;this.setState({createNewItem:u,filteredItems:o,query:e});var s=this.getActiveIndex(o);(t||s<0||T(P(this.state.activeItem),s,n.itemDisabled))&&(this.isCreateItemRendered()&&this.isCreateItemFirst()?this.setActiveItem({__blueprintCreateNewItemBrand:"blueprint-create-new-item"}):this.setActiveItem(S(o,n.itemDisabled)))},t.prototype.setActiveItem=function(e){var t,n,i,a;this.expectedNextActiveItem=e,void 0===this.props.activeItem&&(this.shouldCheckActiveItemInViewport=!0,this.setState({activeItem:e})),C(e)?null===(n=(t=this.props).onActiveItemChange)||void 0===n||n.call(t,null,!0):null===(a=(i=this.props).onActiveItemChange)||void 0===a||a.call(i,e,!1)},t.prototype.getActiveElement=function(){var e=this.state.activeItem;if(null!=this.itemsParentRef){if(C(e)){var t=this.isCreateItemFirst()?0:this.state.filteredItems.length;return this.itemsParentRef.children.item(t)}var n=this.getActiveIndex();return this.itemsParentRef.children.item(n)}},t.prototype.getActiveIndex=function(e){void 0===e&&(e=this.state.filteredItems);var t=this.state.activeItem;if(null==t||C(t))return-1;for(var n=0;n<e.length;++n)if(j(this.props.itemsEqual,e[n],t))return n;return-1},t.prototype.getItemsParentPadding=function(){var e=getComputedStyle(this.itemsParentRef),t=e.paddingTop;return{paddingBottom:A(e.paddingBottom),paddingTop:A(t)}},t.prototype.getNextActiveItem=function(e,t){if((void 0===t&&(t=this.getActiveIndex()),this.isCreateItemRendered())&&(0===t&&-1===e||t===this.state.filteredItems.length-1&&1===e))return{__blueprintCreateNewItemBrand:"blueprint-create-new-item"};return S(this.state.filteredItems,this.props.itemDisabled,e,t)},t.prototype.isCreateItemRendered=function(){return this.canCreateItems()&&""!==this.state.query&&!this.wouldCreatedItemMatchSomeExistingItem()},t.prototype.isCreateItemFirst=function(){return"first"===this.props.createNewItemPosition},t.prototype.canCreateItems=function(){return null!=this.props.createNewItemFromQuery&&null!=this.props.createNewItemRenderer},t.prototype.wouldCreatedItemMatchSomeExistingItem=function(){var e=this;return this.state.filteredItems.some((function(t){return j(e.props.itemsEqual,t,e.state.createNewItem)}))},t.prototype.maybeResetQuery=function(){this.props.resetOnSelect&&this.setQuery("",!0)},t.displayName=f.a+".QueryList",t.defaultProps={disabled:!1,resetOnQuery:!0},t}(n(96).a);function A(e){return null==e?0:parseInt(e.slice(0,-2),10)}function x(e,t){var n=t.items,i=t.itemPredicate;if(h.c.isFunction(i))for(var a=0;a<n.length;a++){var r=n[a];if(i(e,r,a,!0))return r}}function R(e,t){var n=t.items,i=t.itemPredicate,a=t.itemListPredicate;return h.c.isFunction(a)?a(e,n):h.c.isFunction(i)?n.filter((function(t,n){return i(e,t,n)})):n}function T(e,t,n){return null!=n&&null!=e&&(h.c.isFunction(n)?n(e,t):!!e[n])}function S(e,t,n,i){if(void 0===n&&(n=1),void 0===i&&(i=e.length-1),0===e.length)return null;var a,r,o,u=i,s=e.length-1;do{if(o=s,!T(e[u=(a=u+n)<(r=0)?o:a>o?r:a],u,t))return e[u]}while(u!==i&&-1!==i);return null}var L=function(e){function t(){var t,n=e.apply(this,arguments)||this;return n.state={isOpen:!1},n.TypedQueryList=k.ofType(),n.inputEl=null,n.queryList=null,n.refHandlers={input:Object(p.c)(null===(t=n.props.inputProps)||void 0===t?void 0:t.inputRef)?n.inputEl=n.props.inputProps.inputRef:function(e){var t,i;n.inputEl=e,null===(i=null===(t=n.props.inputProps)||void 0===t?void 0:t.inputRef)||void 0===i||i(e)},queryList:function(e){return n.queryList=e}},n.renderQueryList=function(e){var t=n.props,r=t.filterable,o=void 0===r||r,u=t.disabled,l=void 0!==u&&u,c=t.inputProps,p=void 0===c?{}:c,h=t.popoverProps,f=void 0===h?{}:h,v=a.createElement(y.t,s({leftIcon:"search",placeholder:"Filter...",rightElement:n.maybeRenderClearButton(e.query)},p,{inputRef:n.refHandlers.input,onChange:e.handleQueryChange,value:e.query})),N=e.handleKeyDown,b=e.handleKeyUp;return a.createElement(y.B,s({autoFocus:!1,enforceFocus:!1,isOpen:n.state.isOpen,disabled:l,position:d.a.BOTTOM_LEFT},f,{className:m()(e.className,f.className),onInteraction:n.handlePopoverInteraction,popoverClassName:m()(i.SELECT_POPOVER,f.popoverClassName),onOpening:n.handlePopoverOpening,onOpened:n.handlePopoverOpened,onClosing:n.handlePopoverClosing}),a.createElement("div",{onKeyDown:n.state.isOpen?N:n.handleTargetKeyDown,onKeyUp:n.state.isOpen?b:void 0},n.props.children),a.createElement("div",{onKeyDown:N,onKeyUp:b},o?v:void 0,e.itemList))},n.handleTargetKeyDown=function(e){e.which!==h.b.ARROW_UP&&e.which!==h.b.ARROW_DOWN||(e.preventDefault(),n.setState({isOpen:!0}))},n.handleItemSelect=function(e,t){var i,a;n.setState({isOpen:!1}),null===(a=(i=n.props).onItemSelect)||void 0===a||a.call(i,e,t)},n.handlePopoverInteraction=function(e){var t,i;n.setState({isOpen:e}),null===(i=null===(t=n.props.popoverProps)||void 0===t?void 0:t.onInteraction)||void 0===i||i.call(t,e)},n.handlePopoverOpening=function(e){var t,i;n.previousFocusedElement=document.activeElement,n.props.resetOnClose&&n.resetQuery(),null===(i=null===(t=n.props.popoverProps)||void 0===t?void 0:t.onOpening)||void 0===i||i.call(t,e)},n.handlePopoverOpened=function(e){var t,i;null!=n.queryList&&n.queryList.scrollActiveItemIntoView(),n.requestAnimationFrame((function(){var e,t=n.props.inputProps;!1!==(void 0===t?{}:t).autoFocus&&(null===(e=Object(p.a)(n.inputEl))||void 0===e||e.focus())})),null===(i=null===(t=n.props.popoverProps)||void 0===t?void 0:t.onOpened)||void 0===i||i.call(t,e)},n.handlePopoverClosing=function(e){var t,i;n.requestAnimationFrame((function(){void 0!==n.previousFocusedElement&&(n.previousFocusedElement.focus(),n.previousFocusedElement=void 0)})),null===(i=null===(t=n.props.popoverProps)||void 0===t?void 0:t.onClosing)||void 0===i||i.call(t,e)},n.resetQuery=function(){return n.queryList&&n.queryList.setQuery("",!0)},n}return u(t,e),t.ofType=function(){return t},t.prototype.render=function(){var e=this.props,t=(e.filterable,e.inputProps,e.popoverProps,l(e,["filterable","inputProps","popoverProps"]));return a.createElement(this.TypedQueryList,s({},t,{onItemSelect:this.handleItemSelect,ref:this.refHandlers.queryList,renderer:this.renderQueryList}))},t.prototype.componentDidUpdate=function(e,t){this.state.isOpen&&!t.isOpen&&null!=this.queryList&&this.queryList.scrollActiveItemIntoView()},t.prototype.maybeRenderClearButton=function(e){return e.length>0?a.createElement(y.c,{icon:"cross",minimal:!0,onClick:this.resetQuery}):void 0},t.displayName=f.a+".Select",t}(v.a),q=n(26);var F=function(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e},B=n(49),D=Object(B.a)(!0),_=n(20);var U=function(e,t){return e&&D(e,t,_.a)},M=n(18);var Q=function(e,t){return function(n,i){if(null==n)return n;if(!Object(M.a)(n))return e(n,i);for(var a=n.length,r=t?a:-1,o=Object(n);(t?r--:++r<a)&&!1!==i(o[r],r,o););return n}}(U,!0),K=n(28),W=n(15);var V=function(e,t){return(Object(W.a)(e)?F:Q)(e,Object(K.a)(t))};const $="自动检测",G=[{zhName:$,pinyin:"zidongjiance"}].concat(q),H=L.ofType(),Z=(e,{handleClick:t,modifiers:n})=>n.matchesPredicate?r.a.createElement(y.w,{onClick:t,active:n.active,key:e.zhName,text:e.zhName}):null,J=(e,t,n,i)=>{const a=e.toLowerCase();return i?t.zhName===a:t.zhName.includes(a)||t.pinyin.includes(a)};function Y(e){const{addAuto:t,offset:n,small:i,recentUse:o}=e,[u,s]=Object(a.useState)(t?G:q);Object(a.useEffect)((()=>{const e=t?G:q;if(!o||!o.length)return void s(e);const n=[...e];V(o,(e=>{const t=n.findIndex((t=>t.zhName===e));if(t<0)return;const i=n.splice(t,1)[0];n.unshift(i)})),s(n)}),[t,o]);const l=(()=>{if(!o||!o.length)return o;const e=o.indexOf("");if(e>=0){const t=[...o];return t[e]=$,t}return o})(),[c,m]=Object(a.useState)(null);return Object(a.useEffect)((()=>{const t=e.lang||$,n=u.find((e=>e.zhName===t))||null;m(n)}),[u,e.lang]),r.a.createElement(H,{className:"lang-select",onItemSelect:t=>{e.setLang(t.zhName===$?"":t.zhName)},activeItem:c,items:u,itemListRenderer:({filteredItems:e,itemsParentRef:t,query:n,renderItem:i})=>{const a=!n&&l&&l.length?l.map(((e,t)=>{const n=G.find((t=>t.zhName===e));if(n)return i(n,t)})).filter((e=>null!=e)):void 0,o=e.map(a?(e,t)=>{if(!(null==l?void 0:l.includes(e.zhName)))return i(e,t)}:i).filter((e=>null!=e));return r.a.createElement(y.u,{ulRef:t},a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"bp3-menu-header"},r.a.createElement("h6",{className:"bp3-heading"},"最近使用")),a),r.a.createElement("li",{className:"bp3-menu-header"},r.a.createElement("h6",{className:"bp3-heading"},n?"搜索结果":"所有语言")),o.length?o:r.a.createElement("li",{className:"bp3-text-small",style:{paddingLeft:"8px"}},"没有搜索结果"))},itemRenderer:Z,itemPredicate:J,inputProps:{placeholder:"使用拼音或中文搜索"},popoverProps:{usePortal:!1,modifiers:n?{offset:{offset:n}}:void 0}},r.a.createElement(y.c,{rightIcon:"caret-down",text:c?c.zhName:"请选择",small:null==i||i}))}},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(0),a=n(10),r=n(7),o=n(50);const u=Object(o.a)(r.a,["darkMode"]);function s(e=document.body){const[t,n]=Object(a.a)(u),r=null==t?void 0:t.darkMode;return Object(i.useEffect)((()=>{if(e)switch(r){case"open":return void t(!0);case"close":return void t(!1);case"system":const e=window.matchMedia("(prefers-color-scheme: dark)");t(e.matches);const n=()=>{t(e.matches)};return e.addEventListener("change",n),()=>{e.removeEventListener("change",n)}}function t(t){null==e||e.classList[t?"add":"remove"]("bp3-dark")}}),[r,e]),{darkMode:r,setDarkMode:e=>{n({darkMode:e})}}}},43:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u}));var i=n(118);let a,r=()=>{r=i.a,a=document.createElement("textarea"),a.style.position="absolute",a.style.top="-99999px",document.body.appendChild(a)};function o(e){r(),a.value=e,a.select(),document.execCommand("copy")}function u(){return r(),a.value="",a.focus(),document.execCommand("paste"),a.value}},44:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(e,t){var n=this;this.container=e,this.className=t,this.isRunning=!1,this.handleKeyDown=function(e){9===e.which&&(n.reset(),n.container.addEventListener("mousedown",n.handleMouseDown))},this.handleMouseDown=function(){n.reset(),n.container.classList.add(n.className),n.container.addEventListener("keydown",n.handleKeyDown)}}return e.prototype.isActive=function(){return this.isRunning},e.prototype.start=function(){this.container.addEventListener("mousedown",this.handleMouseDown),this.isRunning=!0},e.prototype.stop=function(){this.reset(),this.isRunning=!1},e.prototype.reset=function(){this.container.classList.remove(this.className),this.container.removeEventListener("keydown",this.handleKeyDown),this.container.removeEventListener("mousedown",this.handleMouseDown)},e}()},45:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var i=n(0),a=n.n(i),r=n(259),o=n(3),u=n.n(o);function s(){window.location.reload()}function l(){return a.a.createElement(r.A,{description:"划词翻译内部出现了一个错误，这可能是划词翻译自动更新了导致的，刷新网页即可恢复。",action:a.a.createElement(r.c,{small:!0,onClick:s},"刷新网页")})}const c={BaiDuWeb:"https://fanyi.baidu.com",YouDaoWeb:"http://fanyi.youdao.com",GoogleWeb:"https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=zh-CN&dj=1&ie=UTF-8&oe=UTF-8&source=icon&dt=t&dt=bd&dt=qc&dt=rm&dt=ex&dt=at&dt=ss&dt=rw&dt=ld&q=test"};function m(e){const{api:t,onRetry:n}=e,i=c[t.value];return a.a.createElement(r.A,{description:a.a.createElement(a.a.Fragment,null,"查询结果时发生了网络错误，请确认您能否正常打开"," ",a.a.createElement("a",{href:i,target:"_blank",rel:"noreferrer"},i),"。"),action:a.a.createElement(r.c,{small:!0,onClick:n},"重试")})}function p(e){return a.a.createElement(r.A,{description:"查询超时，请稍后重试。",action:a.a.createElement(r.c,{small:!0,onClick:e.onRetry},"重试")})}function y(e){return a.a.createElement(r.A,{description:`${e.api.name}不支持源语种或目标语种。`})}function d(e){return a.a.createElement(r.A,{description:"查询结果时发生了未知错误，请稍后重试。",action:a.a.createElement(r.c,{small:!0,onClick:e.onRetry},"重试")})}function h(e){const{api:t,onRetry:n}=e;return a.a.createElement(r.A,{description:"谷歌翻译"===t.name?a.a.createElement(a.a.Fragment,null,"谷歌翻译暂时不可用，请稍后再试。",a.a.createElement("a",{href:"https://hcfy.limingkai.cn/faq.html#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%B0%B7%E6%AD%8C%E7%BF%BB%E8%AF%91%E7%BB%8F%E5%B8%B8%E6%8F%90%E7%A4%BA-%E8%B0%B7%E6%AD%8C%E7%BF%BB%E8%AF%91%E6%9A%82%E6%97%B6%E4%B8%8D%E5%8F%AF%E7%94%A8%EF%BC%8C%E8%AF%B7%E7%A8%8D%E5%90%8E%E5%86%8D%E8%AF%95%E3%80%82-%EF%BC%9F",target:"_blank",rel:"noreferrer"},"为什么？")):`${t.name}出现了未知错误。`,action:a.a.createElement(r.c,{small:!0,onClick:n},"重试")})}var f=n(19),v=n(118);async function N(e){const t=await browser.runtime.sendMessage({action:"audio",url:e});(null==t?void 0:t.error)&&window.alert("播放失败，请稍后重试。")}const b=a.a.createElement(r.s,{icon:"volume-up",iconSize:12});function g(e){const t=e.uri;return a.a.createElement(r.c,{icon:b,small:!0,minimal:!0,disabled:!t,onClick:t?()=>N(t):void 0,title:t?"朗读":"不支持此语种"})}function z(e,t){const n=[];e.phonetic&&n.push(e.phonetic.map((e=>`${e.name?e.name+" ":""}/${e.value}/`))),e.dict?n.push(...e.dict.map((e=>`${e.pos?e.pos+("GoogleWeb"===t?": ":" "):""}${e.terms.join(", ")}`))):e.result&&n.push(...e.result),browser.runtime.sendMessage({action:"write to clipboard",text:n.join("\n")})}function E(e){e.stopPropagation()}const I=/\b[A-Z\sa-z]+\b/g;function w(e){const{apiId:t,result:{loading:n,result:{data:o,error:s}},queryResult:c,autoCopy:b=!1,autoPlay:w=!1,wordClickable:O=!0,setQuery:j=v.a}=e,[C,P]=Object(i.useState)("duplicate"),[k,A]=Object(i.useState)(),x=f.a.find((e=>e.value===t)),R=()=>{P("tick"),A("success"),window.setTimeout((()=>{P("duplicate"),A(void 0)}),1e3)};return Object(i.useEffect)((()=>{var e;if(o&&w&&o.text.length<30){const t=(null===(e=o.phonetic)||void 0===e?void 0:e[0].ttsURI)||o.ttsURI;t&&N(t)}}),[w,o]),Object(i.useEffect)((()=>{o&&b&&(z(o,t),R())}),[o,b,t]),a.a.createElement(r.e,{className:"result-block",onClick:E},a.a.createElement("div",{className:"legend"},a.a.createElement("div",{className:"legend-left"},a.a.createElement("span",{className:"api-ico",style:{backgroundImage:`url(${x.icon})`}}),a.a.createElement(r.q,null,x.name),a.a.createElement("span",{className:"source"},null==o?void 0:o.from),!(null==o?void 0:o.phonetic)&&a.a.createElement(g,{uri:null==o?void 0:o.ttsURI})),a.a.createElement("div",null,!s&&!n&&a.a.createElement(a.a.Fragment,null,a.a.createElement(r.c,{onClick:()=>{o&&(z(o,t),R())},icon:a.a.createElement(r.s,{icon:C,iconSize:12}),minimal:!0,small:!0,intent:k,title:"复制翻译结果"}),a.a.createElement(r.b,{disabled:!(null==o?void 0:o.link),target:"_blank",href:(null==o?void 0:o.link)||"",icon:a.a.createElement(r.s,{icon:"share",iconSize:12}),minimal:!0,small:!0,title:"查看详细结果"})))),a.a.createElement("div",{style:{display:n?"block":"none"}},a.a.createElement("p",{className:u()({"bp3-skeleton":n})},"1"),a.a.createElement("p",{className:u()({"bp3-skeleton":n}),style:{width:"150px"}},"1")),s&&a.a.createElement("div",{className:"error"},function(e,t){const{api:n,onRetry:i}=t;switch(e){case"BACKGROUND_DISCONNECTED":return a.a.createElement(l,null);case"NETWORK_ERROR":return a.a.createElement(m,{api:n,onRetry:i});case"NETWORK_TIMEOUT":return a.a.createElement(p,{onRetry:i});case"UNSUPPORTED_LANG":return a.a.createElement(y,{api:n});case"API_SERVER_ERROR":return a.a.createElement(h,{api:n,onRetry:i});default:return a.a.createElement(d,{onRetry:i})}}(s.code,{api:x,onRetry:()=>{c(t)}})),(null==o?void 0:o.phonetic)&&a.a.createElement("div",{className:"phonetic"},o.phonetic.map(((e,t)=>a.a.createElement("div",{key:t,className:"phonetic-item"},e.name&&a.a.createElement("span",null,e.name),e.value&&a.a.createElement("span",null,`/${e.value}/`),e.ttsURI&&a.a.createElement(g,{uri:e.ttsURI}))))),o&&a.a.createElement("div",{className:"common-result"},o.dict&&a.a.createElement("div",{className:"dict"},o.dict.map(((e,n)=>{const i=e.terms.join(", ");return a.a.createElement("p",{key:n},e.pos&&a.a.createElement("span",{className:"dict-pos"},e.pos,"GoogleWeb"===t?": ":""),O?function(e,t){const n=Array.from(e.matchAll(I)),i=e.split(I);return a.a.createElement(a.a.Fragment,null,i.map(((e,i)=>{const r=n[i];return a.a.createElement(a.a.Fragment,{key:i},e,r?a.a.createElement("a",{onClick:()=>t(r[0])},r[0]):"")})))}(i,j):i)}))),!o.dict&&o.result&&a.a.createElement("div",{className:"general-result"},o.result.map(((e,n)=>a.a.createElement("p",{key:n},e,a.a.createElement(g,{uri:{text:e,apiId:t,source:null==o?void 0:o.to}})))))))}},56:function(e,t,n){"use strict";var i=n(0),a=n.n(i),r=n(259),o=n(45),u=n(50),s=n(105),l=n(124),c=n(10),m=n(7),p=n(19);const y=Object(u.a)(m.a,"selectedAPIs");function d(){const[e,t]=Object(c.a)(y);return a.a.createElement(a.a.Fragment,null,p.a.map((n=>a.a.createElement(r.w,{key:n.value,text:n.name,onClick:()=>(e=>{const n=e.value;t((e=>{const t=e.selectedAPIs;t.indexOf(n)<0&&t.push(n)}))})(n),disabled:!e||e.selectedAPIs.includes(n.value)}))))}var h=n(8),f=n(67),v=0;var N=function(e){var t=++v;return Object(f.a)(e)+t};let b="";const g=document.querySelector('link[rel=icon],link[rel="shortcut icon"]');b=g?g.href:window.location.origin+"/favicon.ico";const z=Object(h.b)(((e,t)=>{switch(t.type){case"save translate record":const n=Date.now(),i=N(n+"-");return e.translateId=i,void browser.runtime.sendMessage({action:"save history record",record:{id:i,text:t.text,date:n,url:window.location.href,title:document.title,favicon:b}})}}));var E=n(31);function I(){browser.runtime.sendMessage({action:"open options page"})}function w(e){const{source:t,setSource:n,options:i,setOptions:o,children:u,rightOffset:s}=e;if(!i)return null;const l=(e,t)=>{o((n=>{const i=n[t],a=i.indexOf(e);a>=0?i.splice(a,1):4===i.length&&i.pop(),i.unshift(e)}))};return a.a.createElement(r.e,{className:"quick-settings"},a.a.createElement("div",null,a.a.createElement(E.a,{lang:t,setLang:e=>{n(e),l(e,"recentUseLangFrom")},addAuto:!0,recentUse:i.recentUseLangFrom}),a.a.createElement(r.s,{icon:"arrow-right",iconSize:12,style:{margin:"0 10px"}}),a.a.createElement(E.a,{lang:i.destination,setLang:e=>{o({destination:e}),l(e,"recentUseLangTo")},offset:s,recentUse:i.recentUseLangTo})),a.a.createElement("div",null,p.a.map((e=>a.a.createElement(r.f,{inline:!0,label:e.name.slice(0,2),key:e.value,checked:i.selectedAPIs.includes(e.value),onChange:t=>((e,t)=>{const n=e.value;o((e=>{const i=e.selectedAPIs,a=i.indexOf(n);t?a<0&&i.push(n):a>=0&&i.splice(a,1)}))})(e,t.target.checked)})))),a.a.createElement("div",null,a.a.createElement(r.f,{inline:!0,label:"自动朗读",checked:i.autoPlay,onChange:e=>{o({autoPlay:e.target.checked})}})),u&&a.a.createElement("div",null,u),a.a.createElement("a",{onClick:I,className:"bp3-text-small"},"打开完整设置"))}var O=n(59);var j=function(e,t,n){return null==e?e:Object(O.a)(e,t,n)},C=n(63),P=n(20);var k=function(e,t){return e&&Object(C.a)(e,t,P.a)},A=n(28);var x=function(e,t){return e&&k(e,Object(A.a)(t))};const R={},T=(e,t)=>Object(h.b)(e,(e=>{switch(t.type){case"set loading":return void(t.value?e[t.apiId]={loading:!0,result:{data:null,error:null}}:j(e,[t.apiId,"loading"],!1));case"set result":return void j(e,[t.apiId,"result"],t.result);case"save favorites":const n=Date.now(),i={};return x(e,((e,t)=>{if(!e||e.loading)return;const n=e.result.data;n&&(i[t]=Object(h.d)(n))})),void browser.runtime.sendMessage({action:"save favorite",record:{id:N(n+"-"),text:t.text,date:n,results:i}})}}));function S(e){var t=Object(i.useRef)();return Object(i.useEffect)((function(){t.current=e})),t.current}const L=Object(u.a)(m.a,"selectedAPIs","destination","autoPlay","autoCopy","recentUseLangFrom","recentUseLangTo","sourceTransformNCaml","sourceTransformNoBr","tipPanelSettingsClosed","historyEnabled","favoritesEnabled"),q=Object(u.a)(m.b,["user"]),F=/^[A-Z]?[a-z]+([A-Z][a-z]+)+$/,B=/^([A-Za-z]+_)+[A-Za-z]+$/;t.a=Object(i.forwardRef)((function(e,t){const{queryText:n,headerLeft:m,headerRight:p,extendOptions:y,showTextArea:f=!1,textMode:v=!1}=e,[N,b]=Object(c.a)(L),[g]=Object(c.a)(q),E=(null==g?void 0:g.user)||null,I=N||L,[O,j]=Object(i.useState)(""),[C,P]=Object(i.useState)(""),[k,A]=Object(i.useState)(""),x=Object(i.useRef)(null),[D,_]=Object(i.useState)(!1),{results:U,queryResult:M,dispatchResults:Q}=function(e,t,n,a){const[r,o]=Object(i.useReducer)(T,R),u=S(e),s=S(n),l=S(t),c=async(e,t,n,i)=>{let a;o({type:"set loading",apiId:t,value:!0});try{a=await browser.runtime.sendMessage({action:"translate",data:{apiCode:t,text:e,source:n}})}catch(e){if(null==i?void 0:i.canceled)return;o({type:"set result",apiId:t,result:{data:null,error:{code:"BACKGROUND_DISCONNECTED"}}})}(null==i?void 0:i.canceled)||(o({type:"set loading",apiId:t,value:!1}),a&&o({type:"set result",apiId:t,result:a}))};return Object(i.useEffect)((()=>{if(!e)return;const i=e===u&&n===s&&t!==l,a={canceled:!1};return t.forEach((async t=>{i&&(null==l?void 0:l.includes(t))||c(e,t,n,a)})),()=>{a.canceled=!0}}),[t,a,e,n]),{results:r,queryResult:c,dispatchResults:o}}(k,I.selectedAPIs,O,null==N?void 0:N.destination),[K,W]=Object(i.useState)([]),[,V]=Object(i.useReducer)(z,{translateId:""}),{isInFavorites:$,saveOrDelete:G}=function(e,t){const[n,a]=Object(i.useState)(!1);return Object(i.useEffect)((()=>{browser.runtime.sendMessage({action:"is text in favorites",text:e}).then(a)}),[e]),{isInFavorites:n,saveOrDelete:n?()=>{browser.runtime.sendMessage({action:"delete record in favorites",text:e}),a(!1)}:()=>{t({type:"save favorites",text:e}),a(!0)}}}(k,Q),{sourceTransformNCaml:H,sourceTransformNoBr:Z}=(null==E?void 0:E.vipActivated)?Object(u.a)(N||L,["sourceTransformNCaml","sourceTransformNoBr"]):{sourceTransformNCaml:!1,sourceTransformNoBr:!1},J=Object(i.useCallback)((e=>function(e,t){let n=e.trim();return t&&(t.sourceTransformNoBr&&(n=n.replace(/\n/g,"")),t.sourceTransformNCaml&&(F.test(n)?n=n.replace(/[A-Z]/g,((e,t)=>0===t?e.toLowerCase():" "+e.toLowerCase())):B.test(n)&&(n=n.replace(/_/g," ")))),n}(e,{sourceTransformNCaml:H,sourceTransformNoBr:Z})),[H,Z]),Y=Object(i.useMemo)((()=>Object(s.a)((e=>{A(J(e))}),1e3)),[J]);Object(i.useEffect)((()=>{W((e=>Object(h.b)(e,(e=>{e.splice(0)}))));const e=J(n);P(e),A(e)}),[J,n]),Object(i.useEffect)((()=>{I.historyEnabled&&k&&V({type:"save translate record",text:k})}),[V,k,I.historyEnabled]),Object(i.useImperativeHandle)(t,(()=>({select:()=>{window.setTimeout((()=>{x.current&&(x.current.focus(),x.current.select())}))}})),[]);const X=a.a.createElement(r.c,{icon:a.a.createElement(r.s,{icon:"cog",iconSize:14}),small:!0,minimal:!0,active:D,className:"settings",onClick:()=>{_((e=>!e))},title:"快捷设置"});return a.a.createElement("div",{id:"translate-panel"},a.a.createElement("div",{className:"header"},m,a.a.createElement("div",{className:"drag-block"}),a.a.createElement("div",{className:"right"},!!K.length&&a.a.createElement(r.c,{icon:a.a.createElement(r.s,{icon:"undo",iconSize:14}),small:!0,minimal:!0,title:"返回上一次翻译",onClick:()=>{const e=Object(l.a)(K);e&&(P(e),A(e)),W((e=>Object(h.b)(e,(e=>{e.pop()}))))}}),N&&a.a.createElement(a.a.Fragment,null,N.favoritesEnabled&&a.a.createElement(r.c,{icon:a.a.createElement(r.s,{icon:$?"star":"star-empty",iconSize:14}),small:!0,minimal:!0,title:$?"从收藏夹中删除":"添加到收藏夹",onClick:G}),N.tipPanelSettingsClosed&&X,!N.tipPanelSettingsClosed&&a.a.createElement(r.B,{enforceFocus:!1,content:a.a.createElement("div",{className:"bp3-text-small",style:{width:"200px",padding:"5px"}},"添加 / 隐藏翻译源、语种切换、鼠标悬浮取词开关和显示翻译文本开关在这里。",a.a.createElement("a",{onClick:()=>{b({tipPanelSettingsClosed:!0})}},"不再提示")),canEscapeKeyClose:!1,isOpen:!N.tipPanelSettingsClosed,usePortal:!1},X)),p)),a.a.createElement(r.h,{isOpen:D,keepChildrenMounted:!0},a.a.createElement(w,{source:O,setSource:j,options:N,setOptions:b,user:E,rightOffset:v?-110:void 0},y)),a.a.createElement("div",{className:"query-text",style:{display:f?"":"none"}},a.a.createElement(r.I,{fill:!0,inputRef:e=>x.current=e,value:C,onChange:e=>{const t=e.target.value;P(t),Y(t)}})),a.a.createElement("div",{className:"body"},!k&&a.a.createElement("p",null,"请输入需要翻译的文本。"),k&&(null==N?void 0:N.selectedAPIs.map(((e,t)=>{const n=U[e];return n&&a.a.createElement(o.a,{key:e,apiId:e,result:n,queryResult:()=>{M(k,e,O)},autoPlay:N.autoPlay&&0===t,autoCopy:!!(null==E?void 0:E.vipActivated)&&N.autoPlay&&0===t,setQuery:e=>{W((e=>Object(h.b)(e,(e=>{e.push(k)})))),A(e),P(e)}})}))),!(null==N?void 0:N.selectedAPIs.length)&&a.a.createElement(r.A,{className:"no-api",title:"你隐藏了所有翻译源",description:"请添加一个翻译源来显示翻译结果。",action:a.a.createElement(r.B,{usePortal:!1,content:a.a.createElement(r.u,null,a.a.createElement(d,null))},a.a.createElement(r.c,{icon:"add",text:"添加翻译源"}))})))}))},7:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));const i={button:!0,modifierKey:!0,domainBlackList:[],domainWhiteList:[],textList:[{name:"忽略中文",readonly:!0,enabled:!1,value:"[\\u4e00-\\u9fa5]",description:"如果划选的文本当中包含中文，则不弹出翻译按钮或翻译结果。"},{name:"忽略字符",readonly:!0,enabled:!0,value:"^[\\s.\\-0-9()•+]+$",description:"如果划选的文本全部都是由数字、点、括号、空格、横线、加号和圆点（即 •，多用于密码框）组成的，则不弹出翻译按钮或翻译结果。"}],placement:"bottom",pin:!1,pinPos:null,darkMode:"system",pdfAuto:!0,width:250,destination:"中文(简体)",secondDestination:"英语",showTextArea:!1,selectedAPIs:["BaiDuWeb"],autoClipboard:!0,autoPlay:!1,autoCopy:!1,recentUseLangFrom:[""],recentUseLangTo:["中文(简体)"],tipPanelSettingsClosed:!1,tipBlockedPDFClosed:!1,panelPos:{width:270,height:500,left:100,top:100},notifySyncOptions:!0,sourceTransformNoBr:!1,sourceTransformNCaml:!1,historyEnabled:!1,historySyncEnabled:!1,favoritesEnabled:!0,favoritesSyncEnabled:!1},a={user:null,optionsSyncAt:null,disabledNofiByBrowserUI:!1}},96:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(2),a=n(0),r=n(42),o=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.timeoutIds=[],i.requestIds=[],i.clearTimeouts=function(){if(i.timeoutIds.length>0){for(var e=0,t=i.timeoutIds;e<t.length;e++){var n=t[e];window.clearTimeout(n)}i.timeoutIds=[]}},i.cancelAnimationFrames=function(){if(i.requestIds.length>0){for(var e=0,t=i.requestIds;e<t.length;e++){var n=t[e];window.cancelAnimationFrame(n)}i.requestIds=[]}},Object(r.e)("production")||i.validateProps(i.props),i}return Object(i.c)(t,e),t.prototype.componentDidUpdate=function(e,t,n){Object(r.e)("production")||this.validateProps(this.props)},t.prototype.componentWillUnmount=function(){this.clearTimeouts(),this.cancelAnimationFrames()},t.prototype.requestAnimationFrame=function(e){var t=window.requestAnimationFrame(e);return this.requestIds.push(t),function(){return window.cancelAnimationFrame(t)}},t.prototype.setTimeout=function(e,t){var n=window.setTimeout(e,t);return this.timeoutIds.push(n),function(){return window.clearTimeout(n)}},t.prototype.validateProps=function(e){},t}(a.Component)}});